!function(){var t,e,n;(function(){t=this}).call(this),function(){var t=__meteor_runtime_config__;e=t.meteorEnv,n={isProduction:"production"===e.NODE_ENV,isDevelopment:"production"!==e.NODE_ENV,isClient:!0,isServer:!1,isCordova:!1,isModern:t.isModern},t.gitCommitHash&&(n.gitCommitHash=t.gitCommitHash),t.PUBLIC_SETTINGS&&(n.settings={public:t.PUBLIC_SETTINGS})}.call(this),function(){function e(){this._promiseInfoMap=Object.create(null)}var r=e.prototype;r._define=function t(e,n){n=n||{};for(var r=arguments.length,o=2;o<r;++o){var i=arguments[o];for(var s in i)s in n||(n[s]=i[s])}this[e]=n;var a=this._promiseInfoMap[e];return a&&a.resolve(n),n},r._has=function t(e){return Object.prototype.hasOwnProperty.call(this,e)},r._promise=function t(e){var r=this,o=r._promiseInfoMap[e];return o||((o=r._promiseInfoMap[e]={}).promise=new Promise((function(t,i){o.resolve=t,r._has(e)?t(r[e]):n.startup((function(){r._has(e)||i(new Error("Package "+e+" not installed"))}))}))),o.promise},t.Package=new e,"object"==typeof exports&&(exports.PackageRegistry=e)}.call(this),function(){if(n.isServer)var t=Npm.require("fibers/future");"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.meteorRelease&&(n.release=__meteor_runtime_config__.meteorRelease),n._get=function(t){for(var e=1;e<arguments.length;e++){if(!(arguments[e]in t))return;t=t[arguments[e]]}return t},n._ensure=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];n in t||(t[n]={}),t=t[n]}return t},n._delete=function(t){for(var e=[t],n=!0,r=1;r<arguments.length-1;r++){var o;if(!((o=arguments[r])in t)){n=!1;break}if("object"!=typeof(t=t[o]))break;e.push(t)}for(var r=e.length-1;r>=0;r--){var o=arguments[r+1];if(n)n=!1;else for(var i in e[r][o])return;delete e[r][o]}},n.wrapAsync=function(e,r){return function(){for(var i=r||this,s=Array.prototype.slice.call(arguments),a,u=s.length-1;u>=0;--u){var c=s[u],l=typeof c;if("undefined"!==l){"function"===l&&(a=c);break}}if(!a){if(n.isClient)a=o;else{var f=new t;a=f.resolver()}++u}s[u]=n.bindEnvironment(a);var p=e.apply(i,s);return f?f.wait():p}};var e=Object.prototype.hasOwnProperty;n._inherits=function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);var o=function(){this.constructor=t};return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};var r=!1;function o(t){if(t)return n._debug("Exception in callback of async function",t)}n._wrapAsync=function(t,e){return r||(n._debug("Meteor._wrapAsync has been renamed to Meteor.wrapAsync"),r=!0),n.wrapAsync.apply(n,arguments)}}.call(this),function(){"use strict";var t=this;function e(){if(t.setImmediate){var e=function(e){t.setImmediate(e)};return e.implementation="setImmediate",e}return null}function r(){if(!t.postMessage||t.importScripts)return null;var e=!0,n=t.onmessage;if(t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,!e)return null;var r=0,o={},i="Meteor._setImmediate."+Math.random()+".";function s(t,e){return"string"==typeof t&&t.substring(0,e.length)===e}function a(e){if(e.source===t&&s(e.data,i)){var n=e.data.substring(i.length);try{o[n]&&o[n]()}finally{delete o[n]}}}t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a);var u=function(e){++r,o[r]=e,t.postMessage(i+r,"*")};return u.implementation="postMessage",u}function o(){var e=function(e){t.setTimeout(e,0)};return e.implementation="setTimeout",e}n._setImmediate=e()||r()||o()}.call(this),function(){function t(t){if(Package.ddp){var e=Package.ddp.DDP,n=e._CurrentMethodInvocation||e._CurrentInvocation,r=n.get();if(r&&r.isSimulation)throw new Error("Can't set timers inside simulations");return function(){n.withValue(null,t)}}return t}function e(e,r){return n.bindEnvironment(t(r),e)}n.setTimeout=function(t,n){return setTimeout(e("setTimeout callback",t),n)},n.setInterval=function(t,n){return setInterval(e("setInterval callback",t),n)},n.clearInterval=function(t){return clearInterval(t)},n.clearTimeout=function(t){return clearTimeout(t)},n.defer=function(t){n._setImmediate(e("defer callback",t))}}.call(this),function(){n.makeErrorType=function(t,e){var r=function(){Error.captureStackTrace?Error.captureStackTrace(this,r):this.stack=(new Error).stack,e.apply(this,arguments),this.errorType=t};return n._inherits(r,Error),r},n.Error=n.makeErrorType("Meteor.Error",(function(t,e,n){var r=this;this.isClientSafe=!0,this.error=t,this.reason=e,this.details=n,this.reason?this.message=this.reason+" ["+this.error+"]":this.message="["+this.error+"]"})),n.Error.prototype.clone=function(){var t=this;return new n.Error(this.error,this.reason,this.details)}}.call(this),function(){n._noYieldsAllowed=function(t){return t()},n._SynchronousQueue=function(){var t=this;this._tasks=[],this._running=!1,this._runTimeout=null};var t=n._SynchronousQueue.prototype;t.runTask=function(t){var e=this;if(!this.safeToRunTask())throw new Error("Could not synchronously run a task from a running task");this._tasks.push(t);var r=this._tasks;this._tasks=[],this._running=!0,this._runTimeout&&(clearTimeout(this._runTimeout),this._runTimeout=null);try{for(;r.length>0;){var o=r.shift();try{o()}catch(i){if(0===r.length)throw i;n._debug("Exception in queued task",i)}}}finally{this._running=!1}},t.queueTask=function(t){var e=this;e._tasks.push(t),e._runTimeout||(e._runTimeout=setTimeout((function(){return e.flush.apply(e,arguments)}),0))},t.flush=function(){var t=this;this.runTask((function(){}))},t.drain=function(){var t=this;if(this.safeToRunTask())for(;this._tasks.length>0;)this.flush()},t.safeToRunTask=function(){var t=this;return!this._running}}.call(this),function(){var t=[],e=!1,r=!1,o=0,i=function(){o++},s=function(){o--,a()},a=function(){if(!(r||!e||o>0)){for(r=!0;t.length;)t.shift()();n.isCordova&&WebAppLocalServer.startupDidComplete()}},u=function(){e||(e=!0,a())};n.isCordova&&(i(),document.addEventListener("deviceready",s,!1)),"complete"===document.readyState||"loaded"===document.readyState?window.setTimeout(u):document.addEventListener?(document.addEventListener("DOMContentLoaded",u,!1),window.addEventListener("load",u,!1)):(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&u()})),window.attachEvent("load",u)),n.startup=function(e){var o=!document.addEventListener&&document.documentElement.doScroll;if(o&&window===top){try{o("left")}catch(i){return void setTimeout((function(){n.startup(e)}),50)}e()}else r?e():t.push(e)}}.call(this),function(){var t=0;n._debug=function(){if(t)t--;else if("undefined"!=typeof console&&void 0!==console.log)if(0==arguments.length)console.log("");else if("function"==typeof console.log.apply){for(var e=!0,n=0;n<arguments.length;n++)"string"!=typeof arguments[n]&&(e=!1);e?console.log.apply(console,[Array.prototype.join.call(arguments," ")]):console.log.apply(console,arguments)}else if("function"==typeof Function.prototype.bind){var r=Function.prototype.bind.call(console.log,console);r.apply(console,arguments)}else Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},n._suppress_log=function(e){t+=e},n._suppressed_log_expected=function(){return 0!==t}}.call(this),function(){n._escapeRegExp=function(t){return String(t).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}.call(this),function(){var t;t=n.isClient?e.TEST_METADATA:process.env.TEST_METADATA;var r=JSON.parse(t||"{}"),o=r.driverPackage;n.isTest=!!r.isTest,n.isAppTest=!!r.isAppTest,n.isPackageTest=!!o&&!n.isTest&&!n.isAppTest,"string"==typeof o&&n.startup((function(){var t=Package[o];if(!t)throw new Error("Can't find test driver package: "+o);if(n.isClient){if("function"!=typeof t.runTests)throw new Error("Test driver package "+o+" missing `runTests` export");t.runTests()}else"function"==typeof t.start&&t.start()}))}.call(this),function(){var t=0,e=[];n.EnvironmentVariable=function(){this.slot=t++};var r=n.EnvironmentVariable.prototype;r.get=function(){return e[this.slot]},r.getOrNullIfOutsideFiber=function(){return this.get()},r.withValue=function(t,n){var r=e[this.slot];try{e[this.slot]=t;var o=n()}finally{e[this.slot]=r}return o},n.bindEnvironment=function(t,r,o){var i=e.slice();if(!r||"string"==typeof r){var s=r||"callback of async function";r=function(t){n._debug("Exception in "+s+":",t)}}return function(){var n=e;try{e=i;var s=t.apply(o,arguments)}catch(a){r(a)}finally{e=n}return s}},n._nodeCodeMustBeInFiber=function(){}}.call(this),function(){n.absoluteUrl=function(t,e){e||"object"!=typeof t||(e=t,t=void 0);var r=(e=Object.assign({},n.absoluteUrl.defaultOptions,e||{})).rootUrl;if(!r)throw new Error("Must pass options.rootUrl or set ROOT_URL in the server environment");if(/^http[s]?:\/\//i.test(r)||(r="http://"+r),r.endsWith("/")||(r+="/"),t){for(;t.startsWith("/");)t=t.slice(1);r+=t}return e.secure&&/^http:/.test(r)&&!/http:\/\/localhost[:\/]/.test(r)&&!/http:\/\/127\.0\.0\.1[:\/]/.test(r)&&(r=r.replace(/^http:/,"https:")),e.replaceLocalhost&&(r=r.replace(/^http:\/\/localhost([:\/].*)/,"http://127.0.0.1$1")),r};var t=n.absoluteUrl.defaultOptions={},e="object"==typeof window&&window.location;"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.ROOT_URL?t.rootUrl=__meteor_runtime_config__.ROOT_URL:e&&e.protocol&&e.host&&(t.rootUrl=e.protocol+"//"+e.host),e&&"https:"===e.protocol&&(t.secure=!0),n._relativeToSiteRootUrl=function(t){return"object"==typeof __meteor_runtime_config__&&"/"===t.substr(0,1)&&(t=(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX||"")+t),t}}.call(this),Package._define("meteor",{Meteor:n,global:t,meteorEnv:e})}();

Package._define("static-html");

Package._define("standard-minifier-css");

Package._define("standard-minifier-js");

!function(){var n=Package.meteor.Meteor,t=Package.meteor.global,e=Package.meteor.meteorEnv,r,o;r=function(n){"use strict";var t=(n=n||{}).extensions||[".js",".json"],e=n.fallback,r=n.mainFields||(n.browser?["browser","main"]:["main"]),o={}.hasOwnProperty;function i(n,t){return p(n)&&m(t)&&o.call(n,t)}var u={},s=new b("/",new b("/..")),c=w(s),f,a;function l(n,t){return p(n)&&x(s,n,t),c}function d(n){this.id=n,this.children=[],this.childrenById={}}function h(n,t){return i(n,t)&&n[t]}function p(n){return null!==n&&"object"==typeof n}function v(n){return"function"==typeof n}function m(n){return"string"==typeof n}function y(n){return new Error("Cannot find module '"+n+"'")}function w(n){var t=n.module;function e(n){return t.require(n)}return e.extensions=j(n).slice(0),e.resolve=function n(e){return t.resolve(e)},e}function b(n,t){var e=this;this.parent=t=t||null,this.module=new d(n),u[n]=this,this.contents=null,this.deps={}}function g(n,t){var e=n.module;if(!i(e,"exports")){var r=n.contents;if(!r){if(n.stub)return n.stub;throw y(e.id)}if(t){e.parent=t;var o=t.children;Array.isArray(o)&&o.push(e)}r(w(n),e.exports=n.stub||{},e,n.module.id,n.parent.module.id),e.loaded=!0}var u=e.runSetters||e.runModuleSetters;return v(u)&&u.call(e),e.exports}function k(n){return n&&p(n.contents)}function P(n){return n&&null===n.contents}function x(n,t,e){Array.isArray(t)?(t.forEach((function(e){m(e)?n.deps[e]=n.module.id:v(e)?t=e:p(e)&&(n.stub=n.stub||{},E(e,(function(t,e){n.stub[e]=t})))})),v(t)||(t=null)):v(t)||m(t)||p(t)||(t=null),t&&(n.contents=n.contents||(p(t)?{}:t),p(t)&&k(n)&&E(t,(function(t,r){if(".."===r)o=n.parent;else{var o=h(n.contents,r);o||((o=n.contents[r]=new b(n.module.id.replace(/\/*$/,"/")+r,n)).options=e)}x(o,t,e)})))}function E(n,t,e){Object.keys(n).forEach((function(e){t.call(this,n[e],e)}),e)}function j(n){return n.options&&n.options.extensions||t}function O(n,t,e){for(;n&&!k(n);)n=n.parent;if(!n||!t||"."===t)return n;if(".."===t)return n.parent;var r=h(n.contents,t);if(e&&(!r||k(r)))for(var o=0;o<e.length;++o){var i=h(n.contents,t+e[o]);if(i&&!k(i))return i}return r}function I(n,t,e){var r=t.split("/");return r.every((function(t,o){return n=o<r.length-1?O(n,t):O(n,t,e)})),n}function A(n,t){var e=t&&t.module;n&&e&&(n.childrenById[e.id]=e)}function q(n,t,e,o){var e=e||n.module,i=j(n);for(n="/"===t.charAt(0)?I(s,t,i):"."===t.charAt(0)?I(n,t,i):M(n,t,i);k(n);){if((o=o||[]).indexOf(n)<0){o.push(n);var u=O(n,"package.json"),c=u&&g(u,e),f,a;if(c&&r.some((function(t){var r=c[t];if(m(r))return f=I(n,r,i)||q(n,r,e,o)}))&&f){n=f,A(e,u);continue}}n=O(n,"index",i)}return n&&m(n.contents)&&(n=q(n,n.contents,e,o)),A(e,n),n}function M(n,t,e){for(var r;n&&!r;n=n.parent)r=k(n)&&I(n,"node_modules/"+t,e);return r}return l.fetch=function(n){throw new Error("fetch not implemented")},d.prototype.prefetch=function(n){var t=this,e=h(u,t.id),r=f=f||Promise.resolve();function o(n){var t=h(u,n.id);P(t)&&!t.pending&&(t.pending=!0,(a=a||{})[n.id]={module:t.module,deps:Object.keys(t.deps),options:t.options,stub:t.stub},E(t.deps,(function(n,e){q(t,e)})),E(n.childrenById,o))}return f=new Promise((function(e){var r=t.resolve(n);E(t.childrenById,o),e(r)})).then((function(n){var t=a;function e(){t&&Object.keys(t).forEach((function(n){h(u,n).pending=!1}))}return a=null,new Promise((function(n){n(t&&l.fetch(t))})).then((function(t){function o(){return l(t),e(),n}return r.then(o,o)}),(function(n){throw e(),n}))}))},l.Module=d,d.prototype.resolve=function(n){var t=q(u[this.id],n);if(t)return t.module.id;var r=y(n);if(e&&v(e.resolve))return e.resolve(n,this.id,r);throw r},d.prototype.require=function n(t){var r=q(u[this.id],t);if(r)return g(r,this);var o=y(t);if(v(e))return e(t,this.id,o);throw o},l},"object"==typeof exports&&(exports.makeInstaller=r),function(){o=r({browser:!0,mainFields:["browser","module","main"],fallback:function(n,t,e){if(n&&n.startsWith("meteor/")){var r=n.split("/",2)[1];throw new Error('Cannot find package "'+r+'". Try "meteor add '+r+'".')}throw e}})}.call(this),function(){if("function"==typeof Profile&&process.env.METEOR_PROFILE){var n=o.Module.prototype;n.require=Profile((function(n){return"require("+JSON.stringify(n)+")"}),n.require)}}.call(this),Package._define("modules-runtime",{meteorInstall:o})}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,n=Package.meteor.meteorEnv,r=Package["modules-runtime"].meteorInstall,o=r({node_modules:{meteor:{modules:{"client.js":function t(e,n){e("./install-packages.js"),e("./stubs.js"),e("./process.js"),e("./reify.js"),n.addStyles=e("./css").addStyles},"css.js":function t(e,n){var r=document,o=r.getElementsByTagName("head").item(0);n.addStyles=function(t){var e=r.createElement("style");e.setAttribute("type","text/css");var n=e.sheet||e.styleSheet;return n?n.cssText=t:e.appendChild(r.createTextNode(t)),o.appendChild(e)}},"install-packages.js":function t(e,n,t){function o(t,e){var n={};n[t+".js"]="string"==typeof e?e:function(e,n,r){r.exports=Package[t]},r({node_modules:{meteor:n}})}o("meteor"),o("static-html"),o("standard-minifier-css"),o("standard-minifier-js"),o("modules-runtime"),o("modules","meteor/modules/client.js"),o("es5-shim"),o("modern-browsers"),o("babel-compiler"),o("ecmascript"),o("typescript"),o("shell-server"),o("ecmascript-runtime"),o("babel-runtime","meteor/babel-runtime/babel-runtime.js"),o("promise","meteor/promise/client.js"),o("fetch","meteor/fetch/modern.js"),o("dynamic-import","meteor/dynamic-import/client.js"),o("ecmascript-runtime-client","meteor/ecmascript-runtime-client/modern.js"),o("webapp","meteor/webapp/webapp_client.js"),o("server-render","meteor/server-render/client.js")},"process.js":function o(i,s,o){if(!e.process)try{e.process=i("process")}catch(l){e.process={}}var a=e.process;t.isServer?r({node_modules:{"process.js":function(t,e,n){n.exports=a}}}):(a.platform="browser",a.nextTick=a.nextTick||t._setImmediate),"object"!=typeof a.env&&(a.env={});var c=Object.prototype.hasOwnProperty;for(var p in n)c.call(n,p)&&(a.env[p]=n[p])},"reify.js":function t(e,n,t){e("reify/lib/runtime").enable(t.constructor.prototype)},"stubs.js":function t(e){var n=!1;try{e.resolve("meteor-node-stubs"),n=!0}catch(r){}n&&e("meteor-node-stubs")},node_modules:{reify:{lib:{runtime:{"index.js":function t(e,n,t){"use strict";var r=e("./utils.js"),o=e("./entry.js");function i(t,e,n){r.setESModule(this.exports),o.getOrCreate(this.id,this);var i=this.resolve(t),s=o.getOrCreate(i);r.isObject(e)&&s.addSetters(this,e,n);var a=this.require(i);null===s.module&&(s.module={id:i,exports:a}),s.runSetters()}function s(t,e){r.setESModule(this.exports);var n=o.getOrCreate(this.id,this);n.addGetters(t,e),this.loaded&&n.runSetters()}function a(t){return this.export({default:function(){return t}},!0)}function c(t){var e=this,n="*+"===t;return function(o){"*"===t||"*+"===t?Object.keys(o).forEach((function(t){(n||"default"!==t)&&r.copyKey(t,e.exports,o)})):e.exports[t]=o}}function p(t){return o.getOrCreate(this.id,this).runSetters(),t}function l(t){return this.exportAs(t?"*+":"*")}n.enable=function(t){return t.link!==i&&(t.link=i,t.export=s,t.exportDefault=a,t.exportAs=c,t.runSetters=p,t.makeNsSetter=l,!0)}},"utils.js":function t(e,n,t){"use strict";var r="function"==typeof Object.setPrototypeOf,o="function"==typeof Symbol,i="__esModule",s=o?Symbol.for(i):null,a=o&&"symbol"==typeof Symbol.toStringTag,c="function"==typeof Object.getOwnPropertyDescriptor,p=Object.prototype.hasOwnProperty;function l(t,e,n){if(c){var r=Object.getOwnPropertyDescriptor(n,t);r.configurable=!0,Object.defineProperty(e,t,r)}else e[t]=n[t]}function f(t){if(d(t)){if(o&&p.call(t,s))return!!t[s];if(p.call(t,i))return!!t[i]}return!1}function u(t){d(t)&&(o&&(t[s]=!0),t[i]||Object.defineProperty(t,i,{configurable:!0,enumerable:!1,value:!0,writable:!1}))}function h(t){return"object"==typeof t&&null!==t}function d(t){var e=typeof t;return"function"===e||"object"===e&&null!==t}function m(){var t=Object.create(null);return a&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module",configurable:!1,enumerable:!1,writable:!1}),u(t),t}function v(t,e){return r?Object.setPrototypeOf(t,e):t.__proto__=e,t}n.copyKey=l,n.valueOrGetter=function(t,e){if(c&&p.call(t,e)){var n=Object.getOwnPropertyDescriptor(t,e);if("function"==typeof n.get)return n.get}return t[e]},n.getESModule=f,n.setESModule=u,n.isObject=h,n.isObjectLike=d,n.createNamespace=m,n.setPrototypeOf=v},"entry.js":function t(e,n,t){"use strict";var r=e("./utils.js"),o={},i={},s={},a=Object.prototype.hasOwnProperty,c=0;function p(t){this.id=t,this.module=null,this.getters=Object.create(null),this.setters=Object.create(null),this.namespace=r.createNamespace()}var l=r.setPrototypeOf(p.prototype,null),f=Object.create(null);function u(t){var e=Object.keys(t),n=e.indexOf("__esModule");return n>=0&&e.splice(n,1),e}function h(t,e){if("function"==typeof e)return e;if("string"==typeof e)return t.exportAs(e);if(Array.isArray(e))switch(e.length){case 0:return null;case 1:return h(t,e[0]);default:var n=e.map((function(e){return h(t,e)}));return function(t){n.forEach((function(e){e(t)}))}}return null}function d(t,e){var n=!1;if(null!==t.module){var o=t.module.exports;r.getESModule(o)||(t.namespace.default=o,n=!0),r.isObjectLike(o)&&((void 0===e||e.indexOf("*")>=0)&&(e=Object.keys(o)),e.forEach((function(e){a.call(t.getters,e)||n&&"default"===e||!a.call(o,e)||r.copyKey(e,t.namespace,o)})))}}function m(t,e,n,o){if("__esModule"!==e){var a=!1;if(void 0===t.last&&(t.last=Object.create(null),a=!0),"*"===e)for(var c=u(n),p=c.length,l=0;l<p;++l){var f=c[l];h(f,r.valueOrGetter(n,f))&&(a=!0)}else h(e,n)&&(a=!0);return a?o(t,e,n):void 0}function h(e,n){var r=n;return r!=r?r=i:void 0===r&&(r=s),t.last[e]!==r&&(t.last[e]=r,!0)}}function v(t,e,n){var r=!0;void 0===e&&(e=Object.keys(t.setters),r=!1);for(var o=e.length,i=0;i<o;++i){var s=e[i];if(!r||a.call(t.setters,s))for(var c=t.setters[s],p=Object.keys(c),l=p.length,f=0;f<l;++f){var u=p[f],h=g(t,s);m(c[u],s,h,n);var d=t.getters[s];"function"==typeof d&&d.runCount>0&&d.constant&&delete c[u]}}}function g(t,e){if("*"===e)return t.namespace;if(a.call(t.namespace,e))return t.namespace[e];if(null!==t.module){var n=t.module.exports;if("default"===e&&!(r.getESModule(n)&&"default"in n))return n;if(null!=n)return n[e]}}function y(){return Math.random().toString(36).replace("0.",++c+"$")}function w(t,e){var n=t.getters[e];try{var r=n();return++n.runCount,r}catch(i){}return o}p.getOrCreate=function(t,e){var n=a.call(f,t)?f[t]:f[t]=new p(t);return r.isObject(e)&&e.id===n.id&&(n.module=e),n},l.addGetters=function(t,e){var n=u(t),r=n.length;e=!!e;for(var o=0;o<r;++o){var i=n[o],s=t[i];"function"!=typeof s||i in this.getters||(this.getters[i]=s,s.constant=e,s.runCount=0)}},l.addSetters=function(t,e,n){var r=u(e),o=r.length;if(o){n=void 0===n?y():t.id+":"+n;for(var i=this,s=0;s<o;++s){var a=r[s],c=h(t,e[a]);"function"==typeof c&&(c.parent=t,a in this.setters||(this.setters[a]=Object.create(null)),this.setters[a][n]=c)}this.runSetters(r)}},l.runGetters=function(t){d(this,t),(void 0===t||t.indexOf("*")>=0)&&(t=Object.keys(this.getters));for(var e=t.length,n=0;n<e;++n){var r=t[n],i=w(this,r);i!==o&&(this.namespace[r]=i,this.module.exports[r]=i)}},l.runSetters=function(t){var e;if(this.runGetters(t),v(this,t,(function(t,n,r){void 0===e&&(e=Object.create(null)),e[t.parent.id]=t.parent,t(r,n)})),e)for(var n=Object.keys(e),r=n.length,o=0;o<r;++o){var i=e[n[o]],s=f[i.id];s&&s.runSetters()}},t.exports=p}}}}}}}}},{extensions:[".js",".json"]});r({node_modules:{"@babel":{runtime:{helpers:{"objectSpread2.js":function t(e,n,t){var r=e("./defineProperty");function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}t.exports=i},"defineProperty.js":function t(e,n,t){function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.exports=r}},"package.json":function t(e,n,t){t.exports={author:{name:"Sebastian McKenzie",email:"sebmck@gmail.com"},bugs:{url:"https://github.com/babel/babel/issues"},bundleDependencies:!1,dependencies:{"regenerator-runtime":"^0.13.2"},deprecated:!1,description:"babel's modular runtime helpers",devDependencies:{"@babel/helpers":"^7.8.4"},gitHead:"5c2e6bc07fed3d28801d93168622c99ae622653a",homepage:"https://babeljs.io/docs/en/next/babel-runtime",license:"MIT",name:"@babel/runtime",publishConfig:{access:"public"},repository:{type:"git",url:"git+https://github.com/babel/babel.git",directory:"packages/babel-runtime"},version:"7.8.4"}}}},"prosemirror-schema-list":{"package.json":function t(e,n,t){t.exports={name:"prosemirror-schema-list",version:"1.1.2",module:"dist/index.es.js",main:"dist/index.js"}},dist:{"index.es.js":function t(e,n,t){let r,o,i,s,a,c,p;t.export({addListNodes:()=>g,bulletList:()=>d,liftListItem:()=>x,listItem:()=>m,orderedList:()=>h,sinkListItem:()=>O,splitListItem:()=>b,wrapInList:()=>y}),t.link("prosemirror-transform",{findWrapping(t){r=t},ReplaceAroundStep(t){o=t},canSplit(t){i=t},liftTarget(t){s=t}},0),t.link("prosemirror-model",{NodeRange(t){a=t},Fragment(t){c=t},Slice(t){p=t}},1);var l=["ol",0],f=["ul",0],u=["li",0],h={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function t(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function t(e){return 1==e.attrs.order?l:["ol",{start:e.attrs.order},0]}},d={parseDOM:[{tag:"ul"}],toDOM:function t(){return f}},m={parseDOM:[{tag:"li"}],toDOM:function t(){return u},defining:!0};function v(t,e){var n={};for(var r in t)n[r]=t[r];for(var o in e)n[o]=e[o];return n}function g(t,e,n){return t.append({ordered_list:v(h,{content:"list_item+",group:n}),bullet_list:v(d,{content:"list_item+",group:n}),list_item:v(m,{content:e})})}function y(t,e){return function(n,o){var i=n.selection,s=i.$from,c=i.$to,p=s.blockRange(c),l=!1,f=p;if(!p)return!1;if(p.depth>=2&&s.node(p.depth-1).type.compatibleContent(t)&&0==p.startIndex){if(0==s.index(p.depth-1))return!1;var u=n.doc.resolve(p.start-2);f=new a(u,u,p.depth),p.endIndex<p.parent.childCount&&(p=new a(s,n.doc.resolve(c.end(p.depth)),p.depth)),l=!0}var h=r(f,t,e,p);return!!h&&(o&&o(w(n.tr,p,h,l,t).scrollIntoView()),!0)}}function w(t,e,n,r,s){for(var a=c.empty,l=n.length-1;l>=0;l--)a=c.from(n[l].type.create(n[l].attrs,a));t.step(new o(e.start-(r?2:0),e.end,e.start,e.end,new p(a,0,0),n.length,!0));for(var f=0,u=0;u<n.length;u++)n[u].type==s&&(f=u+1);for(var h=n.length-f,d=e.start+n.length-(r?2:0),m=e.parent,v=e.startIndex,g=e.endIndex,y=!0;v<g;v++,y=!1)!y&&i(t.doc,d,h)&&(t.split(d,h),d+=2*h),d+=m.child(v).nodeSize;return t}function b(t){return function(e,n){var r=e.selection,o=r.$from,s=r.$to,a=r.node;if(a&&a.isBlock||o.depth<2||!o.sameParent(s))return!1;var l=o.node(-1);if(l.type!=t)return!1;if(0==o.parent.content.size){if(2==o.depth||o.node(-3).type!=t||o.index(-2)!=o.node(-2).childCount-1)return!1;if(n){for(var f=c.empty,u=o.index(-1)>0,h=o.depth-(u?1:2);h>=o.depth-3;h--)f=c.from(o.node(h).copy(f));f=f.append(c.from(t.createAndFill()));var d=e.tr.replace(o.before(u?null:-1),o.after(-3),new p(f,u?3:2,2));d.setSelection(e.selection.constructor.near(d.doc.resolve(o.pos+(u?3:2)))),n(d.scrollIntoView())}return!0}var m=s.pos==o.end()?l.contentMatchAt(0).defaultType:null,v=e.tr.delete(o.pos,s.pos),g=m&&[null,{type:m}];return!!i(v.doc,o.pos,2,g)&&(n&&n(v.split(o.pos,2,g).scrollIntoView()),!0)}}function x(t){return function(e,n){var r=e.selection,o=r.$from,i=r.$to,s=o.blockRange(i,(function(e){return e.childCount&&e.firstChild.type==t}));return!!s&&(!n||(o.node(s.depth-1).type==t?k(e,n,t,s):S(e,n,s)))}}function k(t,e,n,r){var i=t.tr,l=r.end,f=r.$to.end(r.depth);return l<f&&(i.step(new o(l-1,f,l,f,new p(c.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new a(i.doc.resolve(r.$from.pos),i.doc.resolve(f),r.depth)),e(i.lift(r,s(r)).scrollIntoView()),!0}function S(t,e,n){for(var r=t.tr,i=n.parent,s=n.end,a=n.endIndex-1,l=n.startIndex;a>l;a--)s-=i.child(a).nodeSize,r.delete(s-1,s+1);var f=r.doc.resolve(n.start),u=f.nodeAfter,h=0==n.startIndex,d=n.endIndex==i.childCount,m=f.node(-1),v=f.index(-1);if(!m.canReplace(v+(h?0:1),v+1,u.content.append(d?c.empty:c.from(i))))return!1;var g=f.pos,y=g+u.nodeSize;return r.step(new o(g-(h?1:0),y+(d?1:0),g+1,y-1,new p((h?c.empty:c.from(i.copy(c.empty))).append(d?c.empty:c.from(i.copy(c.empty))),h?0:1,d?0:1),h?0:1)),e(r.scrollIntoView()),!0}function O(t){return function(e,n){var r=e.selection,i=r.$from,s=r.$to,a=i.blockRange(s,(function(e){return e.childCount&&e.firstChild.type==t}));if(!a)return!1;var l=a.startIndex;if(0==l)return!1;var f=a.parent,u=f.child(l-1);if(u.type!=t)return!1;if(n){var h=u.lastChild&&u.lastChild.type==f.type,d=c.from(h?t.create():null),m=new p(c.from(t.create(null,c.from(f.type.create(null,d)))),h?3:1,0),v=a.start,g=a.end;n(e.tr.step(new o(v-(h?3:1),g,v,g,m,1,!0)).scrollIntoView())}return!0}}}}},"prosemirror-transform":{"package.json":function t(e,n,t){t.exports={name:"prosemirror-transform",version:"1.2.3",module:"dist/index.es.js",main:"dist/index.js"}},dist:{"index.es.js":function t(e,n,t){let r,o,i,s;t.export({AddMarkStep:()=>V,MapResult:()=>u,Mapping:()=>d,RemoveMarkStep:()=>$,ReplaceAroundStep:()=>S,ReplaceStep:()=>k,Step:()=>b,StepMap:()=>h,StepResult:()=>x,Transform:()=>v,TransformError:()=>m,canJoin:()=>R,canSplit:()=>j,dropPoint:()=>B,findWrapping:()=>T,insertPoint:()=>z,joinPoint:()=>P,liftTarget:()=>M,replaceStep:()=>F}),t.link("prosemirror-model",{ReplaceError(t){r=t},Slice(t){o=t},Fragment(t){i=t},MarkType(t){s=t}},0);var a=65535,c=Math.pow(2,16);function p(t,e){return t+e*c}function l(t){return t&a}function f(t){return(t-(t&a))/c}var u=function t(e,n,r){void 0===n&&(n=!1),void 0===r&&(r=null),this.pos=e,this.deleted=n,this.recover=r},h=function t(e,n){void 0===n&&(n=!1),this.ranges=e,this.inverted=n};h.prototype.recover=function t(e){var n=0,r=l(e);if(!this.inverted)for(var o=0;o<r;o++)n+=this.ranges[3*o+2]-this.ranges[3*o+1];return this.ranges[3*r]+n+f(e)},h.prototype.mapResult=function t(e,n){return void 0===n&&(n=1),this._map(e,n,!1)},h.prototype.map=function t(e,n){return void 0===n&&(n=1),this._map(e,n,!0)},h.prototype._map=function t(e,n,r){for(var o=0,i=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?o:0);if(c>e)break;var l=this.ranges[a+i],f=this.ranges[a+s],h=c+l;if(e<=h){var d,m=c+o+((l?e==c?-1:e==h?1:n:n)<0?0:f);if(r)return m;var v=p(a/3,e-c);return new u(m,n<0?e!=c:e!=h,v)}o+=f-l}return r?e+o:new u(e+o)},h.prototype.touches=function t(e,n){for(var r=0,o=l(n),i=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?r:0);if(c>e)break;var p=this.ranges[a+i],f;if(e<=c+p&&a==3*o)return!0;r+=this.ranges[a+s]-p}return!1},h.prototype.forEach=function t(e){for(var n=this.inverted?2:1,r=this.inverted?1:2,o=0,i=0;o<this.ranges.length;o+=3){var s=this.ranges[o],a=s-(this.inverted?i:0),c=s+(this.inverted?0:i),p=this.ranges[o+n],l=this.ranges[o+r];e(a,a+p,c,c+l),i+=l-p}},h.prototype.invert=function t(){return new h(this.ranges,!this.inverted)},h.prototype.toString=function t(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},h.offset=function t(e){return 0==e?h.empty:new h(e<0?[0,-e,0]:[0,0,e])},h.empty=new h([]);var d=function t(e,n,r,o){this.maps=e||[],this.from=r||0,this.to=null==o?this.maps.length:o,this.mirror=n};function m(t){var e=Error.call(this,t);return e.__proto__=m.prototype,e}d.prototype.slice=function t(e,n){return void 0===e&&(e=0),void 0===n&&(n=this.maps.length),new d(this.maps,this.mirror,e,n)},d.prototype.copy=function t(){return new d(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},d.prototype.appendMap=function t(e,n){this.to=this.maps.push(e),null!=n&&this.setMirror(this.maps.length-1,n)},d.prototype.appendMapping=function t(e){for(var n=0,r=this.maps.length;n<e.maps.length;n++){var o=e.getMirror(n);this.appendMap(e.maps[n],null!=o&&o<n?r+o:null)}},d.prototype.getMirror=function t(e){if(this.mirror)for(var n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]},d.prototype.setMirror=function t(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)},d.prototype.appendMappingInverted=function t(e){for(var n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){var o=e.getMirror(n);this.appendMap(e.maps[n].invert(),null!=o&&o>n?r-o-1:null)}},d.prototype.invert=function t(){var e=new d;return e.appendMappingInverted(this),e},d.prototype.map=function t(e,n){if(void 0===n&&(n=1),this.mirror)return this._map(e,n,!0);for(var r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e},d.prototype.mapResult=function t(e,n){return void 0===n&&(n=1),this._map(e,n,!1)},d.prototype._map=function t(e,n,r){for(var o=!1,i=null,s=this.from;s<this.to;s++){var a=this.maps[s],c=i&&i[s];if(null!=c&&a.touches(e,c))e=a.recover(c);else{var p=a.mapResult(e,n);if(null!=p.recover){var l=this.getMirror(s);if(null!=l&&l>s&&l<this.to){if(p.deleted){s=l,e=this.maps[l].recover(p.recover);continue}(i||(i=Object.create(null)))[l]=p.recover}}p.deleted&&(o=!0),e=p.pos}}return r?e:new u(e,o)},m.prototype=Object.create(Error.prototype),m.prototype.constructor=m,m.prototype.name="TransformError";var v=function t(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new d},g={before:{configurable:!0},docChanged:{configurable:!0}};function y(){throw new Error("Override me")}g.before.get=function(){return this.docs.length?this.docs[0]:this.doc},v.prototype.step=function t(e){var n=this.maybeStep(e);if(n.failed)throw new m(n.failed);return this},v.prototype.maybeStep=function t(e){var n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n},g.docChanged.get=function(){return this.steps.length>0},v.prototype.addStep=function t(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n},Object.defineProperties(v.prototype,g);var w=Object.create(null),b=function t(){};b.prototype.apply=function t(e){return y()},b.prototype.getMap=function t(){return h.empty},b.prototype.invert=function t(e){return y()},b.prototype.map=function t(e){return y()},b.prototype.merge=function t(e){return null},b.prototype.toJSON=function t(){return y()},b.fromJSON=function t(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=w[n.stepType];if(!r)throw new RangeError("No step type "+n.stepType+" defined");return r.fromJSON(e,n)},b.jsonID=function t(e,n){if(e in w)throw new RangeError("Duplicate use of step JSON ID "+e);return w[e]=n,n.prototype.jsonID=e,n};var x=function t(e,n){this.doc=e,this.failed=n};x.ok=function t(e){return new x(e,null)},x.fail=function t(e){return new x(null,e)},x.fromReplace=function t(e,n,o,i){try{return x.ok(e.replace(n,o,i))}catch(s){if(s instanceof r)return x.fail(s.message);throw s}};var k=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function t(e){return this.structure&&O(e,this.from,this.to)?x.fail("Structure replace would overwrite content"):x.fromReplace(e,this.from,this.to,this.slice)},e.prototype.getMap=function t(){return new h([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function t(n){return new e(this.from,this.from+this.slice.size,n.slice(this.from,this.to))},e.prototype.map=function t(n){var r=n.mapResult(this.from,1),o=n.mapResult(this.to,-1);return r.deleted&&o.deleted?null:new e(r.pos,Math.max(r.pos,o.pos),this.slice)},e.prototype.merge=function t(n){if(!(n instanceof e)||n.structure!=this.structure)return null;if(this.from+this.slice.size!=n.from||this.slice.openEnd||n.slice.openStart){if(n.to!=this.from||this.slice.openStart||n.slice.openEnd)return null;var r=this.slice.size+n.slice.size==0?o.empty:new o(n.slice.content.append(this.slice.content),n.slice.openStart,this.slice.openEnd);return new e(n.from,this.to,r,this.structure)}var i=this.slice.size+n.slice.size==0?o.empty:new o(this.slice.content.append(n.slice.content),this.slice.openStart,n.slice.openEnd);return new e(this.from,this.to+(n.to-n.from),i,this.structure)},e.prototype.toJSON=function t(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},e.fromJSON=function t(n,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(r.from,r.to,o.fromJSON(n,r.slice),!!r.structure)},e}(b);b.jsonID("replace",k);var S=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function t(e){if(this.structure&&(O(e,this.from,this.gapFrom)||O(e,this.gapTo,this.to)))return x.fail("Structure gap-replace would overwrite content");var n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return x.fail("Gap is not a flat range");var r=this.slice.insertAt(this.insert,n.content);return r?x.fromReplace(e,this.from,this.to,r):x.fail("Content does not fit in gap")},e.prototype.getMap=function t(){return new h([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function t(n){var r=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,n.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function t(n){var r=n.mapResult(this.from,1),o=n.mapResult(this.to,-1),i=n.map(this.gapFrom,-1),s=n.map(this.gapTo,1);return r.deleted&&o.deleted||i<r.pos||s>o.pos?null:new e(r.pos,o.pos,i,s,this.slice,this.insert,this.structure)},e.prototype.toJSON=function t(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},e.fromJSON=function t(n,r){if("number"!=typeof r.from||"number"!=typeof r.to||"number"!=typeof r.gapFrom||"number"!=typeof r.gapTo||"number"!=typeof r.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(r.from,r.to,r.gapFrom,r.gapTo,o.fromJSON(n,r.slice),r.insert,!!r.structure)},e}(b);function O(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function C(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function M(t){for(var e,n=t.parent.content.cutByIndex(t.startIndex,t.endIndex),r=t.depth;;--r){var o=t.$from.node(r),i=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(i,s,n))return r;if(0==r||o.type.spec.isolating||!C(o,i,s))break}}function T(t,e,n,r){void 0===r&&(r=t);var o=D(t,e),i=o&&E(r,e);return i?o.map(N).concat({type:e,attrs:n}).concat(i.map(N)):null}function N(t){return{type:t,attrs:null}}function D(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}function E(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;for(var a,c=(s.length?s[s.length-1]:e).contentMatch,p=r;c&&p<o;p++)c=c.matchType(n.child(p).type);return c&&c.validEnd?s:null}function A(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function j(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=n-2;a>i;a--,c--){var p=o.node(a),l=o.index(a);if(p.type.spec.isolating)return!1;var f=p.content.cutByIndex(l,p.childCount),u=r&&r[c]||p;if(u!=p&&(f=f.replaceChild(0,u.type.create(u.attrs))),!p.canReplace(l+1,p.childCount)||!u.type.validContent(f))return!1}var h=o.indexAfter(i),d=r&&r[0];return o.node(i).canReplaceWith(h,h,d?d.type:o.node(i+1).type)}function R(t,e){var n=t.resolve(e),r=n.index();return I(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function I(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function P(t,e,n){void 0===n&&(n=-1);for(var r=t.resolve(e),o=r.depth;;o--){var i=void 0,s=void 0;if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),s=r.node(o).maybeChild(r.index(o)+1)):(i=r.node(o).maybeChild(r.index(o)-1),s=r.node(o+1)),i&&!i.isTextblock&&I(i,s))return e;if(0==o)break;e=n<0?r.before(o):r.after(o)}}function z(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function B(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,p=r.index(a)+(c>0?1:0);if(1==s?r.node(a).canReplace(p,p,o):r.node(a).contentMatchAt(p).findWrapping(o.firstChild.type))return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function _(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var s=t.child(o);s.content.size&&(s=s.copy(_(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return i.fromArray(r)}b.jsonID("replaceAround",S),v.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,s=t.depth,a=n.before(s+1),c=r.after(s+1),p=a,l=c,f=i.empty,u=0,h=s,d=!1;h>e;h--)d||n.index(h)>0?(d=!0,f=i.from(n.node(h).copy(f)),u++):p--;for(var m=i.empty,v=0,g=s,y=!1;g>e;g--)y||r.after(g+1)<r.end(g)?(y=!0,m=i.from(r.node(g).copy(m)),v++):l++;return this.step(new S(p,l,a,c,new o(f.append(m),u,v),f.size-u,!0))},v.prototype.wrap=function(t,e){for(var n=i.empty,r=e.length-1;r>=0;r--)n=i.from(e[r].type.create(e[r].attrs,n));var s=t.start,a=t.end;return this.step(new S(s,a,s,a,new o(n,0,0),e.length,!0))},v.prototype.setBlockType=function(t,e,n,r){var s=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var a=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&A(s.doc,s.mapping.slice(a).map(e),n)){s.clearIncompatible(s.mapping.slice(a).map(e,1),n);var c=s.mapping.slice(a),p=c.map(e,1),l=c.map(e+t.nodeSize,1);return s.step(new S(p,l,p+1,l-1,new o(i.from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},v.prototype.setNodeMarkup=function(t,e,n,r){var s=this.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");e||(e=s.type);var a=e.create(n,null,r||s.marks);if(s.isLeaf)return this.replaceWith(t,t+s.nodeSize,a);if(!e.validContent(s.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new S(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new o(i.from(a),0,0),1,!0))},v.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),s=i.empty,a=i.empty,c=r.depth,p=r.depth-e,l=e-1;c>p;c--,l--){s=i.from(r.node(c).copy(s));var f=n&&n[l];a=i.from(f?f.type.create(f.attrs,a):r.node(c).copy(a))}return this.step(new k(t,t,new o(s.append(a),e,e),!0))},v.prototype.join=function(t,e){void 0===e&&(e=1);var n=new k(t-e,t+e,o.empty,!0);return this.step(n)};var V=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function t(e){var n=this,r=e.slice(this.from,this.to),i=e.resolve(this.from),s=i.node(i.sharedDepth(this.to)),a=new o(_(r.content,(function(t,e){return e.type.allowsMarkType(n.mark.type)?t.mark(n.mark.addToSet(t.marks)):t}),s),r.openStart,r.openEnd);return x.fromReplace(e,this.from,this.to,a)},e.prototype.invert=function t(){return new $(this.from,this.to,this.mark)},e.prototype.map=function t(n){var r=n.mapResult(this.from,1),o=n.mapResult(this.to,-1);return r.deleted&&o.deleted||r.pos>=o.pos?null:new e(r.pos,o.pos,this.mark)},e.prototype.merge=function t(n){if(n instanceof e&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from)return new e(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark)},e.prototype.toJSON=function t(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function t(n,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(r.from,r.to,n.markFromJSON(r.mark))},e}(b);b.jsonID("addMark",V);var $=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function t(e){var n=this,r=e.slice(this.from,this.to),i=new o(_(r.content,(function(t){return t.mark(n.mark.removeFromSet(t.marks))})),r.openStart,r.openEnd);return x.fromReplace(e,this.from,this.to,i)},e.prototype.invert=function t(){return new V(this.from,this.to,this.mark)},e.prototype.map=function t(n){var r=n.mapResult(this.from,1),o=n.mapResult(this.to,-1);return r.deleted&&o.deleted||r.pos>=o.pos?null:new e(r.pos,o.pos,this.mark)},e.prototype.merge=function t(n){if(n instanceof e&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from)return new e(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark)},e.prototype.toJSON=function t(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function t(n,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(r.from,r.to,n.markFromJSON(r.mark))},e}(b);function F(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=o.empty),e==n&&!r.size)return null;var i=t.resolve(e),s=t.resolve(n);if(G(i,s,r))return new k(e,n,r);var a,c=J(i,Q(i,r)),p=U(i,s,c);if(!p)return null;if(c.size!=p.size&&X(i,s,c)){for(var l=s.depth,f=s.after(l);l>1&&f==s.end(--l);)++f;var u=U(i,t.resolve(f),c);if(u)return new S(e,f,n,s.end(),u,c.size)}return p.size||e!=n?new k(e,n,p):null}function L(t,e,n,r){var o=i.empty,s=0,a=n[e];if(t.depth>e){var c=L(t,e+1,n,r||a);s=c.openEnd+1,o=i.from(t.node(e+1).copy(c.content))}return a&&(o=o.append(a.content),s=a.openEnd),r&&(o=o.append(t.node(e).contentMatchAt(t.indexAfter(e)).fillBefore(i.empty,!0)),s=0),{content:o,openEnd:s}}function J(t,e){var n=L(t,0,e,!1),r=n.content,i=n.openEnd;return new o(r,t.depth,i||0)}function q(t,e,n,r,o,i,s){var a,c=t.childCount,p=c-(s>0?1:0),l=i<0?e:n.node(o);a=i<0?l.contentMatchAt(p):1==c&&s>0?l.contentMatchAt(i?n.index(o):n.indexAfter(o)):l.contentMatchAt(n.indexAfter(o)).matchFragment(t,c>0&&i?1:0,p);var f=r.node(o);if(s>0&&o<r.depth){var u=f.content.cutByIndex(r.indexAfter(o)).addToStart(t.lastChild),h=a.fillBefore(u,!0);if(h&&h.size&&i>0&&1==c&&(h=null),h){var d=q(t.lastChild.content,t.lastChild,n,r,o+1,1==c?i-1:-1,s-1);if(d){var m=t.lastChild.copy(d);return h.size?t.cutByIndex(0,c-1).append(h).addToEnd(m):t.replaceChild(c-1,m)}}}s>0&&(a=a.matchType((1==c&&i>0?n.node(o+1):t.lastChild).type));var v=r.index(o);if(v==f.childCount&&!f.type.compatibleContent(e.type))return null;for(var g=a.fillBefore(f.content,!0,v),y=v;g&&y<f.content.childCount;y++)l.type.allowsMarks(f.content.child(y).marks)||(g=null);if(!g)return null;if(s>0){var w=W(t.lastChild,s-1,n,o+1,1==c?i-1:-1);t=t.replaceChild(c-1,w)}return t=t.append(g),r.depth>o&&(t=t.addToEnd(K(r,o+1))),t}function W(t,e,n,r,o){var s,a=t.content,c=a.childCount;if(s=o>=0?n.node(r).contentMatchAt(n.indexAfter(r)).matchFragment(a,o>0?1:0,c):t.contentMatchAt(c),e>0){var p=W(a.lastChild,e-1,n,r+1,1==c?o-1:-1);a=a.replaceChild(c-1,p)}return t.copy(a.append(s.fillBefore(i.empty,!0)))}function K(t,e){var n=t.node(e),r=n.contentMatchAt(0).fillBefore(n.content,!0,t.index(e));return t.depth>e&&(r=r.addToEnd(K(t,e+1))),n.copy(r)}function H(t,e,n){for(;e>0&&n>0&&1==t.childCount;)t=t.firstChild.content,e--,n--;return new o(t,e,n)}function U(t,e,n){var r=q(n.content,t.node(0),t,e,0,n.openStart,n.openEnd);return r?H(r,n.openStart,e.depth):null}function G(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}function X(t,e,n){if(!e.parent.isTextblock)return!1;var r=n.openEnd?Y(n.content,n.openEnd):t.node(t.depth-(n.openStart-n.openEnd)),o;if(!r.isTextblock)return!1;for(var i=e.index();i<e.parent.childCount;i++)if(!r.type.allowsMarks(e.parent.child(i).marks))return!1;return n.openEnd?o=r.contentMatchAt(r.childCount):(o=r.contentMatchAt(r.childCount),n.size&&(o=o.matchFragment(n.content,n.openStart?1:0))),(o=o.matchFragment(e.parent.content,e.index()))&&o.validEnd}function Y(t,e){for(var n=1;n<e;n++)t=t.lastChild.content;return t.lastChild}function Q(t,e){for(var n=new Z(t),r=1;e.size&&r<=3;r++){var o=n.placeSlice(e.content,e.openStart,e.openEnd,r);3==r&&o!=e&&o.size&&(r=0),e=o}for(;n.open.length;)n.closeNode();return n.placed}b.jsonID("removeMark",$),v.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,p){if(r.isInline){var l=r.marks;if(!n.isInSet(l)&&p.type.allowsMarkType(n.type)){for(var f=Math.max(c,t),u=Math.min(c+r.nodeSize,e),h=n.addToSet(l),d=0;d<l.length;d++)l[d].isInSet(h)||(s&&s.to==f&&s.mark.eq(l[d])?s.to=u:o.push(s=new $(f,u,l[d])));a&&a.to==f?a.to=u:i.push(a=new V(f,u,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},v.prototype.removeMark=function(t,e,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(t,e,(function(r,a){if(r.isInline){i++;var c=null;if(n instanceof s){var p=n.isInSet(r.marks);p&&(c=[p])}else n?n.isInSet(r.marks)&&(c=[n]):c=r.marks;if(c&&c.length)for(var l=Math.min(a+r.nodeSize,e),f=0;f<c.length;f++){for(var u=c[f],h=void 0,d=0;d<o.length;d++){var m=o[d];m.step==i-1&&u.eq(o[d].style)&&(h=m)}h?(h.to=l,h.step=i):o.push({style:u,from:Math.max(a,t),to:l,step:i})}}})),o.forEach((function(t){return r.step(new $(t.from,t.to,t.style))})),this},v.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),s=[],a=t+1,c=0;c<r.childCount;c++){var p=r.child(c),l=a+p.nodeSize,f=n.matchType(p.type,p.attrs);if(f){n=f;for(var u=0;u<p.marks.length;u++)e.allowsMarkType(p.marks[u].type)||this.step(new $(a,l,p.marks[u]))}else s.push(new k(a,l,o.empty));a=l}if(!n.validEnd){var h=n.fillBefore(i.empty,!0);this.replace(a,a,new o(h,0,0))}for(var d=s.length-1;d>=0;d--)this.step(s[d]);return this},v.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=o.empty);var r=F(this.doc,t,e,n);return r&&this.step(r),this},v.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new o(i.from(n),0,0))},v.prototype.delete=function(t,e){return this.replace(t,e,o.empty)},v.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var Z=function t(e){this.open=[];for(var n=0;n<=e.depth;n++){var r=e.node(n),o=r.contentMatchAt(e.indexAfter(n));this.open.push({parent:r,match:o,content:i.empty,wrapper:!1,openEnd:0,depth:n})}this.placed=[]};function tt(t,e,n){var r=t.content;if(e>1){var o=tt(t.firstChild,e-1,1==t.childCount?n-1:0);r=t.content.replaceChild(0,o)}var i=t.type.contentMatch.fillBefore(r,0==n);return t.copy(i.append(r))}function et(t,e){var n=t.content;if(e>1){var r=et(t.lastChild,e-1);n=t.content.replaceChild(t.childCount-1,r)}var o=t.contentMatchAt(t.childCount).fillBefore(i.empty,!0);return t.copy(n.append(o))}function nt(t,e){return e?t.replaceChild(t.childCount-1,et(t.lastChild,e)):t}function rt(t,e,n,r,o){if(e<n){var s=t.firstChild;t=t.replaceChild(0,s.copy(rt(s.content,e+1,n,r,s)))}if(e>r){var a=o.contentMatchAt(0),c=a.fillBefore(t).append(t);t=c.append(a.matchFragment(c).fillBefore(i.empty,!0))}return t}function ot(t,e){for(var n=[],r,o=Math.min(t.depth,e.depth);o>=0;o--){var i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;i==e.start(o)&&n.push(o)}return n}Z.prototype.placeSlice=function t(e,n,r,s,a){if(n>0){var c=e.firstChild,p=this.placeSlice(c.content,Math.max(0,n-1),r&&1==e.childCount?r-1:0,s,c);p.content!=c.content&&(p.content.size?(e=e.replaceChild(0,c.copy(p.content)),n=p.openStart+1):(1==e.childCount&&(r=0),e=e.cutByIndex(1),n=0))}var l=this.placeContent(e,n,r,s,a);if(s>2&&l.size&&0==n){var f=l.content.firstChild,u=1==l.content.childCount;this.placeContent(f.content,0,r&&u?r-1:0,s,f),l=u?i.empty:new o(l.content.cutByIndex(1),0,r)}return l},Z.prototype.placeContent=function t(e,n,r,s,a){for(var c=0;c<e.childCount;c++){for(var p=e.child(c),l=!1,f=c==e.childCount-1,u=this.open.length-1;u>=0;u--){var h=this.open[u],d=void 0;if(s>1&&(d=h.match.findWrapping(p.type))&&(!a||!d.length||d[d.length-1]!=a.type)){for(;this.open.length-1>u;)this.closeNode();for(var m=0;m<d.length;m++)h.match=h.match.matchType(d[m]),u++,h={parent:d[m].create(),match:d[m].contentMatch,content:i.empty,wrapper:!0,openEnd:0,depth:u+m},this.open.push(h)}var v=h.match.matchType(p.type);if(!v){var g=h.match.fillBefore(i.from(p));if(!g){if(a&&h.match.matchType(a.type))break;continue}for(var y=0;y<g.childCount;y++){var w=g.child(y);this.addNode(h,w,0),v=h.match.matchFragment(w)}}for(;this.open.length-1>u;)this.closeNode();p=p.mark(h.parent.type.allowedMarks(p.marks)),n&&(p=tt(p,n,f?r:0),n=0),this.addNode(h,p,f?r:0),h.match=v,f&&(r=0),l=!0;break}if(!l)break}return this.open.length>1&&(c>0&&c==e.childCount||a&&this.open[this.open.length-1].parent.type==a.type)&&this.closeNode(),new o(e.cutByIndex(c),n,r)},Z.prototype.addNode=function t(e,n,r){e.content=nt(e.content,e.openEnd).addToEnd(n),e.openEnd=r},Z.prototype.closeNode=function t(){var e=this.open.pop();0==e.content.size||(e.wrapper?this.addNode(this.open[this.open.length-1],e.parent.copy(e.content),e.openEnd+1):this.placed[e.depth]={depth:e.depth,content:e.content,openEnd:e.openEnd})},v.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),i=this.doc.resolve(e);if(G(r,i,n))return this.step(new k(t,e,n));var s=ot(r,this.doc.resolve(e));0==s[s.length-1]&&s.pop();var a=-(r.depth+1);s.unshift(a);for(var c=r.depth,p=r.pos-1;c>0;c--,p--){var l=r.node(c).type.spec;if(l.defining||l.isolating)break;s.indexOf(c)>-1?a=c:r.before(c)==p&&s.splice(1,0,-c)}for(var f=s.indexOf(a),u=[],h=n.openStart,d=n.content,m=0;;m++){var v=d.firstChild;if(u.push(v),m==n.openStart)break;d=v.content}h>0&&u[h-1].type.spec.defining&&r.node(f).type!=u[h-1].type?h-=1:h>=2&&u[h-1].isTextblock&&u[h-2].type.spec.defining&&r.node(f).type!=u[h-2].type&&(h-=2);for(var g=n.openStart;g>=0;g--){var y=(g+h+1)%(n.openStart+1),w=u[y];if(w)for(var b=0;b<s.length;b++){var x=s[(b+f)%s.length],S=!0;x<0&&(S=!1,x=-x);var O=r.node(x-1),C=r.index(x-1);if(O.canReplaceWith(C,C,w.type,w.marks))return this.replace(r.before(x),S?i.after(x):e,new o(rt(n.content,0,n.openStart,y),y,n.openEnd))}}for(var M=this.steps.length,T=s.length-1;T>=0&&(this.replace(t,e,n),!(this.steps.length>M));T--){var N=s[T];T<0||(t=r.before(N),e=i.after(N))}return this},v.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=z(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new o(i.from(n),0,0))},v.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=ot(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)}}}},"prosemirror-model":{"package.json":function t(e,n,t){t.exports={name:"prosemirror-model",version:"1.9.1",module:"dist/index.es.js",main:"dist/index.js"}},dist:{"index.es.js":function t(e,n,t){let r;function o(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var i=t.child(r),s=e.child(r);if(i!=s){if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(var a=0;i.text[a]==s.text[a];a++)n++;return n}if(i.content.size||s.content.size){var c=o(i.content,s.content,n+1);if(null!=c)return c}n+=i.nodeSize}else n+=i.nodeSize}}function i(t,e,n,r){for(var o=t.childCount,s=e.childCount;;){if(0==o||0==s)return o==s?null:{a:n,b:r};var a=t.child(--o),c=e.child(--s),p=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:n,b:r};if(a.isText&&a.text!=c.text){for(var l=0,f=Math.min(a.text.length,c.text.length);l<f&&a.text[a.text.length-l-1]==c.text[c.text.length-l-1];)l++,n--,r--;return{a:n,b:r}}if(a.content.size||c.content.size){var u=i(a.content,c.content,n-1,r-1);if(u)return u}n-=p,r-=p}else n-=p,r-=p}}t.export({ContentMatch:()=>V,DOMParser:()=>ft,DOMSerializer:()=>Tt,Fragment:()=>s,Mark:()=>f,MarkType:()=>ct,Node:()=>P,NodeRange:()=>j,NodeType:()=>ot,ReplaceError:()=>u,ResolvedPos:()=>T,Schema:()=>pt,Slice:()=>h}),t.link("orderedmap",{default(t){r=t}},0);var s=function t(e,n){if(this.content=e,this.size=n||0,null==n)for(var r=0;r<e.length;r++)this.size+=e[r].nodeSize},a={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};s.prototype.nodesBetween=function t(e,n,r,o,i){void 0===o&&(o=0);for(var s=0,a=0;a<n;s++){var c=this.content[s],p=a+c.nodeSize;if(p>e&&!1!==r(c,o+a,i,s)&&c.content.size){var l=a+1;c.nodesBetween(Math.max(0,e-l),Math.min(c.content.size,n-l),r,o+l)}a=p}},s.prototype.descendants=function t(e){this.nodesBetween(0,this.size,e)},s.prototype.textBetween=function t(e,n,r,o){var i="",s=!0;return this.nodesBetween(e,n,(function(t,a){t.isText?(i+=t.text.slice(Math.max(e,a)-a,n-a),s=!r):t.isLeaf&&o?(i+=o,s=!r):!s&&t.isBlock&&(i+=r,s=!0)}),0),i},s.prototype.append=function t(e){if(!e.size)return this;if(!this.size)return e;var n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new s(o,this.size+e.size)},s.prototype.cut=function t(e,n){if(null==n&&(n=this.size),0==e&&n==this.size)return this;var r=[],o=0;if(n>e)for(var i=0,a=0;a<n;i++){var c=this.content[i],p=a+c.nodeSize;p>e&&((a<e||p>n)&&(c=c.isText?c.cut(Math.max(0,e-a),Math.min(c.text.length,n-a)):c.cut(Math.max(0,e-a-1),Math.min(c.content.size,n-a-1))),r.push(c),o+=c.nodeSize),a=p}return new s(r,o)},s.prototype.cutByIndex=function t(e,n){return e==n?s.empty:0==e&&n==this.content.length?this:new s(this.content.slice(e,n))},s.prototype.replaceChild=function t(e,n){var r=this.content[e];if(r==n)return this;var o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new s(o,i)},s.prototype.addToStart=function t(e){return new s([e].concat(this.content),this.size+e.nodeSize)},s.prototype.addToEnd=function t(e){return new s(this.content.concat(e),this.size+e.nodeSize)},s.prototype.eq=function t(e){if(this.content.length!=e.content.length)return!1;for(var n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0},a.firstChild.get=function(){return this.content.length?this.content[0]:null},a.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},a.childCount.get=function(){return this.content.length},s.prototype.child=function t(e){var n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n},s.prototype.maybeChild=function t(e){return this.content[e]},s.prototype.forEach=function t(e){for(var n=0,r=0;n<this.content.length;n++){var o=this.content[n];e(o,r,n),r+=o.nodeSize}},s.prototype.findDiffStart=function t(e,n){return void 0===n&&(n=0),o(this,e,n)},s.prototype.findDiffEnd=function t(e,n,r){return void 0===n&&(n=this.size),void 0===r&&(r=e.size),i(this,e,n,r)},s.prototype.findIndex=function t(e,n){if(void 0===n&&(n=-1),0==e)return p(0,e);if(e==this.size)return p(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var r=0,o=0;;r++){var i,s=o+this.child(r).nodeSize;if(s>=e)return s==e||n>0?p(r+1,s):p(r,o);o=s}},s.prototype.toString=function t(){return"<"+this.toStringInner()+">"},s.prototype.toStringInner=function t(){return this.content.join(", ")},s.prototype.toJSON=function t(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},s.fromJSON=function t(e,n){if(!n)return s.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new s(n.map(e.nodeFromJSON))},s.fromArray=function t(e){if(!e.length)return s.empty;for(var n,r=0,o=0;o<e.length;o++){var i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new s(n||e,r)},s.from=function t(e){if(!e)return s.empty;if(e instanceof s)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new s([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(s.prototype,a);var c={index:0,offset:0};function p(t,e){return c.index=t,c.offset=e,c}function l(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!l(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e&&l(t[o],e[o])))return!1;for(var i in e)if(!(i in t))return!1}return!0}s.empty=new s([],0);var f=function t(e,n){this.type=e,this.attrs=n};function u(t){var e=Error.call(this,t);return e.__proto__=u.prototype,e}f.prototype.addToSet=function t(e){for(var n,r=!1,o=0;o<e.length;o++){var i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n},f.prototype.removeFromSet=function t(e){for(var n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e},f.prototype.isInSet=function t(e){for(var n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1},f.prototype.eq=function t(e){return this==e||this.type==e.type&&l(this.attrs,e.attrs)},f.prototype.toJSON=function t(){var e={type:this.type.name};for(var n in this.attrs){e.attrs=this.attrs;break}return e},f.fromJSON=function t(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");var r=e.marks[n.type];if(!r)throw new RangeError("There is no mark type "+n.type+" in this schema");return r.create(n.attrs)},f.sameSet=function t(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(var r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0},f.setFrom=function t(e){if(!e||0==e.length)return f.none;if(e instanceof f)return[e];var n=e.slice();return n.sort((function(t,e){return t.type.rank-e.type.rank})),n},f.none=[],u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u.prototype.name="ReplaceError";var h=function t(e,n,r){this.content=e,this.openStart=n,this.openEnd=r},d={size:{configurable:!0}};function m(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,p=a.offset;if(i==e||s.isText){if(p!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(m(s.content,e-i-1,n-i-1)))}function v(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=v(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function g(t,e,n){if(n.openStart>t.depth)throw new u("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new u("Inconsistent open depths");return y(t,e,n,0)}function y(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=y(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=M(n,t),c,p;return S(i,O(t,a.start,a.end,e,r))}var l=t.parent,f=l.content;return S(l,f.cut(0,t.parentOffset).append(n.content).append(f.cut(e.parentOffset)))}return S(i,C(t,e,r))}function w(t,e){if(!e.type.compatibleContent(t.type))throw new u("Cannot join "+e.type.name+" onto "+t.type.name)}function b(t,e,n){var r=t.node(n);return w(r,e.node(n)),r}function x(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function k(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(x(t.nodeAfter,r),i++));for(var a=i;a<s;a++)x(o.child(a),r);e&&e.depth==n&&e.textOffset&&x(e.nodeBefore,r)}function S(t,e){if(!t.type.validContent(e))throw new u("Invalid content for node "+t.type.name);return t.copy(e)}function O(t,e,n,r,o){var i=t.depth>o&&b(t,e,o+1),a=r.depth>o&&b(n,r,o+1),c=[];return k(null,t,o,c),i&&a&&e.index(o)==n.index(o)?(w(i,a),x(S(i,O(t,e,n,r,o+1)),c)):(i&&x(S(i,C(t,e,o+1)),c),k(e,n,o,c),a&&x(S(a,C(n,r,o+1)),c)),k(r,null,o,c),new s(c)}function C(t,e,n){var r=[],o;(k(null,t,n,r),t.depth>n)&&x(S(b(t,e,n+1),C(t,e,n+1)),r);return k(e,null,n,r),new s(r)}function M(t,e){for(var n=e.depth-t.openStart,r,o=e.node(n).copy(t.content),i=n-1;i>=0;i--)o=e.node(i).copy(s.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}d.size.get=function(){return this.content.size-this.openStart-this.openEnd},h.prototype.insertAt=function t(e,n){var r=v(this.content,e+this.openStart,n,null);return r&&new h(r,this.openStart,this.openEnd)},h.prototype.removeBetween=function t(e,n){return new h(m(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)},h.prototype.eq=function t(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},h.prototype.toString=function t(){return this.content+"("+this.openStart+","+this.openEnd+")"},h.prototype.toJSON=function t(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},h.fromJSON=function t(e,n){if(!n)return h.empty;var r=n.openStart||0,o=n.openEnd||0;if("number"!=typeof r||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new h(s.fromJSON(e,n.content),n.openStart||0,n.openEnd||0)},h.maxOpen=function t(e,n){void 0===n&&(n=!0);for(var r=0,o=0,i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(var s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new h(e,r,o)},Object.defineProperties(h.prototype,d),h.empty=new h(s.empty,0,0);var T=function t(e,n,r){this.pos=e,this.path=n,this.depth=n.length/3-1,this.parentOffset=r},N={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};T.prototype.resolveDepth=function t(e){return null==e?this.depth:e<0?this.depth+e:e},N.parent.get=function(){return this.node(this.depth)},N.doc.get=function(){return this.node(0)},T.prototype.node=function t(e){return this.path[3*this.resolveDepth(e)]},T.prototype.index=function t(e){return this.path[3*this.resolveDepth(e)+1]},T.prototype.indexAfter=function t(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},T.prototype.start=function t(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},T.prototype.end=function t(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},T.prototype.before=function t(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},T.prototype.after=function t(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},N.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},N.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},N.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},T.prototype.marks=function t(){var e=this.parent,n=this.index();if(0==e.content.size)return f.none;if(this.textOffset)return e.child(n).marks;var r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){var i=r;r=o,o=i}for(var t=r.marks,s=0;s<t.length;s++)!1!==t[s].type.spec.inclusive||o&&t[s].isInSet(o.marks)||(t=t[s--].removeFromSet(t));return t},T.prototype.marksAcross=function t(e){var n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;for(var r=n.marks,o=e.parent.maybeChild(e.index()),i=0;i<r.length;i++)!1!==r[i].type.spec.inclusive||o&&r[i].isInSet(o.marks)||(r=r[i--].removeFromSet(r));return r},T.prototype.sharedDepth=function t(e){for(var n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0},T.prototype.blockRange=function t(e,n){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new j(this,e,r)},T.prototype.sameParent=function t(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},T.prototype.max=function t(e){return e.pos>this.pos?e:this},T.prototype.min=function t(e){return e.pos<this.pos?e:this},T.prototype.toString=function t(){for(var e="",n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset},T.resolve=function t(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],o=0,i=n,s=e;;){var a=s.content.findIndex(i),c=a.index,p=a.offset,l=i-p;if(r.push(s,c,o+p),!l)break;if((s=s.child(c)).isText)break;i=l-1,o+=p+1}return new T(n,r,i)},T.resolveCached=function t(e,n){for(var r=0;r<D.length;r++){var o=D[r];if(o.pos==n&&o.doc==e)return o}var i=D[E]=T.resolve(e,n);return E=(E+1)%A,i},Object.defineProperties(T.prototype,N);var D=[],E=0,A=12,j=function t(e,n,r){this.$from=e,this.$to=n,this.depth=r},R={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};R.start.get=function(){return this.$from.before(this.depth+1)},R.end.get=function(){return this.$to.after(this.depth+1)},R.parent.get=function(){return this.$from.node(this.depth)},R.startIndex.get=function(){return this.$from.index(this.depth)},R.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(j.prototype,R);var I=Object.create(null),P=function t(e,n,r,o){this.type=e,this.attrs=n,this.content=r||s.empty,this.marks=o||f.none},z={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};z.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},z.childCount.get=function(){return this.content.childCount},P.prototype.child=function t(e){return this.content.child(e)},P.prototype.maybeChild=function t(e){return this.content.maybeChild(e)},P.prototype.forEach=function t(e){this.content.forEach(e)},P.prototype.nodesBetween=function t(e,n,r,o){void 0===o&&(o=0),this.content.nodesBetween(e,n,r,o,this)},P.prototype.descendants=function t(e){this.nodesBetween(0,this.content.size,e)},z.textContent.get=function(){return this.textBetween(0,this.content.size,"")},P.prototype.textBetween=function t(e,n,r,o){return this.content.textBetween(e,n,r,o)},z.firstChild.get=function(){return this.content.firstChild},z.lastChild.get=function(){return this.content.lastChild},P.prototype.eq=function t(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},P.prototype.sameMarkup=function t(e){return this.hasMarkup(e.type,e.attrs,e.marks)},P.prototype.hasMarkup=function t(e,n,r){return this.type==e&&l(this.attrs,n||e.defaultAttrs||I)&&f.sameSet(this.marks,r||f.none)},P.prototype.copy=function t(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},P.prototype.mark=function t(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},P.prototype.cut=function t(e,n){return 0==e&&n==this.content.size?this:this.copy(this.content.cut(e,n))},P.prototype.slice=function t(e,n,r){if(void 0===n&&(n=this.content.size),void 0===r&&(r=!1),e==n)return h.empty;var o=this.resolve(e),i=this.resolve(n),s=r?0:o.sharedDepth(n),a=o.start(s),c,p=o.node(s).content.cut(o.pos-a,i.pos-a);return new h(p,o.depth-s,i.depth-s)},P.prototype.replace=function t(e,n,r){return g(this.resolve(e),this.resolve(n),r)},P.prototype.nodeAt=function t(e){for(var n=this;;){var r=n.content.findIndex(e),o=r.index,i=r.offset;if(!(n=n.maybeChild(o)))return null;if(i==e||n.isText)return n;e-=i+1}},P.prototype.childAfter=function t(e){var n=this.content.findIndex(e),r=n.index,o=n.offset;return{node:this.content.maybeChild(r),index:r,offset:o}},P.prototype.childBefore=function t(e){if(0==e)return{node:null,index:0,offset:0};var n=this.content.findIndex(e),r=n.index,o=n.offset;if(o<e)return{node:this.content.child(r),index:r,offset:o};var i=this.content.child(r-1);return{node:i,index:r-1,offset:o-i.nodeSize}},P.prototype.resolve=function t(e){return T.resolveCached(this,e)},P.prototype.resolveNoCache=function t(e){return T.resolve(this,e)},P.prototype.rangeHasMark=function t(e,n,r){var o=!1;return n>e&&this.nodesBetween(e,n,(function(t){return r.isInSet(t.marks)&&(o=!0),!o})),o},z.isBlock.get=function(){return this.type.isBlock},z.isTextblock.get=function(){return this.type.isTextblock},z.inlineContent.get=function(){return this.type.inlineContent},z.isInline.get=function(){return this.type.isInline},z.isText.get=function(){return this.type.isText},z.isLeaf.get=function(){return this.type.isLeaf},z.isAtom.get=function(){return this.type.isAtom},P.prototype.toString=function t(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),_(this.marks,e)},P.prototype.contentMatchAt=function t(e){var n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n},P.prototype.canReplace=function t(e,n,r,o,i){void 0===r&&(r=s.empty),void 0===o&&(o=0),void 0===i&&(i=r.childCount);var a=this.contentMatchAt(e).matchFragment(r,o,i),c=a&&a.matchFragment(this.content,n);if(!c||!c.validEnd)return!1;for(var p=o;p<i;p++)if(!this.type.allowsMarks(r.child(p).marks))return!1;return!0},P.prototype.canReplaceWith=function t(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;var i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,n);return!!s&&s.validEnd},P.prototype.canAppend=function t(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},P.prototype.check=function t(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(t){return t.check()}))},P.prototype.toJSON=function t(){var e={type:this.type.name};for(var n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(t){return t.toJSON()}))),e},P.fromJSON=function t(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");var r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if("text"==n.type){if("string"!=typeof n.text)throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}var o=s.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,o,r)},Object.defineProperties(P.prototype,z);var B=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function t(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):_(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function t(e,n){return this.text.slice(e,n)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function t(n){return n==this.marks?this:new e(this.type,this.attrs,this.text,n)},e.prototype.withText=function t(n){return n==this.text?this:new e(this.type,this.attrs,n,this.marks)},e.prototype.cut=function t(e,n){return void 0===e&&(e=0),void 0===n&&(n=this.text.length),0==e&&n==this.text.length?this:this.withText(this.text.slice(e,n))},e.prototype.eq=function t(e){return this.sameMarkup(e)&&this.text==e.text},e.prototype.toJSON=function e(){var n=t.prototype.toJSON.call(this);return n.text=this.text,n},Object.defineProperties(e.prototype,n),e}(P);function _(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var V=function t(e){this.validEnd=e,this.next=[],this.wrapCache=[]},$={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};V.parse=function t(e,n){var r=new F(e,n);if(null==r.next)return V.empty;var o=J(r);r.next&&r.err("Unexpected trailing text");var i=Z(X(o));return tt(i,r),i},V.prototype.matchType=function t(e){for(var n=0;n<this.next.length;n+=2)if(this.next[n]==e)return this.next[n+1];return null},V.prototype.matchFragment=function t(e,n,r){void 0===n&&(n=0),void 0===r&&(r=e.childCount);for(var o=this,i=n;o&&i<r;i++)o=o.matchType(e.child(i).type);return o},$.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},$.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},V.prototype.compatible=function t(e){for(var n=0;n<this.next.length;n+=2)for(var r=0;r<e.next.length;r+=2)if(this.next[n]==e.next[r])return!0;return!1},V.prototype.fillBefore=function t(e,n,r){void 0===n&&(n=!1),void 0===r&&(r=0);var o=[this];function i(t,a){var c=t.matchFragment(e,r);if(c&&(!n||c.validEnd))return s.from(a.map((function(t){return t.createAndFill()})));for(var p=0;p<t.next.length;p+=2){var l=t.next[p],f=t.next[p+1];if(!l.isText&&!l.hasRequiredAttrs()&&-1==o.indexOf(f)){o.push(f);var u=i(f,a.concat(l));if(u)return u}}}return i(this,[])},V.prototype.findWrapping=function t(e){for(var n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];var r=this.computeWrapping(e);return this.wrapCache.push(e,r),r},V.prototype.computeWrapping=function t(e){for(var n=Object.create(null),r=[{match:this,type:null,via:null}];r.length;){var o=r.shift(),i=o.match;if(i.matchType(e)){for(var s=[],a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(var c=0;c<i.next.length;c+=2){var p=i.next[c];p.isLeaf||p.hasRequiredAttrs()||p.name in n||o.type&&!i.next[c+1].validEnd||(r.push({match:p.contentMatch,type:p,via:o}),n[p.name]=!0)}}},$.edgeCount.get=function(){return this.next.length>>1},V.prototype.edge=function t(e){var n=e<<1;if(n>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[n],next:this.next[n+1]}},V.prototype.toString=function t(){var e=[];function n(t){e.push(t);for(var r=1;r<t.next.length;r+=2)-1==e.indexOf(t.next[r])&&n(t.next[r])}return n(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o+=2)r+=(o?", ":"")+t.next[o].name+"->"+e.indexOf(t.next[o+1]);return r})).join("\n")},Object.defineProperties(V.prototype,$),V.empty=new V(!0);var F=function t(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},L={next:{configurable:!0}};function J(t){var e=[];do{e.push(q(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function q(t){var e=[];do{e.push(W(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function W(t){for(var e=G(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=H(t,e)}return e}function K(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function H(t,e){var n=K(t),r=n;return t.eat(",")&&(r="}"!=t.next?K(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function U(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}return 0==o.length&&t.err("No node type or group '"+e+"' found"),o}function G(t){if(t.eat("(")){var e=J(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=U(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function X(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var p=n();return o(i(t.expr,e),p),o(i(t.expr,p),p),[r(p)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var l=e,f=0;f<t.min;f++){var u=n();o(i(t.expr,l),u),l=u}if(-1==t.max)o(i(t.expr,l),l);else for(var h=t.min;h<t.max;h++){var d=n();r(l,d),o(i(t.expr,l),d),l=d}return[r(l)]}if("name"==t.type)return[r(e,null,t.value)]}}}function Y(t,e){return e-t}function Q(t,e){var n=[];return r(e),n.sort(Y);function r(e){var o=t[e];if(1==o.length&&!o[0].term)return r(o[0].to);n.push(e);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function Z(t){var e=Object.create(null);return n(Q(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];Q(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new V(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(Y);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}function tt(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],p=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(p)&&r.push(p)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position")}}function et(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function nt(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function rt(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new st(t[n]);return e}L.next.get=function(){return this.tokens[this.pos]},F.prototype.eat=function t(e){return this.next==e&&(this.pos++||!0)},F.prototype.err=function t(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(F.prototype,L);var ot=function t(e,n,r){this.name=e,this.schema=n,this.spec=r,this.groups=r.group?r.group.split(" "):[],this.attrs=rt(r.attrs),this.defaultAttrs=et(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==e),this.isText="text"==e},it={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};it.isInline.get=function(){return!this.isBlock},it.isTextblock.get=function(){return this.isBlock&&this.inlineContent},it.isLeaf.get=function(){return this.contentMatch==V.empty},it.isAtom.get=function(){return this.isLeaf||this.spec.atom},ot.prototype.hasRequiredAttrs=function t(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},ot.prototype.compatibleContent=function t(e){return this==e||this.contentMatch.compatible(e.contentMatch)},ot.prototype.computeAttrs=function t(e){return!e&&this.defaultAttrs?this.defaultAttrs:nt(this.attrs,e)},ot.prototype.create=function t(e,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new P(this,this.computeAttrs(e),s.from(n),f.setFrom(r))},ot.prototype.createChecked=function t(e,n,r){if(n=s.from(n),!this.validContent(n))throw new RangeError("Invalid content for node "+this.name);return new P(this,this.computeAttrs(e),n,f.setFrom(r))},ot.prototype.createAndFill=function t(e,n,r){if(e=this.computeAttrs(e),(n=s.from(n)).size){var o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}var i=this.contentMatch.matchFragment(n).fillBefore(s.empty,!0);return i?new P(this,e,n.append(i),f.setFrom(r)):null},ot.prototype.validContent=function t(e){var n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(var r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0},ot.prototype.allowsMarkType=function t(e){return null==this.markSet||this.markSet.indexOf(e)>-1},ot.prototype.allowsMarks=function t(e){if(null==this.markSet)return!0;for(var n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0},ot.prototype.allowedMarks=function t(e){if(null==this.markSet)return e;for(var n,r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:f.empty:e},ot.compile=function t(e,n){var r=Object.create(null);e.forEach((function(t,e){return r[t]=new ot(t,n,e)}));var o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r},Object.defineProperties(ot.prototype,it);var st=function t(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},at={isRequired:{configurable:!0}};at.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(st.prototype,at);var ct=function t(e,n,r,o){this.name=e,this.schema=r,this.spec=o,this.attrs=rt(o.attrs),this.rank=n,this.excluded=null;var i=et(this.attrs);this.instance=i&&new f(this,i)};ct.prototype.create=function t(e){return!e&&this.instance?this.instance:new f(this,nt(this.attrs,e))},ct.compile=function t(e,n){var r=Object.create(null),o=0;return e.forEach((function(t,e){return r[t]=new ct(t,o++,n,e)})),r},ct.prototype.removeFromSet=function t(e){for(var n=0;n<e.length;n++)if(e[n].type==this)return e.slice(0,n).concat(e.slice(n+1));return e},ct.prototype.isInSet=function t(e){for(var n=0;n<e.length;n++)if(e[n].type==this)return e[n]},ct.prototype.excludes=function t(e){return this.excluded.indexOf(e)>-1};var pt=function t(e){for(var n in this.spec={},e)this.spec[n]=e[n];this.spec.nodes=r.from(e.nodes),this.spec.marks=r.from(e.marks),this.nodes=ot.compile(this.spec.nodes,this),this.marks=ct.compile(this.spec.marks,this);var o=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var s=this.nodes[i],a=s.spec.content||"",c=s.spec.marks;s.contentMatch=o[a]||(o[a]=V.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet="_"==c?null:c?lt(this,c.split(" ")):""!=c&&s.inlineContent?null:[]}for(var p in this.marks){var l=this.marks[p],f=l.spec.excludes;l.excluded=null==f?[l]:""==f?[]:lt(this,f.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function lt(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}pt.prototype.node=function t(e,n,r,o){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof ot))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(n,r,o)},pt.prototype.text=function t(e,n){var r=this.nodes.text;return new B(r,r.defaultAttrs,e,f.setFrom(n))},pt.prototype.mark=function t(e,n){return"string"==typeof e&&(e=this.marks[e]),e.create(n)},pt.prototype.nodeFromJSON=function t(e){return P.fromJSON(this,e)},pt.prototype.markFromJSON=function t(e){return f.fromJSON(this,e)},pt.prototype.nodeType=function t(e){var n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n};var ft=function t(e,n){var r=this;this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach((function(t){t.tag?r.tags.push(t):t.style&&r.styles.push(t)}))};ft.prototype.parse=function t(e,n){void 0===n&&(n={});var r=new bt(this,n,!1);return r.addAll(e,null,n.from,n.to),r.finish()},ft.prototype.parseSlice=function t(e,n){void 0===n&&(n={});var r=new bt(this,n,!0);return r.addAll(e,null,n.from,n.to),h.maxOpen(r.finish())},ft.prototype.matchTag=function t(e,n){for(var r=0;r<this.tags.length;r++){var o=this.tags[r];if(St(e,o.tag)&&(void 0===o.namespace||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},ft.prototype.matchStyle=function t(e,n,r){for(var o=0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(e)||i.context&&!r.matchesContext(i.context)||i.style.length>e.length&&(61!=i.style.charCodeAt(e.length)||i.style.slice(e.length+1)!=n))){if(i.getAttrs){var s=i.getAttrs(n);if(!1===s)continue;i.attrs=s}return i}}},ft.schemaRules=function t(e){var n=[];function r(t){for(var e=null==t.priority?50:t.priority,r=0;r<n.length;r++){var o=n[r],i;if((null==o.priority?50:o.priority)<e)break}n.splice(r,0,t)}var o=function(t){var n=e.marks[t].spec.parseDOM;n&&n.forEach((function(e){r(e=Ct(e)),e.mark=t}))};for(var i in e.marks)o(i);var s=function(t){var n=e.nodes[a].spec.parseDOM;n&&n.forEach((function(t){r(t=Ct(t)),t.node=a}))};for(var a in e.nodes)s();return n},ft.fromSchema=function t(e){return e.cached.domParser||(e.cached.domParser=new ft(e,ft.schemaRules(e)))};var ut={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ht={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},dt={ol:!0,ul:!0},mt=1,vt=2,gt=4;function yt(t){return(t?mt:0)|("full"===t?vt:0)}var wt=function t(e,n,r,o,i,s,a){this.type=e,this.attrs=n,this.solid=i,this.match=s||(4&a?null:e.contentMatch),this.options=a,this.content=[],this.marks=r,this.activeMarks=f.none,this.pendingMarks=o};wt.prototype.findWrapping=function t(e){if(!this.match){if(!this.type)return[];var n=this.type.contentMatch.fillBefore(s.from(e));if(!n){var r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}this.match=this.type.contentMatch.matchFragment(n)}return this.match.findWrapping(e.type)},wt.prototype.finish=function t(e){if(!(this.options&mt)){var n=this.content[this.content.length-1],r;n&&n.isText&&(r=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-r[0].length)))}var o=s.from(this.content);return!e&&this.match&&(o=o.append(this.match.fillBefore(s.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o},wt.prototype.applyPending=function t(e){for(var n=0,r=this.pendingMarks;n<r.length;n++){var o=r[n];(this.type?this.type.allowsMarkType(o.type):Mt(o.type,e))&&!o.isInSet(this.activeMarks)&&(this.activeMarks=o.addToSet(this.activeMarks),this.pendingMarks=o.removeFromSet(this.pendingMarks))}};var bt=function t(e,n,r){this.parser=e,this.options=n,this.isOpen=r;var o=n.topNode,i,s=yt(n.preserveWhitespace)|(r?4:0);i=o?new wt(o.type,o.attrs,f.none,f.none,!0,n.topMatch||o.type.contentMatch,s):new wt(r?null:e.schema.topNodeType,null,f.none,f.none,!0,null,s),this.nodes=[i],this.open=0,this.find=n.findPositions,this.needsBlock=!1},xt={top:{configurable:!0},currentPos:{configurable:!0}};function kt(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&dt.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function St(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Ot(t){for(var e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];n=e.exec(t);)r.push(n[1],n[2].trim());return r}function Ct(t){var e={};for(var n in t)e[n]=t[n];return e}function Mt(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[],s=function(t){i.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),o=r.type,a=r.next;if(o==e)return!0;if(i.indexOf(a)<0&&s(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}xt.top.get=function(){return this.nodes[this.open]},bt.prototype.addDOM=function t(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var n=e.getAttribute("style"),r=n?this.readStyles(Ot(n)):null,o=this.top;if(null!=r)for(var i=0;i<r.length;i++)this.addPendingMark(r[i]);if(this.addElement(e),null!=r)for(var s=0;s<r.length;s++)this.removePendingMark(r[s],o)}},bt.prototype.addTextNode=function t(e){var n=e.nodeValue,r=this.top;if((r.type?r.type.inlineContent:r.content.length&&r.content[0].isInline)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&mt)r.options&vt||(n=n.replace(/\r?\n|\r/g," "));else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){var o=r.content[r.content.length-1],i=e.previousSibling;(!o||i&&"BR"==i.nodeName||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)},bt.prototype.addElement=function t(e){var n=e.nodeName.toLowerCase();dt.hasOwnProperty(n)&&kt(e);var r=this.options.ruleFromNode&&this.options.ruleFromNode(e)||this.parser.matchTag(e,this);if(r?r.ignore:ht.hasOwnProperty(n))this.findInside(e);else if(!r||r.skip){r&&r.skip.nodeType&&(e=r.skip);var o,i=this.top,s=this.needsBlock;if(ut.hasOwnProperty(n))o=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),o&&this.sync(i),this.needsBlock=s}else this.addElementByRule(e,r)},bt.prototype.leafFallback=function t(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},bt.prototype.readStyles=function t(e){for(var n=f.none,r=0;r<e.length;r+=2){var o=this.parser.matchStyle(e[r],e[r+1],this);if(o){if(o.ignore)return null;n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n)}}return n},bt.prototype.addElementByRule=function t(e,n){var r=this,o,i,s,a;n.node?(i=this.parser.schema.nodes[n.node]).isLeaf?this.insertNode(i.create(n.attrs))||this.leafFallback(e):o=this.enter(i,n.attrs,n.preserveWhitespace):(a=(s=this.parser.schema.marks[n.mark]).create(n.attrs),this.addPendingMark(a));var c=this.top;if(i&&i.isLeaf)this.findInside(e);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach((function(t){return r.insertNode(t)}));else{var p=n.contentElement;"string"==typeof p?p=e.querySelector(p):"function"==typeof p&&(p=p(e)),p||(p=e),this.findAround(e,p,!0),this.addAll(p,o)}o&&(this.sync(c),this.open--),a&&this.removePendingMark(a,c)},bt.prototype.addAll=function t(e,n,r,o){for(var i=r||0,s=r?e.childNodes[r]:e.firstChild,a=null==o?null:e.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s),n&&ut.hasOwnProperty(s.nodeName.toLowerCase())&&this.sync(n);this.findAtPoint(e,i)},bt.prototype.findPlace=function t(e){for(var n,r,o=this.open;o>=0;o--){var i=this.nodes[o],s=i.findWrapping(e);if(s&&(!n||n.length>s.length)&&(n=s,r=i,!s.length))break;if(i.solid)break}if(!n)return!1;this.sync(r);for(var a=0;a<n.length;a++)this.enterInner(n[a],null,!1);return!0},bt.prototype.insertNode=function t(e){if(e.isInline&&this.needsBlock&&!this.top.type){var n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();var r=this.top;r.applyPending(e.type),r.match&&(r.match=r.match.matchType(e.type));for(var o=r.activeMarks,i=0;i<e.marks.length;i++)r.type&&!r.type.allowsMarkType(e.marks[i].type)||(o=e.marks[i].addToSet(o));return r.content.push(e.mark(o)),!0}return!1},bt.prototype.enter=function t(e,n,r){var o=this.findPlace(e.create(n));return o&&this.enterInner(e,n,!0,r),o},bt.prototype.enterInner=function t(e,n,r,o){this.closeExtra();var i=this.top;i.applyPending(e),i.match=i.match&&i.match.matchType(e,n);var s=null==o?-5&i.options:yt(o);4&i.options&&0==i.content.length&&(s|=4),this.nodes.push(new wt(e,n,i.activeMarks,i.pendingMarks,r,null,s)),this.open++},bt.prototype.closeExtra=function t(e){var n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}},bt.prototype.finish=function t(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},bt.prototype.sync=function t(e){for(var n=this.open;n>=0;n--)if(this.nodes[n]==e)return void(this.open=n)},xt.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},bt.prototype.findAtPoint=function t(e,n){if(this.find)for(var r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)},bt.prototype.findInside=function t(e){if(this.find)for(var n=0;n<this.find.length;n++)null==this.find[n].pos&&1==e.nodeType&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)},bt.prototype.findAround=function t(e,n,r){if(e!=n&&this.find)for(var o=0;o<this.find.length;o++){var i;if(null==this.find[o].pos&&1==e.nodeType&&e.contains(this.find[o].node))n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}},bt.prototype.findInText=function t(e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))},bt.prototype.matchesContext=function t(e){var n=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var r=e.split("/"),o=this.options.context,i=!(this.isOpen||o&&o.parent.type!=this.nodes[0].type),s=-(o?o.depth+1:0)+(i?0:1),a=function(t,e){for(;t>=0;t--){var c=r[t];if(""==c){if(t==r.length-1||0==t)continue;for(;e>=s;e--)if(a(t-1,e))return!0;return!1}var p=e>0||0==e&&i?n.nodes[e].type:o&&e>=s?o.node(e-s).type:null;if(!p||p.name!=c&&-1==p.groups.indexOf(c))return!1;e--}return!0};return a(r.length-1,this.open)},bt.prototype.textblockFromContext=function t(){var e=this.options.context;if(e)for(var n=e.depth;n>=0;n--){var r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(var o in this.parser.schema.nodes){var i=this.parser.schema.nodes[o];if(i.isTextblock&&i.defaultAttrs)return i}},bt.prototype.addPendingMark=function t(e){this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},bt.prototype.removePendingMark=function t(e,n){for(var r=this.open;r>=0;r--){var o=this.nodes[r],i;if(o.pendingMarks.lastIndexOf(e)>-1?o.pendingMarks=e.removeFromSet(o.pendingMarks):o.activeMarks=e.removeFromSet(o.activeMarks),o==n)break}},Object.defineProperties(bt.prototype,xt);var Tt=function t(e,n){this.nodes=e||{},this.marks=n||{}};function Nt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Dt(t){return t.document||window.document}Tt.prototype.serializeFragment=function t(e,n,r){var o=this;void 0===n&&(n={}),r||(r=Dt(n).createDocumentFragment());var i=r,s=null;return e.forEach((function(t){if(s||t.marks.length){s||(s=[]);for(var e=0,r=0;e<s.length&&r<t.marks.length;){var a=t.marks[r];if(o.marks[a.type.name]){if(!a.eq(s[e])||!1===a.type.spec.spanning)break;e+=2,r++}else r++}for(;e<s.length;)i=s.pop(),s.pop();for(;r<t.marks.length;){var c=t.marks[r++],p=o.serializeMark(c,t.isInline,n);p&&(s.push(c,i),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(o.serializeNode(t,n))})),r},Tt.prototype.serializeNode=function t(e,n){void 0===n&&(n={});var r=Tt.renderSpec(Dt(n),this.nodes[e.type.name](e)),o=r.dom,i=r.contentDOM;if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");n.onContent?n.onContent(e,i,n):this.serializeFragment(e.content,n,i)}return o},Tt.prototype.serializeNodeAndMarks=function t(e,n){void 0===n&&(n={});for(var r=this.serializeNode(e,n),o=e.marks.length-1;o>=0;o--){var i=this.serializeMark(e.marks[o],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r},Tt.prototype.serializeMark=function t(e,n,r){void 0===r&&(r={});var o=this.marks[e.type.name];return o&&Tt.renderSpec(Dt(r),o(e,n))},Tt.renderSpec=function t(e,n,r){if(void 0===r&&(r=null),"string"==typeof n)return{dom:e.createTextNode(n)};if(null!=n.nodeType)return{dom:n};var o=n[0],i=o.indexOf(" ");i>0&&(r=o.slice(0,i),o=o.slice(i+1));var s=null,a=r?e.createElementNS(r,o):e.createElement(o),c=n[1],p=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c))for(var l in p=2,c)if(null!=c[l]){var f=l.indexOf(" ");f>0?a.setAttributeNS(l.slice(0,f),l.slice(f+1),c[l]):a.setAttribute(l,c[l])}for(var u=p;u<n.length;u++){var h=n[u];if(0===h){if(u<n.length-1||u>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}var d=Tt.renderSpec(e,h,r),m=d.dom,v=d.contentDOM;if(a.appendChild(m),v){if(s)throw new RangeError("Multiple content holes");s=v}}return{dom:a,contentDOM:s}},Tt.fromSchema=function t(e){return e.cached.domSerializer||(e.cached.domSerializer=new Tt(this.nodesFromSchema(e),this.marksFromSchema(e)))},Tt.nodesFromSchema=function t(e){var n=Nt(e.nodes);return n.text||(n.text=function(t){return t.text}),n},Tt.marksFromSchema=function t(e){return Nt(e.marks)}}}},orderedmap:{"package.json":function t(e,n,t){t.exports={name:"orderedmap",version:"1.1.1",module:"index.es.js",main:"index.js"}},"index.es.js":function t(e,n,t){function r(t){this.content=t}r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var o=n&&n!=t?this.remove(n):this,i=o.find(t),s=o.content.slice();return-1==i?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var o=this.remove(e),i=o.content.slice(),s=o.find(t);return i.splice(-1==s?i.length:s,0,e,n),new r(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=r.from(t)).size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=r.from(t)).size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};var o=r;t.exportDefault(o)}},"prosemirror-inputrules":{"package.json":function t(e,n,t){t.exports={name:"prosemirror-inputrules",version:"1.1.2",module:"dist/index.es.js",main:"dist/index.js"}},dist:{"index.es.js":function t(e,n,t){let r,o,i;t.export({InputRule:()=>s,closeDoubleQuote:()=>m,closeSingleQuote:()=>g,ellipsis:()=>h,emDash:()=>u,inputRules:()=>p,openDoubleQuote:()=>d,openSingleQuote:()=>v,smartQuotes:()=>y,textblockTypeInputRule:()=>b,undoInputRule:()=>f,wrappingInputRule:()=>w}),t.link("prosemirror-state",{Plugin(t){r=t}},0),t.link("prosemirror-transform",{findWrapping(t){o=t},canJoin(t){i=t}},1);var s=function t(e,n){this.match=e,this.handler="string"==typeof n?a(n):n};function a(t){return function(e,n,r,o){var i=t;if(n[1]){var s=n[0].lastIndexOf(n[1]);i+=n[0].slice(s+n[1].length);var a=(r+=s)-o;a>0&&(i=n[0].slice(s-a,s)+i,r=o)}return e.tr.insertText(i,r,o)}}var c=500;function p(t){var e=t.rules,n=new r({state:{init:function t(){return null},apply:function t(e,n){var r=e.getMeta(this);return r||(e.selectionSet||e.docChanged?null:n)}},props:{handleTextInput:function t(r,o,i,s){return l(r,o,i,s,e,n)},handleDOMEvents:{compositionend:function(t){setTimeout((function(){var r,o=t.state.selection.$cursor;o&&l(t,o.pos,o.pos,"",e,n)}))}}},isInputRules:!0});return n}function l(t,e,n,r,o,i){if(t.composing)return!1;var s=t.state,a=s.doc.resolve(e);if(a.parent.type.spec.code)return!1;for(var p=a.parent.textBetween(Math.max(0,a.parentOffset-c),a.parentOffset,null,"￼")+r,l=0;l<o.length;l++){var f=o[l].match.exec(p),u=f&&o[l].handler(s,f,e-(f[0].length-r.length),n);if(u)return t.dispatch(u.setMeta(i,{transform:u,from:e,to:n,text:r})),!0}return!1}function f(t,e){for(var n=t.plugins,r=0;r<n.length;r++){var o=n[r],i=void 0;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){for(var s=t.tr,a=i.transform,c=a.steps.length-1;c>=0;c--)s.step(a.steps[c].invert(a.docs[c]));var p=s.doc.resolve(i.from).marks();e(s.replaceWith(i.from,i.to,t.schema.text(i.text,p)))}return!0}}return!1}var u=new s(/--$/,"—"),h=new s(/\.\.\.$/,"…"),d=new s(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),m=new s(/"$/,"”"),v=new s(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),g=new s(/'$/,"’"),y=[d,m,v,g];function w(t,e,n,r){return new s(t,(function(t,s,a,c){var p=n instanceof Function?n(s):n,l=t.tr.delete(a,c),f,u=l.doc.resolve(a).blockRange(),h=u&&o(u,e,p);if(!h)return null;l.wrap(u,h);var d=l.doc.resolve(a-1).nodeBefore;return d&&d.type==e&&i(l.doc,a-1)&&(!r||r(s,d))&&l.join(a-1),l}))}function b(t,e,n){return new s(t,(function(t,r,o,i){var s=t.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e)?t.tr.delete(o,i).setBlockType(o,o,e,a):null}))}}}},"prosemirror-state":{"package.json":function t(e,n,t){t.exports={name:"prosemirror-state",version:"1.3.2",module:"dist/index.es.js",main:"dist/index.js"}},dist:{"index.es.js":function t(e,n,t){let r,o,i,s,a,c,p;t.export({AllSelection:()=>y,EditorState:()=>E,NodeSelection:()=>v,Plugin:()=>I,PluginKey:()=>B,Selection:()=>f,SelectionRange:()=>h,TextSelection:()=>d,Transaction:()=>C}),t.link("prosemirror-model",{Slice(t){r=t},Fragment(t){o=t},Mark(t){i=t},Node(t){s=t}},0),t.link("prosemirror-transform",{ReplaceStep(t){a=t},ReplaceAroundStep(t){c=t},Transform(t){p=t}},1);var l=Object.create(null),f=function t(e,n,r){this.ranges=r||[new h(e.min(n),e.max(n))],this.$anchor=e,this.$head=n},u={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};u.anchor.get=function(){return this.$anchor.pos},u.head.get=function(){return this.$head.pos},u.from.get=function(){return this.$from.pos},u.to.get=function(){return this.$to.pos},u.$from.get=function(){return this.ranges[0].$from},u.$to.get=function(){return this.ranges[0].$to},u.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},f.prototype.content=function t(){return this.$from.node(0).slice(this.from,this.to,!0)},f.prototype.replace=function t(e,n){void 0===n&&(n=r.empty);for(var o=n.content.lastChild,i=null,s=0;s<n.openEnd;s++)i=o,o=o.lastChild;for(var a=e.steps.length,c=this.ranges,p=0;p<c.length;p++){var l=c[p],f=l.$from,u=l.$to,h=e.mapping.slice(a);e.replaceRange(h.map(f.pos),h.map(u.pos),p?r.empty:n),0==p&&x(e,a,(o?o.isInline:i&&i.isTextblock)?-1:1)}},f.prototype.replaceWith=function t(e,n){for(var r=e.steps.length,o=this.ranges,i=0;i<o.length;i++){var s=o[i],a=s.$from,c=s.$to,p=e.mapping.slice(r),l=p.map(a.pos),f=p.map(c.pos);i?e.deleteRange(l,f):(e.replaceRangeWith(l,f,n),x(e,r,n.isInline?-1:1))}},f.findFrom=function t(e,n,r){var o=e.parent.inlineContent?new d(e):b(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(var i=e.depth-1;i>=0;i--){var s=n<0?b(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):b(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(s)return s}},f.near=function t(e,n){return void 0===n&&(n=1),this.findFrom(e,n)||this.findFrom(e,-n)||new y(e.node(0))},f.atStart=function t(e){return b(e,e,0,0,1)||new y(e)},f.atEnd=function t(e){return b(e,e,e.content.size,e.childCount,-1)||new y(e)},f.fromJSON=function t(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");var r=l[n.type];if(!r)throw new RangeError("No selection type "+n.type+" defined");return r.fromJSON(e,n)},f.jsonID=function t(e,n){if(e in l)throw new RangeError("Duplicate use of selection JSON ID "+e);return l[e]=n,n.prototype.jsonID=e,n},f.prototype.getBookmark=function t(){return d.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(f.prototype,u),f.prototype.visible=!0;var h=function t(e,n){this.$from=e,this.$to=n},d=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function n(r,o){var i=r.resolve(o.map(this.head));if(!i.parent.inlineContent)return t.near(i);var s=r.resolve(o.map(this.anchor));return new e(s.parent.inlineContent?s:i,i)},e.prototype.replace=function e(n,o){if(void 0===o&&(o=r.empty),t.prototype.replace.call(this,n,o),o==r.empty){var i=this.$from.marksAcross(this.$to);i&&n.ensureMarks(i)}},e.prototype.eq=function t(n){return n instanceof e&&n.anchor==this.anchor&&n.head==this.head},e.prototype.getBookmark=function t(){return new m(this.anchor,this.head)},e.prototype.toJSON=function t(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function t(n,r){if("number"!=typeof r.anchor||"number"!=typeof r.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(n.resolve(r.anchor),n.resolve(r.head))},e.create=function t(e,n,r){void 0===r&&(r=n);var o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))},e.between=function n(r,o,i){var s=r.pos-o.pos;if(i&&!s||(i=s>=0?1:-1),!o.parent.inlineContent){var a=t.findFrom(o,i,!0)||t.findFrom(o,-i,!0);if(!a)return t.near(o,i);o=a.$head}return r.parent.inlineContent||(0==s?r=o:(r=(t.findFrom(r,-i,!0)||t.findFrom(r,i,!0)).$anchor).pos<o.pos!=s<0&&(r=o)),new e(r,o)},Object.defineProperties(e.prototype,n),e}(f);f.jsonID("text",d);var m=function t(e,n){this.anchor=e,this.head=n};m.prototype.map=function t(e){return new m(e.map(this.anchor),e.map(this.head))},m.prototype.resolve=function t(e){return d.between(e.resolve(this.anchor),e.resolve(this.head))};var v=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function n(r,o){var i=o.mapResult(this.anchor),s=i.deleted,a=i.pos,c=r.resolve(a);return s?t.near(c):new e(c)},e.prototype.content=function t(){return new r(o.from(this.node),0,0)},e.prototype.eq=function t(n){return n instanceof e&&n.anchor==this.anchor},e.prototype.toJSON=function t(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function t(){return new g(this.anchor)},e.fromJSON=function t(n,r){if("number"!=typeof r.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(n.resolve(r.anchor))},e.create=function t(e,n){return new this(e.resolve(n))},e.isSelectable=function t(e){return!e.isText&&!1!==e.type.spec.selectable},e}(f);v.prototype.visible=!1,f.jsonID("node",v);var g=function t(e){this.anchor=e};g.prototype.map=function t(e){var n=e.mapResult(this.anchor),r=n.deleted,o=n.pos;return r?new m(o,o):new g(o)},g.prototype.resolve=function t(e){var n=e.resolve(this.anchor),r=n.nodeAfter;return r&&v.isSelectable(r)?new v(n):f.near(n)};var y=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toJSON=function t(){return{type:"all"}},e.fromJSON=function t(n){return new e(n)},e.prototype.map=function t(n){return new e(n)},e.prototype.eq=function t(n){return n instanceof e},e.prototype.getBookmark=function t(){return w},e}(f);f.jsonID("all",y);var w={map:function t(){return this},resolve:function t(e){return new y(e)}};function b(t,e,n,r,o,i){if(e.inlineContent)return d.create(t,n);for(var s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){var a=e.child(s);if(a.isAtom){if(!i&&v.isSelectable(a))return v.create(t,n-(o<0?a.nodeSize:0))}else{var c=b(t,a,n+o,o<0?a.childCount:0,o,i);if(c)return c}n+=a.nodeSize*o}}function x(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o=t.steps[r],i,s;if(o instanceof a||o instanceof c)t.mapping.maps[r].forEach((function(t,e,n,r){null==s&&(s=r)})),t.setSelection(f.near(t.doc.resolve(s),n))}}var k=1,S=2,O=4,C=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function t(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function t(e){return this.storedMarks=e,this.updated|=2,this},e.prototype.ensureMarks=function t(e){return i.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},e.prototype.addStoredMark=function t(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function t(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function e(n,r){t.prototype.addStep.call(this,n,r),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function t(e){return this.time=e,this},e.prototype.replaceSelection=function t(e){return this.selection.replace(this,e),this},e.prototype.replaceSelectionWith=function t(e,n){var r=this.selection;return!1!==n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||i.none))),r.replaceWith(this,e),this},e.prototype.deleteSelection=function t(){return this.selection.replace(this),this},e.prototype.insertText=function t(e,n,r){void 0===r&&(r=n);var o=this.doc.type.schema;if(null==n)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(n,r);var i=this.storedMarks;if(!i){var s=this.doc.resolve(n);i=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,i)),this.selection.empty||this.setSelection(f.near(this.selection.$to)),this},e.prototype.setMeta=function t(e,n){return this.meta["string"==typeof e?e:e.key]=n,this},e.prototype.getMeta=function t(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function t(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,n),e}(p);function M(t,e){return e&&t?t.bind(e):t}var T=function t(e,n,r){this.name=e,this.init=M(n.init,r),this.apply=M(n.apply,r)},N=[new T("doc",{init:function t(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function t(e){return e.doc}}),new T("selection",{init:function t(e,n){return e.selection||f.atStart(n.doc)},apply:function t(e){return e.selection}}),new T("storedMarks",{init:function t(e){return e.storedMarks||null},apply:function t(e,n,r,o){return o.selection.$cursor?e.storedMarks:null}}),new T("scrollToSelection",{init:function t(){return 0},apply:function t(e,n){return e.scrolledIntoView?n+1:n}})],D=function t(e,n){var r=this;this.schema=e,this.fields=N.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),n&&n.forEach((function(t){if(r.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");r.plugins.push(t),r.pluginsByKey[t.key]=t,t.spec.state&&r.fields.push(new T(t.key,t.spec.state,t))}))},E=function t(e){this.config=e},A={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};A.schema.get=function(){return this.config.schema},A.plugins.get=function(){return this.config.plugins},E.prototype.apply=function t(e){return this.applyTransaction(e).state},E.prototype.filterTransaction=function t(e,n){void 0===n&&(n=-1);for(var r=0;r<this.config.plugins.length;r++)if(r!=n){var o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0},E.prototype.applyTransaction=function t(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var n=[e],r=this.applyInner(e),o=null;;){for(var i=!1,s=0;s<this.config.plugins.length;s++){var a=this.config.plugins[s];if(a.spec.appendTransaction){var c=o?o[s].n:0,p=o?o[s].state:this,l=c<n.length&&a.spec.appendTransaction.call(a,c?n.slice(c):n,p,r);if(l&&r.filterTransaction(l,s)){if(l.setMeta("appendedTransaction",e),!o){o=[];for(var f=0;f<this.config.plugins.length;f++)o.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(l),r=r.applyInner(l),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}},E.prototype.applyInner=function t(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new E(this.config),r=this.config.fields,o=0;o<r.length;o++){var i=r[o];n[i.name]=i.apply(e,this[i.name],this,n)}for(var s=0;s<j.length;s++)j[s](this,e,n);return n},A.tr.get=function(){return new C(this)},E.create=function t(e){for(var n=new D(e.schema||e.doc.type.schema,e.plugins),r=new E(n),o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r},E.prototype.reconfigure=function t(e){for(var n=new D(e.schema||this.schema,e.plugins),r=n.fields,o=new E(n),i=0;i<r.length;i++){var s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o},E.prototype.toJSON=function t(e){var n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),e&&"object"==typeof e)for(var r in e){if("doc"==r||"selection"==r)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=e[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n},E.fromJSON=function t(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var o=new D(e.schema,e.plugins),i=new E(o);return o.fields.forEach((function(t){if("doc"==t.name)i.doc=s.fromJSON(e.schema,n.doc);else if("selection"==t.name)i.selection=f.fromJSON(i.doc,n.selection);else if("storedMarks"==t.name)n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(var o in r){var a=r[o],c=a.spec.state;if(a.key==t.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,o))return void(i[t.name]=c.fromJSON.call(a,e,n[o],i))}i[t.name]=t.init(e,i)}})),i},E.addApplyListener=function t(e){j.push(e)},E.removeApplyListener=function t(e){var n=j.indexOf(e);n>-1&&j.splice(n,1)},Object.defineProperties(E.prototype,A);var j=[];function R(t,e,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=R(o,e,{})),n[r]=o}return n}var I=function t(e){this.props={},e.props&&R(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:z("plugin")};I.prototype.getState=function t(e){return e[this.key]};var P=Object.create(null);function z(t){return t in P?t+"$"+ ++P[t]:(P[t]=0,t+"$")}var B=function t(e){void 0===e&&(e="key"),this.key=z(e)};B.prototype.get=function t(e){return e.config.pluginsByKey[this.key]},B.prototype.getState=function t(e){return e[this.key]}}}},"prosemirror-keymap":{"package.json":function t(e,n,t){t.exports={name:"prosemirror-keymap",version:"1.1.3",module:"dist/index.es.js",main:"dist/index.js"}},dist:{"index.es.js":function t(e,n,t){let r,o,i;t.export({keydownHandler:()=>f,keymap:()=>l}),t.link("w3c-keyname",{keyName(t){r=t},base(t){o=t}},0),t.link("prosemirror-state",{Plugin(t){i=t}},1);var s="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function a(t){var e=t.split(/-(?!$)/),n=e[e.length-1],r,o,i,a;"Space"==n&&(n=" ");for(var c=0;c<e.length-1;c++){var p=e[c];if(/^(cmd|meta|m)$/i.test(p))a=!0;else if(/^a(lt)?$/i.test(p))r=!0;else if(/^(c|ctrl|control)$/i.test(p))o=!0;else if(/^s(hift)?$/i.test(p))i=!0;else{if(!/^mod$/i.test(p))throw new Error("Unrecognized modifier name: "+p);s?a=!0:o=!0}}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),a&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function c(t){var e=Object.create(null);for(var n in t)e[a(n)]=t[n];return e}function p(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function l(t){return new i({props:{handleKeyDown:f(t)}})}function f(t){var e=c(t);return function(t,n){var i=r(n),s=1==i.length&&" "!=i,a,c=e[p(i,n,!s)];if(c&&c(t.state,t.dispatch,t))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey)&&(a=o[n.keyCode])&&a!=i){var l=e[p(a,n,!0)];if(l&&l(t.state,t.dispatch,t))return!0}else if(s&&n.shiftKey){var f=e[p(i,n,!0)];if(f&&f(t.state,t.dispatch,t))return!0}return!1}}}}},"w3c-keyname":{"package.json":function t(e,n,t){t.exports={name:"w3c-keyname",version:"2.2.2",module:"index.es.js",main:"index.js"}},"index.es.js":function t(e,n,t){t.export({base:()=>o,keyName:()=>m,shift:()=>s});for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},o=r,i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},s=i,a="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),c="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),p="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),l="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),f="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),u=a&&(l||+a[1]<57)||p&&l,h=0;h<10;h++)r[48+h]=r[96+h]=String(h);for(var h=1;h<=24;h++)r[h+111]="F"+h;for(var h=65;h<=90;h++)r[h]=String.fromCharCode(h+32),i[h]=String.fromCharCode(h);for(var d in r)i.hasOwnProperty(d)||(i[d]=r[d]);var m=function(t){var e,n=!(u&&(t.ctrlKey||t.altKey||t.metaKey)||(c||f)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?i:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n},v={base:o,shift:s,keyName:m};t.exportDefault(v)}},"prosemirror-dropcursor":{"package.json":function t(e,n,t){t.exports={name:"prosemirror-dropcursor",version:"1.3.2",module:"dist/index.es.js",main:"dist/index.js"}},dist:{"index.es.js":function t(e,n,t){let r,o;function i(t){return void 0===t&&(t={}),new r({view:function e(n){return new s(n,t)}})}t.export({dropCursor:()=>i}),t.link("prosemirror-state",{Plugin(t){r=t}},0),t.link("prosemirror-transform",{dropPoint(t){o=t}},1);var s=function t(e,n){var r=this;this.editorView=e,this.width=n.width||1,this.color=n.color||"black",this.class=n.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var n=function(e){return r[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}}))};s.prototype.destroy=function t(){var e=this;this.handlers.forEach((function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)}))},s.prototype.update=function t(e,n){null!=this.cursorPos&&n.doc!=e.state.doc&&this.updateOverlay()},s.prototype.setCursor=function t(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},s.prototype.updateOverlay=function t(){var e=this.editorView.state.doc.resolve(this.cursorPos),n;if(!e.parent.inlineContent){var r=e.nodeBefore,o=e.nodeAfter;if(r||o){var i=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0)).getBoundingClientRect(),s=r?i.bottom:i.top;r&&o&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),n={left:i.left,right:i.right,top:s-this.width/2,bottom:s+this.width/2}}}if(!n){var a=this.editorView.coordsAtPos(this.cursorPos);n={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}var c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var p=!c||c==document.body&&"static"==getComputedStyle(c).position?{left:-pageXOffset,top:-pageYOffset}:c.getBoundingClientRect();this.element.style.left=n.left-p.left+"px",this.element.style.top=n.top-p.top+"px",this.element.style.width=n.right-n.left+"px",this.element.style.height=n.bottom-n.top+"px"},s.prototype.scheduleRemoval=function t(e){var n=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return n.setCursor(null)}),e)},s.prototype.dragover=function t(e){if(this.editorView.editable){var n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY});if(n){var r=n.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(r=o(this.editorView.state.doc,r,this.editorView.dragging.slice))&&(r=n.pos),this.setCursor(r),this.scheduleRemoval(5e3)}}},s.prototype.dragend=function t(){this.scheduleRemoval(20)},s.prototype.drop=function t(){this.scheduleRemoval(20)},s.prototype.dragleave=function t(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}}},"prosemirror-gapcursor":{"package.json":function t(e,n,t){t.exports={name:"prosemirror-gapcursor",version:"1.1.3",module:"dist/index.es.js",main:"dist/index.js"}},dist:{"index.es.js":function t(e,n,t){let r,o,i,s,a,c,p,l;t.export({GapCursor:()=>f,gapCursor:()=>m}),t.link("prosemirror-keymap",{keydownHandler(t){r=t}},0),t.link("prosemirror-state",{Selection(t){o=t},Plugin(t){i=t},TextSelection(t){s=t},NodeSelection(t){a=t}},1),t.link("prosemirror-view",{DecorationSet(t){c=t},Decoration(t){p=t}},2),t.link("prosemirror-model",{Slice(t){l=t}},3);var f=function(t){function e(e){t.call(this,e,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function n(r,o){var i=r.resolve(o.map(this.head));return e.valid(i)?new e(i):t.near(i)},e.prototype.content=function t(){return l.empty},e.prototype.eq=function t(n){return n instanceof e&&n.head==this.head},e.prototype.toJSON=function t(){return{type:"gapcursor",pos:this.head}},e.fromJSON=function t(n,r){if("number"!=typeof r.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(n.resolve(r.pos))},e.prototype.getBookmark=function t(){return new u(this.anchor)},e.valid=function t(e){var n=e.parent;if(n.isTextblock||!h(e)||!d(e))return!1;var r=n.type.spec.allowGapCursor;if(null!=r)return r;var o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock},e.findFrom=function t(n,r,o){if(!o&&e.valid(n))return n;for(var i=n.pos,s=null,a=n.depth;;a--){var c=n.node(a);if(r>0?n.indexAfter(a)<c.childCount:n.index(a)>0){s=c.maybeChild(r>0?n.indexAfter(a):n.index(a)-1);break}if(0==a)return null;i+=r;var p=n.doc.resolve(i);if(e.valid(p))return p}for(;s=r>0?s.firstChild:s.lastChild;){i+=r;var l=n.doc.resolve(i);if(e.valid(l))return l}return null},e}(o);f.prototype.visible=!1,o.jsonID("gapcursor",f);var u=function t(e){this.pos=e};function h(t){for(var e=t.depth;e>=0;e--){var n=t.index(e);if(0!=n)for(var r=t.node(e).child(n-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function d(t){for(var e=t.depth;e>=0;e--){var n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}u.prototype.map=function t(e){return new u(e.map(this.pos))},u.prototype.resolve=function t(e){var n=e.resolve(this.pos);return f.valid(n)?new f(n):o.near(n)};var m=function(){return new i({props:{decorations:w,createSelectionBetween:function t(e,n,r){if(n.pos==r.pos&&f.valid(r))return new f(r)},handleClick:y,handleKeyDown:v}})},v=r({ArrowLeft:g("horiz",-1),ArrowRight:g("horiz",1),ArrowUp:g("vert",-1),ArrowDown:g("vert",1)});function g(t,e){var n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,r,o){var i=t.selection,a=e>0?i.$to:i.$from,c=i.empty;if(i instanceof s){if(!o.endOfTextblock(n)||0==a.depth)return!1;c=!1,a=t.doc.resolve(e>0?a.after():a.before())}var p=f.findFrom(a,e,c);return!!p&&(r&&r(t.tr.setSelection(new f(p))),!0)}}function y(t,e,n){if(!t.editable)return!1;var r=t.state.doc.resolve(e);if(!f.valid(r))return!1;var o,i=t.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(i>-1&&a.isSelectable(t.state.doc.nodeAt(i)))&&(t.dispatch(t.state.tr.setSelection(new f(r))),!0)}function w(t){if(!(t.selection instanceof f))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",c.create(t.doc,[p.widget(t.selection.head,e,{key:"gapcursor"})])}}}},"prosemirror-view":{"package.json":function t(e,n,t){t.exports={name:"prosemirror-view",version:"1.13.11",module:"dist/index.es.js",main:"dist/index.js"}},dist:{"index.es.js":function t(e,n,t){let r,o,i,s,a,c,p,l,f;t.export({Decoration:()=>Sn,DecorationSet:()=>Tn,EditorView:()=>$n,__endComposition:()=>ln,__parseFromClipboard:()=>be,__serializeForClipboard:()=>we}),t.link("prosemirror-state",{TextSelection(t){r=t},Selection(t){o=t},NodeSelection(t){i=t}},0),t.link("prosemirror-model",{DOMSerializer(t){s=t},Fragment(t){a=t},Mark(t){c=t},DOMParser(t){p=t},Slice(t){l=t}},1),t.link("prosemirror-transform",{dropPoint(t){f=t}},2);var u={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var h=/Edge\/(\d+)/.exec(navigator.userAgent),d=/MSIE \d/.test(navigator.userAgent),m=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);u.mac=/Mac/.test(navigator.platform);var v=u.ie=!!(d||m||h);u.ie_version=d?document.documentMode||6:m?+m[1]:h?+h[1]:null,u.gecko=!v&&/gecko\/(\d+)/i.test(navigator.userAgent),u.gecko_version=u.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var g=!v&&/Chrome\/(\d+)/.exec(navigator.userAgent);u.chrome=!!g,u.chrome_version=g&&+g[1],u.ios=!v&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),u.android=/Android \d/.test(navigator.userAgent),u.webkit=!v&&"WebkitAppearance"in document.documentElement.style,u.safari=/Apple Computer/.test(navigator.vendor),u.webkit_version=u.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var y=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},w=function(t){var e=t.parentNode;return e&&11==e.nodeType?e.host:e},b=function(t,e,n){var r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},x=function(t,e,n,r){return n&&(S(t,e,n,r,-1)||S(t,e,n,r,1))},k=/^(img|br|input|textarea|hr)$/i;function S(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:O(t))){var i=t.parentNode;if(1!=i.nodeType||C(t)||k.test(t.nodeName)||"false"==t.contentEditable)return!1;e=y(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?O(t):0}}}function O(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function C(t){for(var e,n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var M=function(t){var e=t.isCollapsed;return e&&u.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function T(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function N(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function D(t,e){return"number"==typeof t?t:t[e]}function E(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,s=i.defaultView,a=n||t.dom;a;a=w(a))if(1==a.nodeType){var c=a==i.body||1!=a.nodeType,p=c?N(s):a.getBoundingClientRect(),l=0,f=0;if(e.top<p.top+D(r,"top")?f=-(p.top-e.top+D(o,"top")):e.bottom>p.bottom-D(r,"bottom")&&(f=e.bottom-p.bottom+D(o,"bottom")),e.left<p.left+D(r,"left")?l=-(p.left-e.left+D(o,"left")):e.right>p.right-D(r,"right")&&(l=e.right-p.right+D(o,"right")),(l||f)&&(c?s.scrollBy(l,f):(f&&(a.scrollTop+=f),l&&(a.scrollLeft+=l))),c)break}}function A(t){for(var e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o,i=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){var a=t.root.elementFromPoint(i,s);if(a!=t.dom&&t.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=n-20){r=a,o=c.top;break}}}return{refDOM:r,refTop:o,stack:j(t.dom)}}function j(t){for(var e=[],n=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=n);t=w(t));return e}function R(t){var e=t.refDOM,n=t.refTop,r=t.stack,o=e?e.getBoundingClientRect().top:0;I(r,0==o?0:o-n)}function I(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=s&&(o.scrollLeft=s)}}var P=null;function z(t){if(t.setActive)return t.setActive();if(P)return t.focus(P);var e=j(t);t.focus(null==P?{get preventScroll(){return P={preventScroll:!0},!0}}:void 0),P||(P=!1,I(e,0))}function B(t,e){for(var n,r=2e8,o,i=0,s=e.top,a=e.top,c=t.firstChild,p=0;c;c=c.nextSibling,p++){var l=void 0;if(1==c.nodeType)l=c.getClientRects();else{if(3!=c.nodeType)continue;l=b(c).getClientRects()}for(var f=0;f<l.length;f++){var u=l[f];if(u.top<=s&&u.bottom>=a){s=Math.max(u.bottom,s),a=Math.min(u.top,a);var h=u.left>e.left?u.left-e.left:u.right<e.left?e.left-u.right:0;if(h<r){n=c,r=h,o=h&&3==n.nodeType?{left:u.right<e.left?u.right:u.left,top:e.top}:e,1==c.nodeType&&h&&(i=p+(e.left>=(u.left+u.right)/2?1:0));continue}}!n&&(e.left>=u.right&&e.top>=u.top||e.left>=u.left&&e.top>=u.bottom)&&(i=p+1)}}return n&&3==n.nodeType?_(n,o):!n||r&&1==n.nodeType?{node:t,offset:i}:B(n,o)}function _(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=W(r,1);if(i.top!=i.bottom&&V(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function V(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function $(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function F(t,e,n){var r=B(e,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(o,i,s)}function L(t,e,n,r){for(var o=-1,i=e;i!=t.dom;){var s=t.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n)}function J(t,e,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var s=t.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var p=a[c];if(V(e,p))return J(s,e,p)}if((i=(i+1)%r)==o)break}return t}function q(t,e){var n,r,o=t.root,i,s;if(o.caretPositionFromPoint)try{var a=o.caretPositionFromPoint(e.left,e.top);a&&(i=(n=a).offsetNode,s=n.offset)}catch(v){}if(!i&&o.caretRangeFromPoint){var c=o.caretRangeFromPoint(e.left,e.top);c&&(i=(r=c).startContainer,s=r.startOffset)}var p=o.elementFromPoint(e.left,e.top+1),l;if(!p||!t.dom.contains(1!=p.nodeType?p.parentNode:p)){var f=t.dom.getBoundingClientRect();if(!V(e,f))return null;if(!(p=J(t.dom,e,f)))return null}if(p=$(p,e),i){if(u.gecko&&1==i.nodeType&&(s=Math.min(s,i.childNodes.length))<i.childNodes.length){var h=i.childNodes[s],d;"IMG"==h.nodeName&&(d=h.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}i==t.dom&&s==i.childNodes.length-1&&1==i.lastChild.nodeType&&e.top>i.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:0!=s&&1==i.nodeType&&"BR"==i.childNodes[s-1].nodeName||(l=L(t,i,s,e))}null==l&&(l=F(t,p,e));var m=t.docView.nearestDesc(p,!0);return{pos:l,inside:m?m.posAtStart-m.border:-1}}function W(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function K(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset;if(3==r.nodeType&&(u.chrome||u.gecko)){var i=W(b(r,o,o),0);if(u.gecko&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){var s=W(b(r,o-1,o-1),-1);if(Math.abs(s.left-i.left)<1&&s.top==i.top){var a=W(b(r,o,o+1),-1);return H(a,a.left<s.left)}}return i}if(1==r.nodeType&&!t.state.doc.resolve(e).parent.inlineContent){var c=!0,p;if(o<r.childNodes.length){var l=r.childNodes[o];1==l.nodeType&&(p=l.getBoundingClientRect())}if(!p&&o){var f=r.childNodes[o-1];1==f.nodeType&&(p=f.getBoundingClientRect(),c=!1)}return U(p||r.getBoundingClientRect(),c)}for(var h=-1;h<2;h+=2)if(h<0&&o){var d=void 0,m=3==r.nodeType?b(r,o-1,o):3==(d=r.childNodes[o-1]).nodeType?b(d):1==d.nodeType&&"BR"!=d.nodeName?d:null;if(m){var v=W(m,1);if(v.top<v.bottom)return H(v,!1)}}else if(h>0&&o<O(r)){var g=void 0,y=3==r.nodeType?b(r,o,o+1):3==(g=r.childNodes[o]).nodeType?b(g):1==g.nodeType?g:null;if(y){var w=W(y,-1);if(w.top<w.bottom)return H(w,!0)}}return H(W(3==r.nodeType?b(r):r,0),!1)}function H(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function U(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function G(t,e,n){var r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o.focus()}}function X(t,e,n){var r=e.selection,o="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return G(t,e,(function(){for(var e,r=t.docView.domFromPos(o.pos).node;;){var i=t.docView.nearestDesc(r,!0);if(!i)break;if(i.node.isBlock){r=i.dom;break}r=i.dom.parentNode}for(var s=K(t,o.pos),a=r.firstChild;a;a=a.nextSibling){var c=void 0;if(1==a.nodeType)c=a.getClientRects();else{if(3!=a.nodeType)continue;c=b(a,0,a.nodeValue.length).getClientRects()}for(var p=0;p<c.length;p++){var l=c[p];if(l.bottom>l.top&&("up"==n?l.bottom<s.top+1:l.top>s.bottom-1))return!1}}return!0}))}var Y=/[\u0590-\u08ac]/;function Q(t,e,n){var r,o=e.selection.$head;if(!o.parent.isTextblock)return!1;var i=o.parentOffset,s=!i,a=i==o.parent.content.size,c=getSelection();return Y.test(o.parent.textContent)&&c.modify?G(t,e,(function(){var e=c.getRangeAt(0),r=c.focusNode,i=c.focusOffset,s=c.caretBidiLevel;c.modify("move",n,"character");var a,p=!(o.depth?t.docView.domAfterPos(o.before()):t.dom).contains(1==c.focusNode.nodeType?c.focusNode:c.focusNode.parentNode)||r==c.focusNode&&i==c.focusOffset;return c.removeAllRanges(),c.addRange(e),null!=s&&(c.caretBidiLevel=s),p})):"left"==n||"backward"==n?s:a}var Z=null,tt=null,et=!1;function nt(t,e,n){return Z==e&&tt==n?et:(Z=e,tt=n,et="up"==n||"down"==n?X(t,e,n):Q(t,e,n))}var rt=0,ot=1,it=2,st=3,at=function t(e,n,r,o){this.parent=e,this.children=n,this.dom=r,r.pmViewDesc=this,this.contentDOM=o,this.dirty=0},ct={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};at.prototype.matchesWidget=function t(){return!1},at.prototype.matchesMark=function t(){return!1},at.prototype.matchesNode=function t(){return!1},at.prototype.matchesHack=function t(){return!1},ct.beforePosition.get=function(){return!1},at.prototype.parseRule=function t(){return null},at.prototype.stopEvent=function t(){return!1},ct.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},ct.border.get=function(){return 0},at.prototype.destroy=function t(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},at.prototype.posBeforeChild=function t(e){for(var n=0,r=this.posAtStart;n<this.children.length;n++){var o=this.children[n];if(o==e)return r;r+=o.size}},ct.posBefore.get=function(){return this.parent.posBeforeChild(this)},ct.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},ct.posAfter.get=function(){return this.posBefore+this.size},ct.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},at.prototype.localPosFromDOM=function t(e,n,r){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(r<0){var o,i;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&(!(i=o.pmViewDesc)||i.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}var s,a;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&(!(a=s.pmViewDesc)||a.parent!=this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}var c;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))c=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==n)for(var p=e;;p=p.parentNode){if(p==this.dom){c=!1;break}if(p.parentNode.firstChild!=p)break}if(null==c&&n==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){c=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==c?r>0:c)?this.posAtEnd:this.posAtStart},at.prototype.nearestDesc=function t(e,n){for(var r=!0,o=e;o;o=o.parentNode){var i=this.getDesc(o);if(i&&(!n||i.node)){if(!r||!i.nodeDOM||(1==i.nodeDOM.nodeType?i.nodeDOM.contains(e):i.nodeDOM==e))return i;r=!1}}},at.prototype.getDesc=function t(e){for(var n=e.pmViewDesc,r=n;r;r=r.parent)if(r==this)return n},at.prototype.posFromDOM=function t(e,n,r){for(var o=e;;o=o.parentNode){var i=this.getDesc(o);if(i)return i.localPosFromDOM(e,n,r)}},at.prototype.descAt=function t(e){for(var n=0,r=0;n<this.children.length;n++){var o=this.children[n],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<i)return o.descAt(e-r-o.border);r=i}},at.prototype.domFromPos=function t(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0;;r++){if(n==e){for(;r<this.children.length&&(this.children[r].beforePosition||this.children[r].dom.parentNode!=this.contentDOM);)r++;return{node:this.contentDOM,offset:r==this.children.length?this.contentDOM.childNodes.length:y(this.children[r].dom)}}if(r==this.children.length)throw new Error("Invalid position "+e);var o=this.children[r],i=n+o.size;if(e<i)return o.domFromPos(e-n-o.border);n=i}},at.prototype.parseRange=function t(e,n,r){if(void 0===r&&(r=0),0==this.children.length)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var o=-1,i=-1,s=r,a=0;;a++){var c=this.children[a],p=s+c.size;if(-1==o&&e<=p){var l=s+c.border;if(e>=l&&n<=p-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,n,l);e=s;for(var f=a;f>0;f--){var u=this.children[f-1];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(1)){o=y(u.dom)+1;break}e-=u.size}-1==o&&(o=0)}if(o>-1&&n<=p){n=p;for(var h=a+1;h<this.children.length;h++){var d=this.children[h];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=y(d.dom);break}n+=d.size}-1==i&&(i=this.contentDOM.childNodes.length);break}s=p}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:i}},at.prototype.emptyChildAt=function t(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var n=this.children[e<0?0:this.children.length-1];return 0==n.size||n.emptyChildAt(e)},at.prototype.domAfterPos=function t(e){var n=this.domFromPos(e),r=n.node,o=n.offset;if(1!=r.nodeType||o==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[o]},at.prototype.setSelection=function t(e,n,r,o){for(var i=Math.min(e,n),s=Math.max(e,n),a=0,c=0;a<this.children.length;a++){var p=this.children[a],l=c+p.size;if(i>c&&s<l)return p.setSelection(e-c-p.border,n-c-p.border,r,o);c=l}var f=this.domFromPos(e),u=this.domFromPos(n),h=r.getSelection(),d=document.createRange();if(o||!x(f.node,f.offset,h.anchorNode,h.anchorOffset)||!x(u.node,u.offset,h.focusNode,h.focusOffset)){if(h.extend)d.setEnd(f.node,f.offset),d.collapse(!1);else{if(e>n){var m=f;f=u,u=m}d.setEnd(u.node,u.offset),d.setStart(f.node,f.offset)}h.removeAllRanges(),h.addRange(d),h.extend&&h.extend(u.node,u.offset)}},at.prototype.ignoreMutation=function t(e){return!this.contentDOM&&"selection"!=e.type},ct.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},at.prototype.markDirty=function t(e,n){for(var r=0,o=0;o<this.children.length;o++){var i=this.children[o],s=r+i.size;if(r==s?e<=s&&n>=r:e<s&&n>r){var a=r+i.border,c=s-i.border;if(e>=a&&n<=c)return this.dirty=e==r||n==s?2:1,void(e!=a||n!=c||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-a,n-a):i.dirty=3);i.dirty=3}r=s}this.dirty=2},at.prototype.markParentsDirty=function t(){for(var e=this.parent;e;e=e.parent){var n=2;e.dirty<2&&(e.dirty=2)}},Object.defineProperties(at.prototype,ct);var pt=[],lt=function(t){function e(e,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,pt,s,null),this.widget=n,i=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function t(e){return 0==this.dirty&&e.type.eq(this.widget.type)},e.prototype.parseRule=function t(){return{ignore:!0}},e.prototype.stopEvent=function t(e){var n=this.widget.spec.stopEvent;return!!n&&n(e)},Object.defineProperties(e.prototype,n),e}(at),ft=function(t){function e(e,n,r,o){t.call(this,e,pt,n,null),this.textDOM=r,this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function t(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n},e.prototype.domFromPos=function t(e){return{node:this.textDOM,offset:e}},e.prototype.ignoreMutation=function t(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(e.prototype,n),e}(at),ut=function(t){function e(e,n,r,o){t.call(this,e,[],r,o),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function t(n,r,o,i){var a=i.nodeViews[r.type.name],c=a&&a(r,i,o);return c&&c.dom||(c=s.renderSpec(document,r.type.spec.toDOM(r,o))),new e(n,r,c.dom,c.contentDOM||c.dom)},e.prototype.parseRule=function t(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function t(e){return 3!=this.dirty&&this.mark.eq(e)},e.prototype.markDirty=function e(n,r){if(t.prototype.markDirty.call(this,n,r),0!=this.dirty){for(var o=this.parent;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function t(n,r,o){var i=e.create(this.parent,this.mark,!0,o),s=this.children,a=this.size;r<a&&(s=It(s,r,a,o)),n>0&&(s=It(s,0,n,o));for(var c=0;c<s.length;c++)s[c].parent=i;return i.children=s,i},e}(at),ht=function(t){function e(e,n,r,o,i,s,a,c,p){t.call(this,e,n.isLeaf?pt:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(c,p)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0}};return e.create=function t(n,r,o,i,a,c){var p,l=a.nodeViews[r.type.name],f,u=l&&l(r,a,(function(){return f?f.parent?f.parent.posBeforeChild(f):void 0:c}),o),h=u&&u.dom,d=u&&u.contentDOM;if(r.isText)if(h){if(3!=h.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else h=document.createTextNode(r.text);else h||(h=(p=s.renderSpec(document,r.type.spec.toDOM(r))).dom,d=p.contentDOM);d||r.isText||"BR"==h.nodeName||(h.hasAttribute("contenteditable")||(h.contentEditable=!1),r.type.spec.draggable&&(h.draggable=!0));var m=h;return h=Ot(h,o,r),u?f=new gt(n,r,o,i,h,d,m,u,a,c+1):r.isText?new mt(n,r,o,i,h,m,a):new e(n,r,o,i,h,d,m,a,c+1)},e.prototype.parseRule=function t(){var e=this;if(this.node.type.spec.reparseInView)return null;var n={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(n.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?n.contentElement=this.contentDOM:n.getContent=function(){return e.contentDOM?a.empty:e.node.content},n},e.prototype.matchesNode=function t(e,n,r){return 0==this.dirty&&e.eq(this.node)&&Ct(n,this.outerDeco)&&r.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function t(e,n){var r=this,o=this.node.inlineContent,i=n,s=o&&e.composing&&this.localCompositionNode(e,n),a=new Tt(this,s&&s.node);Et(this.node,this.innerDeco,(function(t,n,s){t.spec.marks?a.syncToMarks(t.spec.marks,o,e):t.type.side>=0&&!s&&a.syncToMarks(n==r.node.childCount?c.none:r.node.child(n).marks,o,e),a.placeWidget(t,e,i)}),(function(t,n,r,s){a.syncToMarks(t.marks,o,e),a.findNodeMatch(t,n,r,s)||a.updateNextNode(t,n,r,e,s)||a.addNode(t,n,r,e,i),i+=t.nodeSize})),a.syncToMarks(pt,o,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),this.renderChildren())},e.prototype.renderChildren=function t(){yt(this.contentDOM,this.children),u.ios&&At(this.dom)},e.prototype.localCompositionNode=function t(e,n){var o=e.state.selection,i=o.from,s=o.to;if(!(!(e.state.selection instanceof r)||i<n||s>n+this.node.content.size)){var a=e.root.getSelection(),c=jt(a.focusNode,a.focusOffset);if(c&&this.dom.contains(c.parentNode)){var p=c.nodeValue,l=Rt(this.node.content,p,i-n,s-n);return l<0?null:{node:c,pos:l,text:p}}}},e.prototype.protectLocalComposition=function t(e,n){var r=n.node,o=n.pos,i=n.text;if(!this.getDesc(r)){for(var s=r;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=null)}var a=new ft(this,s,r,i);e.compositionNodes.push(a),this.children=It(this.children,o,o+i.length,e,a)}},e.prototype.update=function t(e,n,r,o){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,n,r,o),!0)},e.prototype.updateInner=function t(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function t(e){if(!Ct(e,this.outerDeco)){var n=1!=this.nodeDOM.nodeType,r=this.dom;this.dom=kt(this.dom,this.nodeDOM,xt(this.outerDeco,this.node,n),xt(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},e.prototype.selectNode=function t(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function t(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!1)},Object.defineProperties(e.prototype,n),e}(at);function dt(t,e,n,r,o){return Ot(r,e,t),new ht(null,t,e,n,r,r,r,o,0)}var mt=function(t){function e(e,n,r,o,i,s,a){t.call(this,e,n,r,o,i,null,s,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function t(){return{skip:this.nodeDOM.parentNode||!0}},e.prototype.update=function t(e,n){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(n),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,this.dirty=0,!0)},e.prototype.inParent=function t(){for(var e=this.parent.contentDOM,n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1},e.prototype.domFromPos=function t(e){return{node:this.nodeDOM,offset:e}},e.prototype.localPosFromDOM=function e(n,r,o){return n==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):t.prototype.localPosFromDOM.call(this,n,r,o)},e.prototype.ignoreMutation=function t(e){return"characterData"!=e.type&&"selection"!=e.type},e.prototype.slice=function t(n,r,o){var i=this.node.cut(n,r),s=document.createTextNode(i.text);return new e(this.parent,i,this.outerDeco,this.innerDeco,s,s,o)},e}(ht),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function t(){return{ignore:!0}},e.prototype.matchesHack=function t(){return 0==this.dirty},e}(at),gt=function(t){function e(e,n,r,o,i,s,a,c,p,l){t.call(this,e,n,r,o,i,s,a,p,l),this.spec=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function e(n,r,o,i){if(3==this.dirty)return!1;if(this.spec.update){var s=this.spec.update(n,r);return s&&this.updateInner(n,r,o,i),s}return!(!this.contentDOM&&!n.isLeaf)&&t.prototype.update.call(this,n,r,o,i)},e.prototype.selectNode=function e(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function e(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function e(n,r,o,i){this.spec.setSelection?this.spec.setSelection(n,r,o):t.prototype.setSelection.call(this,n,r,o,i)},e.prototype.destroy=function e(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function t(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},e.prototype.ignoreMutation=function e(n){return this.spec.ignoreMutation?this.spec.ignoreMutation(n):t.prototype.ignoreMutation.call(this,n)},e}(ht);function yt(t,e){for(var n=t.firstChild,r=0;r<e.length;r++){var o=e[r],i=o.dom;if(i.parentNode==t){for(;i!=n;)n=Mt(n);n=n.nextSibling}else t.insertBefore(i,n);if(o instanceof ut){var s=n?n.previousSibling:t.lastChild;yt(o.contentDOM,o.children),n=s?s.nextSibling:t.firstChild}}for(;n;)n=Mt(n)}function wt(t){t&&(this.nodeName=t)}wt.prototype=Object.create(null);var bt=[new wt];function xt(t,e,n){if(0==t.length)return bt;for(var r=n?bt[0]:new wt,o=[r],i=0;i<t.length;i++){var s=t[i].type.attrs,a=r;if(s)for(var c in s.nodeName&&o.push(a=new wt(s.nodeName)),s){var p=s[c];null!=p&&(n&&1==o.length&&o.push(a=r=new wt(e.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+p:"style"==c?a.style=(a.style?a.style+";":"")+p:"nodeName"!=c&&(a[c]=p))}}return o}function kt(t,e,n,r){if(n==bt&&r==bt)return e;for(var o=e,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&o!=t&&(c=o.parentNode)&&c.tagName.toLowerCase()==s.nodeName?o=c:((c=document.createElement(s.nodeName)).appendChild(o),a=bt[0],o=c)}St(o,a||bt[0],s)}return o}function St(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" "):pt,s=n.class?n.class.split(" "):pt,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&t.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&t.classList.add(s[c])}if(e.style!=n.style){if(e.style)for(var p=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,l;l=p.exec(e.style);)t.style.removeProperty(l[1]);n.style&&(t.style.cssText+=n.style)}}function Ot(t,e,n){return kt(t,t,bt,xt(e,n,1!=t.nodeType))}function Ct(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Mt(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var Tt=function t(e,n){this.top=e,this.lock=n,this.index=0,this.stack=[],this.changed=!1;var r=Nt(e.node.content,e.children);this.preMatched=r.nodes,this.preMatchOffset=r.offset};function Nt(t,e){for(var n=[],r=t.childCount,o=e.length-1;r>0&&o>=0;o--){var i=e[o],s=i.node;if(s){if(s!=t.child(r-1))break;n.push(i),--r}}return{nodes:n.reverse(),offset:r}}function Dt(t,e){return t.type.side-e.type.side}function Et(t,e,n,r){var o=e.locals(t),i=0;if(0!=o.length)for(var s=0,a=[],c=null,p=0;;){if(s<o.length&&o[s].to==i){for(var l=o[s++],f=void 0;s<o.length&&o[s].to==i;)(f||(f=[l])).push(o[s++]);if(f){f.sort(Dt);for(var u=0;u<f.length;u++)n(f[u],p,!!c)}else n(l,p,!!c)}var h=void 0,d=void 0;if(c)d=-1,h=c,c=null;else{if(!(p<t.childCount))break;d=p,h=t.child(p++)}for(var m=0;m<a.length;m++)a[m].to<=i&&a.splice(m--,1);for(;s<o.length&&o[s].from==i;)a.push(o[s++]);var v=i+h.nodeSize;if(h.isText){var g=v;s<o.length&&o[s].from<g&&(g=o[s].from);for(var y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<v&&(c=h.cut(g-i),h=h.cut(0,g-i),v=g,d=-1)}r(h,a.length?a.slice():pt,e.forChild(i,h),d),i=v}else for(var w=0;w<t.childCount;w++){var b=t.child(w);r(b,o,e.forChild(i,b),w),i+=b.nodeSize}}function At(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function jt(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=O(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}function Rt(t,e,n,r){for(var o="",i=0,s=0;i<t.childCount;i++){var a=t.child(i),c=s+a.nodeSize;if(a.isText){if(o+=a.text,c>=r){for(var p=c-o.length,l=o.lastIndexOf(e);l>-1&&p+l>n;)l=o.lastIndexOf(e,l-1);if(l>-1&&p+l+e.length>=r)return p+l;if(c>r)break}}else o="";s=c}return-1}function It(t,e,n,r,o){for(var i=[],s=0,a=0;s<t.length;s++){var c=t[s],p=a,l=a+=c.size;p>=n||l<=e?i.push(c):(p<e&&i.push(c.slice(0,e-p,r)),o&&(i.push(o),o=null),l>n&&i.push(c.slice(n-p,c.size,r)))}return i}function Pt(t,e){var n=t.selection,r=n.$anchor,i=n.$head,s=e>0?r.max(i):r.min(i),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&o.findFrom(a,e)}function zt(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Bt(t,e,n){var o=t.state.selection;if(o instanceof r){if(!o.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var s=Pt(t.state,e);return!!(s&&s instanceof i)&&zt(t,s)}var a=o.$head,c=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter,p;if(!c||c.isText)return!1;var l=e<0?a.pos-c.nodeSize:a.pos;return!!(c.isAtom||(p=t.docView.descAt(l))&&!p.contentDOM)&&(i.isSelectable(c)?zt(t,new i(e<0?t.state.doc.resolve(a.pos-c.nodeSize):a)):!!u.webkit&&zt(t,new r(t.state.doc.resolve(e<0?l:l+c.nodeSize))))}if(o instanceof i&&o.node.isInline)return zt(t,new r(e>0?o.$to:o.$from));var f=Pt(t.state,e);return!!f&&zt(t,f)}function _t(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Vt(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function $t(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,s=!1;for(u.gecko&&1==n.nodeType&&r<_t(n)&&Vt(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var a=n.childNodes[r-1];if(Vt(a))o=n,i=--r;else{if(3!=a.nodeType)break;r=(n=a).nodeValue.length}}else{if(Lt(n))break;for(var c=n.previousSibling;c&&Vt(c);)o=n.parentNode,i=y(c),c=c.previousSibling;if(c)r=_t(n=c);else{if((n=n.parentNode)==t.dom)break;r=0}}s?Jt(t,e,n,r):o&&Jt(t,e,o,i)}}function Ft(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var o=_t(n),i,s;;)if(r<o){if(1!=n.nodeType)break;var a;if(!Vt(n.childNodes[r]))break;i=n,s=++r}else{if(Lt(n))break;for(var c=n.nextSibling;c&&Vt(c);)i=c.parentNode,s=y(c)+1,c=c.nextSibling;if(c)r=0,o=_t(n=c);else{if((n=n.parentNode)==t.dom)break;r=o=0}}i&&Jt(t,e,i,s)}}function Lt(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Jt(t,e,n,r){if(M(e)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection()}function qt(t,e,n){var s=t.state.selection;if(s instanceof r&&!s.empty||n.indexOf("s")>-1)return!1;var a=s.$from,c=s.$to;if(!a.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var p=Pt(t.state,e);if(p&&p instanceof i)return zt(t,p)}if(!a.parent.inlineContent){var l=o.findFrom(e<0?a:c,e);return!l||zt(t,l)}return!1}function Wt(t,e){if(!(t.state.selection instanceof r))return!0;var n=t.state.selection,o=n.$head,i=n.$anchor,s=n.empty;if(!o.sameParent(i))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var a=!o.textOffset&&(e<0?o.nodeBefore:o.nodeAfter);if(a&&!a.isText){var c=t.state.tr;return e<0?c.delete(o.pos-a.nodeSize,o.pos):c.delete(o.pos,o.pos+a.nodeSize),t.dispatch(c),!0}return!1}function Kt(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Ht(t){if(u.chrome&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;Kt(t,o,!0),setTimeout((function(){return Kt(t,o,!1)}),20)}}}function Ut(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Gt(t,e){var n=e.keyCode,r=Ut(e);return 8==n||u.mac&&72==n&&"c"==r?Wt(t,-1)||$t(t):46==n||u.mac&&68==n&&"c"==r?Wt(t,1)||Ft(t):13==n&&!u.ios||27==n||(37==n?Bt(t,-1,r)||$t(t):39==n?Bt(t,1,r)||Ft(t):38==n?qt(t,-1,r)||$t(t):40==n?Ht(t)||qt(t,1,r)||Ft(t):r==(u.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Xt(t,e){var n=t.root.getSelection(),r=t.state.doc,o=t.docView.nearestDesc(n.focusNode),s=o&&0==o.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset),c=r.resolve(a),p,l,f;if(M(n)){for(p=c;o&&!o.node;)o=o.parent;if(o&&o.node.isAtom&&i.isSelectable(o.node)&&o.parent&&(!o.node.isInline||!Yt(n,o.dom))){var u=o.posBefore;l=new i(a==u?c:r.resolve(u))}}else p=r.resolve(t.docView.posFromDOM(n.anchorNode,n.anchorOffset));l||(l=ae(t,p,c,"pointer"==e||t.state.selection.head<c.pos&&!s?1:-1));return l}function Yt(t,e){for(var n=t.focusNode,r=t.focusOffset,o=r;n;){if(n==e)return 0==r||o==O(e);o=(r=y(n))+1,n=n.parentNode}}function Qt(t,e){var n=t.state.selection;if(ie(t,n),t.editable?t.hasFocus():pe(t)&&document.activeElement.contains(t.dom)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)oe(t);else{var o=n.anchor,i=n.head,s,a;!Zt||n instanceof r||(n.$from.parent.inlineContent||(s=te(t,n.from)),n.empty||n.$from.parent.inlineContent||(a=te(t,n.to))),t.docView.setSelection(o,i,t.root,e),Zt&&(s&&ne(s),a&&ne(a)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):o!=i&&(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&re(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}Tt.prototype.getPreMatch=function t(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},Tt.prototype.destroyBetween=function t(e,n){if(e!=n){for(var r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}},Tt.prototype.destroyRest=function t(){this.destroyBetween(this.index,this.top.children.length)},Tt.prototype.syncToMarks=function t(e,n,r){for(var o=0,i=this.stack.length>>1,s=Math.min(i,e.length);o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&!1!==e[o].type.spec.spanning;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);for(var a=-1,c=this.index;c<Math.min(this.index+3,this.top.children.length);c++)if(this.top.children[c].matchesMark(e[i])){a=c;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var p=ut.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,i++}},Tt.prototype.findNodeMatch=function t(e,n,r,o){var i=-1,s=o<0?void 0:this.getPreMatch(o),a=this.top.children;if(s&&s.matchesNode(e,n,r))i=a.indexOf(s);else for(var c=this.index,p=Math.min(a.length,c+5);c<p;c++){var l=a[c];if(l.matchesNode(e,n,r)&&this.preMatched.indexOf(l)<0){i=c;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},Tt.prototype.updateNextNode=function t(e,n,r,o,i){if(this.index==this.top.children.length)return!1;var s=this.top.children[this.index];if(s instanceof ht){var a=this.preMatched.indexOf(s);if(a>-1&&a+this.preMatchOffset!=i)return!1;var c=s.dom,p;if(!(this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&Ct(n,s.outerDeco)))&&s.update(e,n,r,o))return s.dom!=c&&(this.changed=!0),this.index++,!0}return!1},Tt.prototype.addNode=function t(e,n,r,o,i){this.top.children.splice(this.index++,0,ht.create(this.top,e,n,r,o,i)),this.changed=!0},Tt.prototype.placeWidget=function t(e,n,r){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{var o=new lt(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}},Tt.prototype.addTextblockHacks=function t(){for(var e=this.top.children[this.index-1];e instanceof ut;)e=e.children[e.children.length-1];if(!e||!(e instanceof mt)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var n=document.createElement("br");this.top.children.splice(this.index++,0,new vt(this.top,pt,n,null)),this.changed=!0}};var Zt=u.safari||u.chrome&&u.chrome_version<63;function te(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(u.safari&&i&&"false"==i.contentEditable)return ee(i);if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return ee(i);if(s)return ee(s)}}function ee(t){return t.contentEditable="true",u.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ne(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function re(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.hideSelectionGuard),t.dom.classList.remove("ProseMirror-hideselection"))})}function oe(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,y(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&u.ie&&u.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function ie(t,e){if(e instanceof i){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(se(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else se(t)}function se(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function ae(t,e,n,o){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||r.between(e,n,o)}function ce(t){return(!t.editable||t.root.activeElement==t.dom)&&pe(t)}function pe(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function le(t){var e=t.docView.domFromPos(t.state.selection.anchor),n=t.root.getSelection();return x(e.node,e.offset,n.anchorNode,n.anchorOffset)}function fe(t,e,n){var r=t.docView.parseRange(e,n),o=r.node,i=r.fromOffset,s=r.toOffset,a=r.from,c=r.to,l=t.root.getSelection(),f=null,h=l.anchorNode;if(h&&t.dom.contains(1==h.nodeType?h:h.parentNode)&&(f=[{node:h,offset:l.anchorOffset}],M(l)||f.push({node:l.focusNode,offset:l.focusOffset})),u.chrome&&8===t.lastKeyCode)for(var d=s;d>i;d--){var m=o.childNodes[d-1],v=m.pmViewDesc;if("BR"==m.nodeType&&!v){s=d;break}if(!v||v.size)break}var g=t.state.doc,y=t.someProp("domParser")||p.fromSchema(t.state.schema),w=g.resolve(a),b=null,x=y.parse(o,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:!0,from:i,to:s,preserveWhitespace:!w.parent.type.spec.code||"full",editableContent:!0,findPositions:f,ruleFromNode:ue,context:w});if(f&&null!=f[0].pos){var k=f[0].pos,S=f[1]&&f[1].pos;null==S&&(S=k),b={anchor:k+a,head:S+a}}return{doc:x,sel:b,from:a,to:c}}function ue(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(u.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||u.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function he(t,e,n,i,s){if(e<0){var a=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,c=Xt(t,a);if(!t.state.selection.eq(c)){var p=t.state.tr.setSelection(c);"pointer"==a?p.setMeta("pointer",!0):"key"==a&&p.scrollIntoView(),t.dispatch(p)}}else{var l=t.state.doc.resolve(e),f=l.sharedDepth(n);e=l.before(f+1),n=t.state.doc.resolve(n).after(f+1);var h=t.state.selection,d=fe(t,e,n),m=t.state.doc,v=m.slice(d.from,d.to),g,y;8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(g=t.state.selection.to,y="end"):(g=t.state.selection.from,y="start"),t.lastKeyCode=null;var w=ye(v.content,d.doc.content,d.from,g,y);if(!w){if(!(i&&h instanceof r&&!h.empty&&h.$head.sameParent(h.$anchor))||t.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){var b=de(t,t.state.doc,d.sel);b&&!b.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(b))}return}w={start:h.from,endA:h.to,endB:h.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&w.start==w.endB&&t.state.selection instanceof r&&(w.start>t.state.selection.from&&w.start<=t.state.selection.from+2?w.start=t.state.selection.from:w.endA<t.state.selection.to&&w.endA>=t.state.selection.to-2&&(w.endB+=t.state.selection.to-w.endA,w.endA=t.state.selection.to)),u.ie&&u.ie_version<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>d.from&&"  "==d.doc.textBetween(w.start-d.from-1,w.start-d.from+1)&&(w.start--,w.endA--,w.endB--);var x=d.doc.resolveNoCache(w.start-d.from),k=d.doc.resolveNoCache(w.endB-d.from),S;if((u.ios&&t.lastIOSEnter>Date.now()-100&&(!x.sameParent(k)||s.some((function(t){return"DIV"==t.nodeName})))||!x.sameParent(k)&&x.pos<d.doc.content.size&&(S=o.findFrom(d.doc.resolve(x.pos+1),1,!0))&&S.head==k.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,T(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>w.start&&ve(m,w.start,w.endA,x,k)&&t.someProp("handleKeyDown",(function(e){return e(t,T(8,"Backspace"))})))u.android&&u.chrome&&t.domObserver.suppressSelectionUpdates();else{var O=w.start,C=w.endA,M,N,D,E;if(x.sameParent(k)&&x.parent.inlineContent)if(x.pos==k.pos)u.ie&&u.ie_version<=11&&0==x.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Qt(t)}),20)),M=t.state.tr.delete(O,C),N=m.resolve(w.start).marksAcross(m.resolve(w.endA));else if(w.endA==w.endB&&(E=m.resolve(w.start))&&(D=me(x.parent.content.cut(x.parentOffset,k.parentOffset),E.parent.content.cut(E.parentOffset,w.endA-E.start()))))M=t.state.tr,"add"==D.type?M.addMark(O,C,D.mark):M.removeMark(O,C,D.mark);else if(x.parent.child(x.index()).isText&&x.index()==k.index()-(k.textOffset?0:1)){var A=x.parent.textBetween(x.parentOffset,k.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,O,C,A)})))return;M=t.state.tr.insertText(A,O,C)}if(M||(M=t.state.tr.replace(O,C,d.doc.slice(w.start-d.from,w.endB-d.from))),d.sel){var j=de(t,M.doc,d.sel);j&&!(u.chrome&&u.android&&t.composing&&j.empty&&j.head==O||u.ie&&j.empty&&j.head==O)&&M.setSelection(j)}N&&M.ensureMarks(N),t.dispatch(M.scrollIntoView())}}}function de(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:ae(t,e.resolve(n.anchor),e.resolve(n.head))}function me(t,e){for(var n=t.firstChild.marks,r=e.firstChild.marks,o=n,i=r,s,c,p,l=0;l<r.length;l++)o=r[l].removeFromSet(o);for(var f=0;f<n.length;f++)i=n[f].removeFromSet(i);if(1==o.length&&0==i.length)c=o[0],s="add",p=function(t){return t.mark(c.addToSet(t.marks))};else{if(0!=o.length||1!=i.length)return null;c=i[0],s="remove",p=function(t){return t.mark(c.removeFromSet(t.marks))}}for(var u=[],h=0;h<e.childCount;h++)u.push(p(e.child(h)));if(a.from(u).eq(t))return{mark:c,type:s}}function ve(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||ge(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=t.resolve(ge(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||ge(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function ge(t,e,n){for(var r=t.depth,o=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n)for(var i=t.node(r).maybeChild(t.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function ye(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,c=s.b,p,l;"end"==o&&(r-=a+Math.max(0,i-Math.min(a,c))-i);if(a<i&&t.size<e.size)c=(i-=r<=i&&r>=a?i-r:0)+(c-a),a=i;else if(c<i){var f;a=(i-=r<=i&&r>=c?i-r:0)+(a-c),c=i}return{start:i,endA:a,endB:c}}function we(t,e){for(var n=[],r=e.content,o=e.openStart,i=e.openEnd;o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var c=t.someProp("clipboardSerializer")||s.fromSchema(t.state.schema),p=De(),l=p.createElement("div"),f;l.appendChild(c.serializeFragment(r,{document:p}));for(var u=l.firstChild,h;u&&1==u.nodeType&&(h=Te[u.nodeName.toLowerCase()]);){for(var d=h.length-1;d>=0;d--){for(var m=p.createElement(h[d]);l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m)}u=l.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n)),{dom:l,text:t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n")}}function be(t,e,n,r,o){var i,s=o.parent.type.spec.code,c;if(!n&&!e)return null;var f=e&&(r||s||!n);if(f){if(t.someProp("transformPastedText",(function(t){e=t(e)})),s)return new l(a.from(t.state.schema.text(e)),0,0);var u=t.someProp("clipboardTextParser",(function(t){return t(e,o)}));u?c=u:(i=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){i.appendChild(document.createElement("p")).textContent=t})))}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),i=Ee(n);var h=i&&i.querySelector("[data-pm-slice]"),d=h&&/^(\d+) (\d+) (.*)/.exec(h.getAttribute("data-pm-slice"));if(!c){var m=t.someProp("clipboardParser")||t.someProp("domParser")||p.fromSchema(t.state.schema);c=m.parseSlice(i,{preserveWhitespace:!(!f&&!d),context:o})}return c=d?Ae(Me(c,+d[1],+d[2]),d[3]):l.maxOpen(xe(c.content,o),!1),t.someProp("transformPasted",(function(t){c=t(c)})),c}function xe(t,e){if(t.childCount<2)return t;for(var n=function(n){var r,o=e.node(n).contentMatchAt(e.index(n)),i=void 0,s=[];if(t.forEach((function(t){if(s){var e=o.findWrapping(t.type),n;if(!e)return s=null;if(n=s.length&&i.length&&Se(e,i,t,s[s.length-1],0))s[s.length-1]=n;else{s.length&&(s[s.length-1]=Oe(s[s.length-1],i.length));var r=ke(t,e);s.push(r),o=o.matchType(r.type,r.attrs),i=e}}})),s)return{v:a.from(s)}},r=e.depth;r>=0;r--){var o=n(r);if(o)return o.v}return t}function ke(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].create(null,a.from(t));return t}function Se(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){var i=Se(t,e,n,r.lastChild,o+1),s;if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(a.from(ke(n,t,o+1))))}}function Oe(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,Oe(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(a.empty,!0);return t.copy(n.append(r))}function Ce(t,e,n,r,o,i){var s=e<0?t.firstChild:t.lastChild,c=s.content;return o<r-1&&(c=Ce(c,e,n,r,o+1,i)),o>=n&&(c=e<0?s.contentMatchAt(0).fillBefore(c,t.childCount>1||i<=o).append(c):c.append(s.contentMatchAt(s.childCount).fillBefore(a.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(c))}function Me(t,e,n){return e<t.openStart&&(t=new l(Ce(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new l(Ce(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var Te={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Ne=null;function De(){return Ne||(Ne=document.implementation.createHTMLDocument("title"))}function Ee(t){var e=/(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n=De().createElement("div"),r=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(t),o,i=0;(o=r&&Te[r[1].toLowerCase()])&&(t=o.map((function(t){return"<"+t+">"})).join("")+t+o.map((function(t){return"</"+t+">"})).reverse().join(""),i=o.length),n.innerHTML=t;for(var s=0;s<i;s++)n=n.firstChild;return n}function Ae(t,e){if(!t.size)return t;var n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch(f){return t}for(var o=t.content,i=t.openStart,s=t.openEnd,c=r.length-2;c>=0;c-=2){var p=n.nodes[r[c]];if(!p||p.hasRequiredAttrs())break;o=a.from(p.create(r[c+1],o)),i++,s++}return new l(o,i,s)}var je={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Re=u.ie&&u.ie_version<=11,Ie=function t(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Ie.prototype.set=function t(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},Ie.prototype.eq=function t(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Pe=function t(e,n){var r=this;this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=!1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)r.queue.push(t[e]);u.ie&&u.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?r.flushSoon():r.flush()})),this.currentSelection=new Ie,Re&&(this.onCharData=function(t){r.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Pe.prototype.flushSoon=function t(){var e=this;this.flushingSoon||(this.flushingSoon=!0,window.setTimeout((function(){e.flushingSoon=!1,e.flush()}),20))},Pe.prototype.start=function t(){this.observer&&this.observer.observe(this.view.dom,je),Re&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Pe.prototype.stop=function t(){var e=this;if(this.observer){var n=this.observer.takeRecords();if(n.length){for(var r=0;r<n.length;r++)this.queue.push(n[r]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}Re&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Pe.prototype.connectSelection=function t(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Pe.prototype.disconnectSelection=function t(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Pe.prototype.suppressSelectionUpdates=function t(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},Pe.prototype.onSelectionChange=function t(){if(ce(this.view)){if(this.suppressingSelectionUpdates)return Qt(this.view);if(u.ie&&u.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&x(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},Pe.prototype.setCurSelection=function t(){this.currentSelection.set(this.view.root.getSelection())},Pe.prototype.ignoreSelectionChange=function t(e){if(0==e.rangeCount)return!0;var n=e.getRangeAt(0).commonAncestorContainer,r=this.view.docView.nearestDesc(n);return r&&r.ignoreMutation({type:"selection",target:3==n.nodeType?n.parentNode:n})},Pe.prototype.flush=function t(){if(this.view.docView&&!this.flushingSoon){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var n=this.view.root.getSelection(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&pe(this.view)&&!this.ignoreSelectionChange(n),o=-1,i=-1,s=!1,a=[];if(this.view.editable)for(var c=0;c<e.length;c++){var p=this.registerMutation(e[c],a);p&&(o=o<0?p.from:Math.min(p.from,o),i=i<0?p.to:Math.max(p.to,i),p.typeOver&&!this.view.composing&&(s=!0))}if(u.gecko&&a.length>1){var l=a.filter((function(t){return"BR"==t.nodeName}));if(2==l.length){var f=l[0],h=l[1];f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}}(o>-1||r)&&(o>-1&&(this.view.docView.markDirty(o,i),Be(this.view)),this.handleDOMChange(o,i,s,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(n)||Qt(this.view))}},Pe.prototype.registerMutation=function t(e,n){if(n.indexOf(e.target)>-1)return null;var r=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(r==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!r||r.ignoreMutation(e))return null;if("childList"==e.type){var o=e.previousSibling,i=e.nextSibling,s;if(u.ie&&u.ie_version<=11&&e.addedNodes.length)for(var a=0;a<e.addedNodes.length;a++){var c=e.addedNodes[a],p=c.previousSibling,l=c.nextSibling;(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(o=p),(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(i=l)}for(var f=o&&o.parentNode==e.target?y(o)+1:0,h=r.localPosFromDOM(e.target,f,-1),d=i&&i.parentNode==e.target?y(i):e.target.childNodes.length,m=0;m<e.addedNodes.length;m++)n.push(e.addedNodes[m]);return{from:h,to:r.localPosFromDOM(e.target,d,1)}}return"attributes"==e.type?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var ze=!1;function Be(t){ze||(ze=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var _e={},Ve={};function $e(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new Pe(t,(function(e,n,r,o){return he(t,e,n,r,o)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=_e[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!We(t,e)||qe(t,e)||!t.editable&&e.type in Ve||n(t,e)})};for(var n in _e)e(n);u.safari&&t.dom.addEventListener("input",(function(){return null})),Je(t)}function Fe(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function Le(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout)}function Je(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return qe(t,e)})}))}function qe(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function We(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Ke(t,e){qe(t,e)||!_e[e.type]||!t.editable&&e.type in Ve||_e[e.type](t,e)}function He(t){return{left:t.clientX,top:t.clientY}}function Ue(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Ge(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function Xe(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function Ye(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),r=n.nodeAfter;return!!(r&&r.isAtom&&i.isSelectable(r))&&(Xe(t,new i(n),"pointer"),!0)}function Qe(t,e){if(-1==e)return!1;var n=t.state.selection,r,o;n instanceof i&&(r=n.node);for(var s=t.state.doc.resolve(e),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(i.isSelectable(c)){o=r&&n.$from.depth>0&&a>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?s.before(n.$from.depth):s.before(a);break}}return null!=o&&(Xe(t,i.create(t.state.doc,o),"pointer"),!0)}function Ze(t,e,n,r,o){return Ge(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(function(n){return n(t,e,r)}))||(o?Qe(t,n):Ye(t,n))}function tn(t,e,n,r){return Ge(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function en(t,e,n,r){return Ge(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(function(n){return n(t,e,r)}))||nn(t,n)}function nn(t,e){var n=t.state.doc;if(-1==e)return!!n.inlineContent&&(Xe(t,r.create(n,0,n.content.size),"pointer"),!0);for(var o=n.resolve(e),s=o.depth+1;s>0;s--){var a=s>o.depth?o.nodeAfter:o.node(s),c=o.before(s);if(a.inlineContent)Xe(t,r.create(n,c+1,c+1+a.content.size),"pointer");else{if(!i.isSelectable(a))continue;Xe(t,i.create(n,c),"pointer")}return!0}}function rn(t){return ln(t)}Ve.keydown=function(t,e){t.shiftKey=16==e.keyCode||e.shiftKey,an(t,e)||(t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!u.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey?t.someProp("handleKeyDown",(function(n){return n(t,e)}))||Gt(t,e)?e.preventDefault():Fe(t,"key"):t.lastIOSEnter=Date.now())},Ve.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},Ve.keypress=function(t,e){if(!(an(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||u.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof r&&n.$from.sameParent(n.$to))){var o=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,o)}))||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),e.preventDefault()}}};var on=u.mac?"metaKey":"ctrlKey";_e.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=rn(t),r=Date.now(),o="singleClick";r-t.lastClick.time<500&&Ue(e,t.lastClick)&&!e[on]&&("singleClick"==t.lastClick.type?o="doubleClick":"doubleClick"==t.lastClick.type&&(o="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:o};var i=t.posAtCoords(He(e));i&&("singleClick"==o?t.mouseDown=new sn(t,i,e,n):("doubleClick"==o?tn:en)(t,i.pos,i.inside,e)?e.preventDefault():Fe(t,"pointer"))};var sn=function t(e,n,r,o){var s=this,a,c;if(this.view=e,this.startDoc=e.state.doc,this.pos=n,this.event=r,this.flushed=o,this.selectNode=r[on],this.allowDefault=r.shiftKey,n.inside>-1)a=e.state.doc.nodeAt(n.inside),c=n.inside;else{var p=e.state.doc.resolve(n.pos);a=p.parent,c=p.depth?p.before():0}this.mightDrag=null;var l=o?null:r.target,f=l?e.docView.nearestDesc(l,!0):null;this.target=f?f.dom:null,(a.type.spec.draggable&&!1!==a.type.spec.selectable||e.state.selection instanceof i&&c==e.state.selection.from)&&(this.mightDrag={node:a,pos:c,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&u.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Fe(e,"pointer")};function an(t,e){return!!t.composing||!!(u.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}sn.prototype.done=function t(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},sn.prototype.up=function t(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(He(e))),this.allowDefault||!n?Fe(this.view,"pointer"):Ze(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():!this.flushed&&(!u.chrome||this.view.state.selection instanceof r||n.pos!=this.view.state.selection.from&&n.pos!=this.view.state.selection.to)?Fe(this.view,"pointer"):(Xe(this.view,o.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault())}},sn.prototype.move=function t(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Fe(this.view,"pointer")},_e.touchdown=function(t){rn(t),Fe(t,"pointer")},_e.contextmenu=function(t){return rn(t)};var cn=u.android?5e3:-1;function pn(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return ln(t)}),e))}function ln(t,e){for(t.composing=!1;t.compositionNodes.length>0;)t.compositionNodes.pop().markParentsDirty();return!(!e&&!t.docView.dirty)&&(t.updateState(t.state),!0)}function fn(t,e){var n=t.dom.ownerDocument,r=n.body.appendChild(n.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),i=n.createRange();i.selectNodeContents(e),t.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout((function(){n.body.removeChild(r),t.focus()}),50)}Ve.compositionstart=Ve.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),ln(t,!0),t.markCursor=null;else if(ln(t),u.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){r.collapse(s,s.nodeValue.length);break}o=s,i=-1}t.composing=!0}pn(t,cn)},Ve.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,pn(t,20))};var un=u.ie&&u.ie_version<15||u.ios&&u.webkit_version<604;function hn(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}function dn(t,e){var n=t.dom.ownerDocument,r=t.shiftKey||t.state.selection.$from.parent.type.spec.code,o=n.body.appendChild(n.createElement(r?"textarea":"div"));r||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout((function(){t.focus(),n.body.removeChild(o),r?mn(t,o.value,null,e):mn(t,o.textContent,o.innerHTML,e)}),50)}function mn(t,e,n,r){var o=be(t,e,n,t.shiftKey,t.state.selection.$from);if(!t.someProp("handlePaste",(function(e){return e(t,r,o||l.empty)}))&&o){var i=hn(o),s=i?t.state.tr.replaceSelectionWith(i,t.shiftKey):t.state.tr.replaceSelection(o);t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}_e.copy=Ve.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var o=un?null:e.clipboardData,i,s=we(t,n.content()),a=s.dom,c=s.text;o?(e.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",c)):fn(t,a),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Ve.paste=function(t,e){var n=un?null:e.clipboardData,r=n&&n.getData("text/html"),o=n&&n.getData("text/plain");n&&(r||o||n.files.length)?(mn(t,o,r,e),e.preventDefault()):dn(t,e)};var vn=function t(e,n){this.slice=e,this.move=n},gn=u.mac?"altKey":"ctrlKey";for(var yn in _e.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var r=t.state.selection,o=r.empty?null:t.posAtCoords(He(e));if(o&&o.pos>=r.from&&o.pos<=(r instanceof i?r.to-1:r.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(i.create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var s=t.docView.nearestDesc(e.target,!0);if(!s||!s.node.type.spec.draggable||s==t.docView)return;t.dispatch(t.state.tr.setSelection(i.create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),c=we(t,a),p=c.dom,l=c.text;e.dataTransfer.clearData(),e.dataTransfer.setData(un?"Text":"text/html",p.innerHTML),un||e.dataTransfer.setData("text/plain",l),t.dragging=new vn(a,!e[gn])}},_e.dragend=function(t){window.setTimeout((function(){return t.dragging=null}),50)},Ve.dragover=Ve.dragenter=function(t,e){return e.preventDefault()},Ve.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var r=t.posAtCoords(He(e));if(r){var o=t.state.doc.resolve(r.pos);if(o){var s=n&&n.slice||be(t,e.dataTransfer.getData(un?"Text":"text/plain"),un?null:e.dataTransfer.getData("text/html"),!1,o);if(s&&(e.preventDefault(),!t.someProp("handleDrop",(function(r){return r(t,e,s,n&&n.move)})))){var a=s?f(t.state.doc,o.pos,s):o.pos;null==a&&(a=o.pos);var c=t.state.tr;n&&n.move&&c.deleteSelection();var p=c.mapping.map(a),l=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,u=c.doc;if(l?c.replaceRangeWith(p,p,s.content.firstChild):c.replaceRange(p,p,s),!c.doc.eq(u)){var h=c.doc.resolve(p);l&&i.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild)?c.setSelection(new i(h)):c.setSelection(ae(t,h,c.doc.resolve(c.mapping.map(a)))),t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))}}}}}},_e.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0)},_e.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},_e.beforeinput=function(t,e){if(u.chrome&&u.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,T(8,"Backspace"))})))){var e,r=t.state.selection.$cursor;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())}}),50)}},Ve)_e[yn]=Ve[yn];function wn(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var bn=function t(e,n){this.spec=n||Mn,this.side=this.spec.side||0,this.toDOM=e};bn.prototype.map=function t(e,n,r,o){var i=e.mapResult(n.from+o,this.side<0?-1:1),s=i.pos,a;return i.deleted?null:new Sn(s-r,s-r,this)},bn.prototype.valid=function t(){return!0},bn.prototype.eq=function t(e){return this==e||e instanceof bn&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&wn(this.spec,e.spec))};var xn=function t(e,n){this.spec=n||Mn,this.attrs=e};xn.prototype.map=function t(e,n,r,o){var i=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new Sn(i,s,this)},xn.prototype.valid=function t(e,n){return n.from<n.to},xn.prototype.eq=function t(e){return this==e||e instanceof xn&&wn(this.attrs,e.attrs)&&wn(this.spec,e.spec)},xn.is=function t(e){return e.type instanceof xn};var kn=function t(e,n){this.spec=n||Mn,this.attrs=e};kn.prototype.map=function t(e,n,r,o){var i=e.mapResult(n.from+o,1);if(i.deleted)return null;var s=e.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new Sn(i.pos-r,s.pos-r,this)},kn.prototype.valid=function t(e,n){var r=e.content.findIndex(n.from),o=r.index,i=r.offset;return i==n.from&&i+e.child(o).nodeSize==n.to},kn.prototype.eq=function t(e){return this==e||e instanceof kn&&wn(this.attrs,e.attrs)&&wn(this.spec,e.spec)};var Sn=function t(e,n,r){this.from=e,this.to=n,this.type=r},On={spec:{configurable:!0}};Sn.prototype.copy=function t(e,n){return new Sn(e,n,this.type)},Sn.prototype.eq=function t(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to},Sn.prototype.map=function t(e,n,r){return this.type.map(e,this,n,r)},Sn.widget=function t(e,n,r){return new Sn(e,e,new bn(n,r))},Sn.inline=function t(e,n,r,o){return new Sn(e,n,new xn(r,o))},Sn.node=function t(e,n,r,o){return new Sn(e,n,new kn(r,o))},On.spec.get=function(){return this.type.spec},Object.defineProperties(Sn.prototype,On);var Cn=[],Mn={},Tn=function t(e,n){this.local=e&&e.length?e:Cn,this.children=n&&n.length?n:Cn};Tn.create=function t(e,n){return n.length?Pn(n,e,0,Mn):Nn},Tn.prototype.find=function t(e,n,r){var o=[];return this.findInner(null==e?0:e,null==n?1e9:n,o,0,r),o},Tn.prototype.findInner=function t(e,n,r,o,i){for(var s=0;s<this.local.length;s++){var a=this.local[s];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(var c=0;c<this.children.length;c+=3)if(this.children[c]<n&&this.children[c+1]>e){var p=this.children[c]+1;this.children[c+2].findInner(e-p,n-p,r,o+p,i)}},Tn.prototype.map=function t(e,n,r){return this==Nn||0==e.maps.length?this:this.mapInner(e,n,0,0,r||Mn)},Tn.prototype.mapInner=function t(e,n,r,o,i){for(var s,a=0;a<this.local.length;a++){var c=this.local[a].map(e,r,o);c&&c.type.valid(n,c)?(s||(s=[])).push(c):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?En(this.children,s,e,n,r,o,i):s?new Tn(s.sort(zn)):Nn},Tn.prototype.add=function t(e,n){return n.length?this==Nn?Tn.create(e,n):this.addInner(e,n,0):this},Tn.prototype.addInner=function t(e,n,r){var o=this,i,s=0;e.forEach((function(t,e){var a=e+r,c;if(c=Rn(n,t,a)){for(i||(i=o.children.slice());s<i.length&&i[s]<e;)s+=3;i[s]==e?i[s+2]=i[s+2].addInner(t,c,a+1):i.splice(s,0,e,e+t.nodeSize,Pn(c,t,a+1,Mn)),s+=3}}));var a=An(s?In(n):n,-r);return new Tn(a.length?this.local.concat(a).sort(zn):this.local,i||this.children)},Tn.prototype.remove=function t(e){return 0==e.length||this==Nn?this:this.removeInner(e,0)},Tn.prototype.removeInner=function t(e,n){for(var r=this.children,o=this.local,i=0;i<r.length;i+=3){for(var s=void 0,a=r[i]+n,c=r[i+1]+n,p=0,l=void 0;p<e.length;p++)(l=e[p])&&l.from>a&&l.to<c&&(e[p]=null,(s||(s=[])).push(l));if(s){r==this.children&&(r=this.children.slice());var f=r[i+2].removeInner(s,a+1);f!=Nn?r[i+2]=f:(r.splice(i,3),i-=3)}}if(o.length)for(var u=0,h=void 0;u<e.length;u++)if(h=e[u])for(var d=0;d<o.length;d++)o[d].type.eq(h.type)&&(o==this.local&&(o=this.local.slice()),o.splice(d--,1));return r==this.children&&o==this.local?this:o.length||r.length?new Tn(o,r):Nn},Tn.prototype.forChild=function t(e,n){if(this==Nn)return this;if(n.isLeaf)return Tn.empty;for(var r,o,i=0;i<this.children.length;i+=3)if(this.children[i]>=e){this.children[i]==e&&(r=this.children[i+2]);break}for(var s=e+1,a=s+n.content.size,c=0;c<this.local.length;c++){var p=this.local[c];if(p.from<a&&p.to>s&&p.type instanceof xn){var l=Math.max(s,p.from)-s,f=Math.min(a,p.to)-s;l<f&&(o||(o=[])).push(p.copy(l,f))}}if(o){var u=new Tn(o.sort(zn));return r?new Dn([u,r]):u}return r||Nn},Tn.prototype.eq=function t(e){if(this==e)return!0;if(!(e instanceof Tn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0},Tn.prototype.locals=function t(e){return Bn(this.localsInner(e))},Tn.prototype.localsInner=function t(e){if(this==Nn)return Cn;if(e.inlineContent||!this.local.some(xn.is))return this.local;for(var n=[],r=0;r<this.local.length;r++)this.local[r].type instanceof xn||n.push(this.local[r]);return n};var Nn=new Tn;Tn.empty=Nn,Tn.removeOverlap=Bn;var Dn=function t(e){this.members=e};function En(t,e,n,r,o,i,s){for(var a=t.slice(),c=function(t,e,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],p=void 0;-1==c||t>c+i||(e>=a[s]+i?a[s+1]=-1:(p=r-n-(e-t)+(i-o))&&(a[s]+=p,a[s+1]+=p))}},p=0;p<n.maps.length;p++)n.maps[p].forEach(c);for(var l=!1,f=0;f<a.length;f+=3)if(-1==a[f+1]){var u=n.map(a[f]+i),h=u-o;if(h<0||h>=r.content.size){l=!0;continue}var d,m=n.map(t[f+1]+i,-1)-o,v=r.content.findIndex(h),g=v.index,y=v.offset,w=r.maybeChild(g);if(w&&y==h&&y+w.nodeSize==m){var b=a[f+2].mapInner(n,w,u+1,a[f]+i+1,s);b!=Nn?(a[f]=h,a[f+1]=m,a[f+2]=b):(a[f+1]=-2,l=!0)}else l=!0}if(l){var x,k=Pn(jn(a,t,e||[],n,o,i,s),r,0,s);e=k.local;for(var S=0;S<a.length;S+=3)a[S+1]<0&&(a.splice(S,3),S-=3);for(var O=0,C=0;O<k.children.length;O+=3){for(var M=k.children[O];C<a.length&&a[C]<M;)C+=3;a.splice(C,0,k.children[O],k.children[O+1],k.children[O+2])}}return new Tn(e&&e.sort(zn),a)}function An(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new Sn(o.from+e,o.to+e,o.type))}return n}function jn(t,e,n,r,o,i,s){function a(t,e){for(var i=0;i<t.local.length;i++){var c=t.local[i].map(r,o,e);c?n.push(c):s.onRemove&&s.onRemove(t.local[i].spec)}for(var p=0;p<t.children.length;p+=3)a(t.children[p+2],t.children[p]+e+1)}for(var c=0;c<t.length;c+=3)-1==t[c+1]&&a(t[c+2],e[c]+i+1);return n}function Rn(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,s=void 0;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function In(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Pn(t,e,n,r){var o=[],i=!1;e.forEach((function(e,s){var a=Rn(t,e,s+n);if(a){i=!0;var c=Pn(a,e,n+s+1,r);c!=Nn&&o.push(s,s+e.nodeSize,c)}}));for(var s=An(i?In(t):t,-n).sort(zn),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Tn(s,o):Nn}function zn(t,e){return t.from-e.from||t.to-e.to}function Bn(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),_n(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),_n(e,o+1,i.copy(r.to,i.to)))}}return e}function _n(t,e,n){for(;e<t.length&&zn(n,t[e])>0;)e++;t.splice(e,0,n)}function Vn(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=Nn&&e.push(r)})),t.cursorWrapper&&e.push(Tn.create(t.state.doc,[t.cursorWrapper.deco])),Dn.from(e)}Dn.prototype.forChild=function t(e,n){if(n.isLeaf)return Tn.empty;for(var r=[],o=0;o<this.members.length;o++){var i=this.members[o].forChild(e,n);i!=Nn&&(i instanceof Dn?r=r.concat(i.members):r.push(i))}return Dn.from(r)},Dn.prototype.eq=function t(e){if(!(e instanceof Dn)||e.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0},Dn.prototype.locals=function t(e){for(var n,r=!0,o=0;o<this.members.length;o++){var t=this.members[o].localsInner(e);if(t.length)if(n){r&&(n=n.slice(),r=!1);for(var i=0;i<t.length;i++)n.push(t[i])}else n=t}return n?Bn(r?n:n.sort(zn)):Cn},Dn.from=function t(e){switch(e.length){case 0:return Nn;case 1:return e[0];default:return new Dn(e)}};var $n=function t(e,n){this._props=n,this.state=n.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=qn(this),this.markCursor=null,this.cursorWrapper=null,Jn(this),this.nodeViews=Kn(this),this.docView=dt(this.state.doc,Ln(this),Vn(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,$e(this),this.pluginViews=[],this.updatePluginViews()},Fn={props:{configurable:!0},root:{configurable:!0}};function Ln(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),[Sn.node(0,t.state.doc.content.size,e)]}function Jn(t){var e=t.state.selection,n=e.$head,r=e.$anchor,o=e.visible;if(t.markCursor){var i=document.createElement("img");i.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:i,deco:Sn.widget(n.pos,i,{raw:!0,marks:t.markCursor})}}else if(o||n.pos!=r.pos)t.cursorWrapper=null;else{var s;!t.cursorWrapper||t.cursorWrapper.dom.childNodes.length?((s=document.createElement("div")).style.position="absolute",s.style.left="-100000px"):t.cursorWrapper.deco.pos!=n.pos&&(s=t.cursorWrapper.dom),s&&(t.cursorWrapper={dom:s,deco:Sn.widget(n.pos,s,{raw:!0})})}}function qn(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function Wn(t,e){var n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.node(n)!=e.$anchor.node(n)}function Kn(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}function Hn(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r}Fn.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},$n.prototype.update=function t(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Je(this),this._props=e,this.updateStateInner(e.state,!0)},$n.prototype.setProps=function t(e){var n={};for(var r in this._props)n[r]=this._props[r];for(var o in n.state=this.state,e)n[o]=e[o];this.update(n)},$n.prototype.updateState=function t(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},$n.prototype.updateStateInner=function t(e,n){var r=this,o=this.state,s=!1;if(this.state=e,n){var a=Kn(this);Hn(a,this.nodeViews)&&(this.nodeViews=a,s=!0),Je(this)}this.editable=qn(this),Jn(this);var c=Vn(this),p=Ln(this),l=n?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,p,c),h=f||!e.selection.eq(o.selection),d="preserve"==l&&h&&null==this.dom.style.overflowAnchor&&A(this);if(h){this.domObserver.stop();var m=f&&(u.ie||u.chrome)&&!o.selection.empty&&!e.selection.empty&&Wn(o.selection,e.selection);f&&(!s&&this.docView.update(e.doc,p,c,this)||(this.docView.destroy(),this.docView=dt(e.doc,p,c,this.dom,this))),m||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&le(this))?Qt(this,m):(ie(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==l)this.dom.scrollTop=0;else if("to selection"==l){var v=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(r)}))||(e.selection instanceof i?E(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),v):E(this,this.coordsAtPos(e.selection.head),v))}else d&&R(d)},$n.prototype.destroyPluginViews=function t(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},$n.prototype.updatePluginViews=function t(e){if(e&&e.plugins==this.state.plugins)for(var n=0;n<this.pluginViews.length;n++){var r=this.pluginViews[n];r.update&&r.update(this,e)}else{this.destroyPluginViews();for(var o=0;o<this.state.plugins.length;o++){var i=this.state.plugins[o];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},$n.prototype.someProp=function t(e,n){var r=this._props&&this._props[e],o;if(null!=r&&(o=n?n(r):r))return o;var i=this.state.plugins;if(i)for(var s=0;s<i.length;s++){var a=i[s].props[e];if(null!=a&&(o=n?n(a):a))return o}},$n.prototype.hasFocus=function t(){return this.root.activeElement==this.dom},$n.prototype.focus=function t(){this.domObserver.stop(),this.editable&&z(this.dom),Qt(this),this.domObserver.start()},Fn.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},$n.prototype.posAtCoords=function t(e){return q(this,e)},$n.prototype.coordsAtPos=function t(e){return K(this,e)},$n.prototype.domAtPos=function t(e){return this.docView.domFromPos(e)},$n.prototype.nodeDOM=function t(e){var n=this.docView.descAt(e);return n?n.nodeDOM:null},$n.prototype.posAtDOM=function t(e,n,r){void 0===r&&(r=-1);var o=this.docView.posFromDOM(e,n,r);if(null==o)throw new RangeError("DOM position not inside the editor");return o},$n.prototype.endOfTextblock=function t(e,n){return nt(this,n||this.state,e)},$n.prototype.destroy=function t(){this.docView&&(Le(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Vn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},$n.prototype.dispatchEvent=function t(e){return Ke(this,e)},$n.prototype.dispatch=function t(e){var n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties($n.prototype,Fn)}}},"prosemirror-history":{"package.json":function t(e,n,t){t.exports={name:"prosemirror-history",version:"1.1.3",module:"dist/index.es.js",main:"dist/index.js"}},dist:{"index.es.js":function t(e,n,t){let r,o,i,s;t.export({HistoryState:()=>f,closeHistory:()=>x,history:()=>O,redo:()=>M,redoDepth:()=>N,undo:()=>C,undoDepth:()=>T}),t.link("rope-sequence",{default(t){r=t}},0),t.link("prosemirror-transform",{Mapping(t){o=t}},1),t.link("prosemirror-state",{PluginKey(t){i=t},Plugin(t){s=t}},2);var a=500,c=function t(e,n){this.items=e,this.eventCount=n};function p(t,e){var n;return t.forEach((function(t,r){if(t.selection&&0==e--)return n=r,!1})),t.slice(n)}c.prototype.popEvent=function t(e,n){var r=this;if(0==this.eventCount)return null;for(var o=this.items.length,i,s;;o--){var a;if(this.items.get(o-1).selection){--o;break}}n&&(i=this.remapping(o,this.items.length),s=i.maps.length);var p=e.tr,f,u,h=[],d=[];return this.items.forEach((function(t,e){if(!t.step)return i||(i=r.remapping(o,e+1),s=i.maps.length),s--,void d.push(t);if(i){d.push(new l(t.map));var n=t.step.map(i.slice(s)),a;n&&p.maybeStep(n).doc&&(a=p.mapping.maps[p.mapping.maps.length-1],h.push(new l(a,null,null,h.length+d.length))),s--,a&&i.appendMap(a,s)}else p.maybeStep(t.step);return t.selection?(f=i?t.selection.map(i.slice(s)):t.selection,u=new c(r.items.slice(0,o).append(d.reverse().concat(h)),r.eventCount-1),!1):void 0}),this.items.length,0),{remaining:u,transform:p,selection:f}},c.prototype.addTransform=function t(e,n,r,o){for(var i=[],s=this.eventCount,a=this.items,f=!o&&a.length?a.get(a.length-1):null,h=0;h<e.steps.length;h++){var d=e.steps[h].invert(e.docs[h]),m=new l(e.mapping.maps[h],d,n),v=void 0;(v=f&&f.merge(m))&&(m=v,h?i.pop():a=a.slice(0,a.length-1)),i.push(m),n&&(s++,n=null),o||(f=m)}var g=s-r.depth;return g>u&&(a=p(a,g),s-=g),new c(a.append(i),s)},c.prototype.remapping=function t(e,n){var r=new o;return this.items.forEach((function(t,n){var o=null!=t.mirrorOffset&&n-t.mirrorOffset>=e?r.maps.length-t.mirrorOffset:null;r.appendMap(t.map,o)}),e,n),r},c.prototype.addMaps=function t(e){return 0==this.eventCount?this:new c(this.items.append(e.map((function(t){return new l(t)}))),this.eventCount)},c.prototype.rebased=function t(e,n){if(!this.eventCount)return this;var r=[],o=Math.max(0,this.items.length-n),i=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach((function(t){t.selection&&a--}),o);var p=n;this.items.forEach((function(t){var n=i.getMirror(--p);if(null!=n){s=Math.min(s,n);var o=i.maps[n];if(t.step){var c=e.steps[n].invert(e.docs[n]),f=t.selection&&t.selection.map(i.slice(p+1,n));f&&a++,r.push(new l(o,c,f))}else r.push(new l(o))}}),o);for(var f=[],u=n;u<s;u++)f.push(new l(i.maps[u]));var h=this.items.slice(0,o).append(f).append(r),d=new c(h,a);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-r.length)),d},c.prototype.emptyItemCount=function t(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},c.prototype.compress=function t(e){void 0===e&&(e=this.items.length);var n=this.remapping(0,e),o=n.maps.length,i=[],s=0;return this.items.forEach((function(t,r){if(r>=e)i.push(t),t.selection&&s++;else if(t.step){var a=t.step.map(n.slice(o)),c=a&&a.getMap();if(o--,c&&n.appendMap(c,o),a){var p=t.selection&&t.selection.map(n.slice(o));p&&s++;var f=new l(c.invert(),a,p),u,h=i.length-1;(u=i.length&&i[h].merge(f))?i[h]=u:i.push(f)}}else t.map&&o--}),this.items.length,0),new c(r.from(i.reverse()),s)},c.empty=new c(r.empty,0);var l=function t(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o};l.prototype.merge=function t(e){if(this.step&&e.step&&!e.selection){var n=e.step.merge(this.step);if(n)return new l(n.getMap().invert(),n,this.selection)}};var f=function t(e,n,r,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o},u=20;function h(e,n,r,o){var i=r.getMeta(k),s;if(i)return i.historyState;r.getMeta(S)&&t.runSetters(e=new f(e.done,e.undone,null,0));var a=r.getMeta("appendedTransaction");if(0==r.steps.length)return e;if(a&&a.getMeta(k))return a.getMeta(k).redo?new f(e.done.addTransform(r,null,o,b(n)),e.undone,m(r.mapping.maps[r.steps.length-1]),e.prevTime):new f(e.done,e.undone.addTransform(r,null,o,b(n)),null,e.prevTime);if(!1===r.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(s=r.getMeta("rebased"))?new f(e.done.rebased(r,s),e.undone.rebased(r,s),v(e.prevRanges,r.mapping),e.prevTime):new f(e.done.addMaps(r.mapping.maps),e.undone.addMaps(r.mapping.maps),v(e.prevRanges,r.mapping),e.prevTime);var p=0==e.prevTime||!a&&(e.prevTime<(r.time||0)-o.newGroupDelay||!d(r,e.prevRanges)),l=a?v(e.prevRanges,r.mapping):m(r.mapping.maps[r.steps.length-1]);return new f(e.done.addTransform(r,p?n.selection.getBookmark():null,o,b(n)),c.empty,l,r.time)}function d(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var o=0;o<e.length;o+=2)t<=e[o+1]&&r>=e[o]&&(n=!0)})),n}function m(t){var e=[];return t.forEach((function(t,n,r,o){return e.push(r,o)})),e}function v(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function g(t,e,n,r){var o=b(e),i=k.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,o);if(s){var a=s.selection.resolve(s.transform.doc),c=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,o),p=new f(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(a).setMeta(k,{redo:r,historyState:p}).scrollIntoView())}}var y=!1,w=null;function b(t){var e=t.plugins;if(w!=e){y=!1,w=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){y=!0;break}}return y}function x(t){return t.setMeta(S,!0)}var k=new i("history"),S=new i("closeHistory");function O(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new s({key:k,state:{init:function t(){return new f(c.empty,c.empty,null,0)},apply:function e(n,r,o){return h(r,o,n,t)}},config:t})}function C(t,e){var n=k.getState(t);return!(!n||0==n.done.eventCount)&&(e&&g(n,t,e,!1),!0)}function M(t,e){var n=k.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&g(n,t,e,!0),!0)}function T(t){var e=k.getState(t);return e?e.done.eventCount:0}function N(t){var e=k.getState(t);return e?e.undone.eventCount:0}}}},"rope-sequence":{"package.json":function t(e,n,t){t.exports={name:"rope-sequence",version:"1.3.2",module:"dist/index.es.js",main:"dist/index.js"}},dist:{"index.es.js":function t(e,n,t){var r=200,o=function t(){};o.prototype.append=function t(e){return e.length?(e=o.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},o.prototype.prepend=function t(e){return e.length?o.from(e).append(this):this},o.prototype.appendInner=function t(e){return new s(this,e)},o.prototype.slice=function t(e,n){return void 0===e&&(e=0),void 0===n&&(n=this.length),e>=n?o.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))},o.prototype.get=function t(e){if(!(e<0||e>=this.length))return this.getInner(e)},o.prototype.forEach=function t(e,n,r){void 0===n&&(n=0),void 0===r&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)},o.prototype.map=function t(e,n,r){void 0===n&&(n=0),void 0===r&&(r=this.length);var o=[];return this.forEach((function(t,n){return o.push(e(t,n))}),n,r),o},o.from=function t(e){return e instanceof o?e:e&&e.length?new i(e):o.empty};var i=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function t(){return this.values},e.prototype.sliceInner=function t(n,r){return 0==n&&r==this.length?this:new e(this.values.slice(n,r))},e.prototype.getInner=function t(e){return this.values[e]},e.prototype.forEachInner=function t(e,n,r,o){for(var i=n;i<r;i++)if(!1===e(this.values[i],o+i))return!1},e.prototype.forEachInvertedInner=function t(e,n,r,o){for(var i=n-1;i>=r;i--)if(!1===e(this.values[i],o+i))return!1},e.prototype.leafAppend=function t(n){if(this.length+n.length<=200)return new e(this.values.concat(n.flatten()))},e.prototype.leafPrepend=function t(n){if(this.length+n.length<=200)return new e(n.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(o);o.empty=new i([]);var s=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function t(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function t(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},e.prototype.forEachInner=function t(e,n,r,o){var i=this.left.length;return!(n<i&&!1===this.left.forEachInner(e,n,Math.min(r,i),o))&&(!(r>i&&!1===this.right.forEachInner(e,Math.max(n-i,0),Math.min(this.length,r)-i,o+i))&&void 0)},e.prototype.forEachInvertedInner=function t(e,n,r,o){var i=this.left.length;return!(n>i&&!1===this.right.forEachInvertedInner(e,n-i,Math.max(r,i)-i,o+i))&&(!(r<i&&!1===this.left.forEachInvertedInner(e,Math.min(n,i),r,o))&&void 0)},e.prototype.sliceInner=function t(e,n){if(0==e&&n==this.length)return this;var r=this.left.length;return n<=r?this.left.slice(e,n):e>=r?this.right.slice(e-r,n-r):this.left.slice(e,r).append(this.right.slice(0,n-r))},e.prototype.leafAppend=function t(n){var r=this.right.leafAppend(n);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function t(n){var r=this.left.leafPrepend(n);if(r)return new e(r,this.right)},e.prototype.appendInner=function t(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(o),a=o;t.exportDefault(a)}}},"prosemirror-commands":{"package.json":function t(e,n,t){t.exports={name:"prosemirror-commands",version:"1.1.3",module:"dist/index.es.js",main:"dist/index.js"}},dist:{"index.es.js":function t(e,n,t){let r,o,i,s,a,c,p,l,f,u,h,d;function m(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function v(t,e,n){var o,i=t.selection.$cursor;if(!i||(n?!n.endOfTextblock("backward",t):i.parentOffset>0))return!1;var s=w(i);if(!s){var a=i.blockRange(),c=a&&r(a);return null!=c&&(e&&e(t.tr.lift(a,c).scrollIntoView()),!0)}var p=s.nodeBefore;if(!p.type.spec.isolating&&z(t,s,e))return!0;if(0==i.parent.content.size&&(g(p,"end")||f.isSelectable(p))){if(e){var l=t.tr.deleteRange(i.before(),i.after());l.setSelection(g(p,"end")?u.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):f.create(l.doc,s.pos-p.nodeSize)),e(l.scrollIntoView())}return!0}return!(!p.isAtom||s.depth!=i.depth-1)&&(e&&e(t.tr.delete(s.pos-p.nodeSize,s.pos).scrollIntoView()),!0)}function g(t,e){for(;t;t="start"==e?t.firstChild:t.lastChild)if(t.isTextblock)return!0;return!1}function y(t,e,n){var r,o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("backward",t):o.parentOffset>0))return!1;var i=w(o),s=i&&i.nodeBefore;return!(!s||!f.isSelectable(s))&&(e&&e(t.tr.setSelection(f.create(t.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)}function w(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function b(t,e,n){var r,o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size))return!1;var i=k(o);if(!i)return!1;var s=i.nodeAfter;if(z(t,i,e))return!0;if(0==o.parent.content.size&&(g(s,"start")||f.isSelectable(s))){if(e){var a=t.tr.deleteRange(o.before(),o.after());a.setSelection(g(s,"start")?u.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):f.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}return!(!s.isAtom||i.depth!=o.depth-1)&&(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0)}function x(t,e,n){var r,o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size))return!1;var i=k(o),s=i&&i.nodeAfter;return!(!s||!f.isSelectable(s))&&(e&&e(t.tr.setSelection(f.create(t.doc,i.pos)).scrollIntoView()),!0)}function k(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function S(t,e){var n=t.selection,r=n instanceof f,s;if(r){if(n.node.isTextblock||!o(t.doc,n.from))return!1;s=n.from}else if(null==(s=i(t.doc,n.from,-1)))return!1;if(e){var a=t.tr.join(s);r&&a.setSelection(f.create(a.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0}function O(t,e){var n=t.selection,r;if(n instanceof f){if(n.node.isTextblock||!o(t.doc,n.to))return!1;r=n.to}else if(null==(r=i(t.doc,n.to,1)))return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0}function C(t,e){var n=t.selection,o=n.$from,i=n.$to,s=o.blockRange(i),a=s&&r(s);return null!=a&&(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}function M(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}function T(t){for(var e=0;e<t.edgeCount;e++){var n,r=t.edge(e).type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function N(t,e){var n=t.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),s=r.indexAfter(-1),a=T(i.contentMatchAt(s));if(!i.canReplaceWith(s,s,a))return!1;if(e){var c=r.after(),p=t.tr.replaceWith(c,c,a.createAndFill());p.setSelection(u.near(p.doc.resolve(c),1)),e(p.scrollIntoView())}return!0}function D(t,e){var n=t.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var i=T(r.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){var s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(s,i.createAndFill());a.setSelection(h.create(a.doc,s+1)),e(a.scrollIntoView())}return!0}function E(t,e){var n,o=t.selection.$cursor;if(!o||o.parent.content.size)return!1;if(o.depth>1&&o.after()!=o.end(-1)){var i=o.before();if(s(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}var a=o.blockRange(),c=a&&r(a);return null!=c&&(e&&e(t.tr.lift(a,c).scrollIntoView()),!0)}function A(t,e){var n=t.selection,r=n.$from,o=n.$to;if(t.selection instanceof f&&t.selection.node.isBlock)return!(!r.parentOffset||!s(t.doc,r.pos))&&(e&&e(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(e){var i=o.parentOffset==o.parent.content.size,a=t.tr;t.selection instanceof h&&a.deleteSelection();var c=0==r.depth?null:T(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=i&&c?[{type:c}]:null,u=s(a.doc,a.mapping.map(r.pos),1,l);l||u||!s(a.doc,a.mapping.map(r.pos),1,c&&[{type:c}])||(l=[{type:c}],u=!0),u&&(a.split(a.mapping.map(r.pos),1,l),i||r.parentOffset||r.parent.type==c||!r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),p.from(c.create(),r.parent))||a.setNodeMarkup(a.mapping.map(r.before()),c)),e(a.scrollIntoView())}return!0}function j(t,e){return A(t,e&&function(n){var r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();r&&n.ensureMarks(r),e(n)})}function R(t,e){var n=t.selection,r=n.$from,o=n.to,i,s=r.sharedDepth(o);return 0!=s&&(i=r.before(s),e&&e(t.tr.setSelection(f.create(t.doc,i))),!0)}function I(t,e){return e&&e(t.tr.setSelection(new d(t.doc))),!0}function P(t,e,n){var r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!!(r&&i&&r.type.compatibleContent(i.type))&&(!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(s,s+1)||!i.isTextblock&&!o(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0))}function z(t,e,n){var i=e.nodeBefore,s=e.nodeAfter,c,f;if(i.type.spec.isolating||s.type.spec.isolating)return!1;if(P(t,e,n))return!0;if(e.parent.canReplace(e.index(),e.index()+1)&&(c=(f=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&f.matchType(c[0]||s.type).validEnd){if(n){for(var h=e.pos+s.nodeSize,d=p.empty,m=c.length-1;m>=0;m--)d=p.from(c[m].create(null,d));d=p.from(i.copy(d));var v=t.tr.step(new a(e.pos-1,h,e.pos,h,new l(d,1,0),c.length,!0)),g=h+2*c.length;o(v.doc,g)&&v.join(g),n(v.scrollIntoView())}return!0}var y=u.findFrom(e,1),w=y&&y.$from.blockRange(y.$to),b=w&&r(w);return null!=b&&b>=e.depth&&(n&&n(t.tr.lift(w,b).scrollIntoView()),!0)}function B(t,e){return function(n,r){var o=n.selection,i=o.$from,s=o.$to,a=i.blockRange(s),p=a&&c(a,t,e);return!!p&&(r&&r(n.tr.wrap(a,p).scrollIntoView()),!0)}}function _(t,e){return function(n,r){var o=n.selection,i=o.from,s=o.to,a=!1;return n.doc.nodesBetween(i,s,(function(r,o){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)a=!0;else{var i=n.doc.resolve(o),s=i.index();a=i.parent.canReplaceWith(s,s+1,t)}})),!!a&&(r&&r(n.tr.setBlockType(i,s,t,e).scrollIntoView()),!0)}}function V(t,e,n){for(var r=function(r){var o=e[r],i=o.$from,s=o.$to,a=0==i.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(i.pos,s.pos,(function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(n)})),a)return{v:!0}},o=0;o<e.length;o++){var i=r(o);if(i)return i.v}return!1}function $(t,e){return function(n,r){var o=n.selection,i=o.empty,s=o.$cursor,a=o.ranges;if(i&&!s||!V(n.doc,a,t))return!1;if(r)if(s)t.isInSet(n.storedMarks||s.marks())?r(n.tr.removeStoredMark(t)):r(n.tr.addStoredMark(t.create(e)));else{for(var c=!1,p=n.tr,l=0;!c&&l<a.length;l++){var f=a[l],u=f.$from,h=f.$to;c=n.doc.rangeHasMark(u.pos,h.pos,t)}for(var d=0;d<a.length;d++){var m=a[d],v=m.$from,g=m.$to;c?p.removeMark(v.pos,g.pos,t):p.addMark(v.pos,g.pos,t.create(e))}r(p.scrollIntoView())}return!0}}function F(t,e){return function(n){if(!n.isGeneric)return t(n);for(var r=[],i=0;i<n.mapping.maps.length;i++){for(var s=n.mapping.maps[i],a=0;a<r.length;a++)r[a]=s.map(r[a]);s.forEach((function(t,e,n,o){return r.push(n,o)}))}for(var c=[],p=0;p<r.length;p+=2)for(var l=r[p],f=r[p+1],u=n.doc.resolve(l),h=u.sharedDepth(f),d=u.node(h),m=u.indexAfter(h),v=u.after(h+1);v<=f;++m){var g=d.maybeChild(m);if(!g)break;if(m&&-1==c.indexOf(v)){var y=d.child(m-1);y.type==g.type&&e(y,g)&&c.push(v)}v+=g.nodeSize}c.sort((function(t,e){return t-e}));for(var w=c.length-1;w>=0;w--)o(n.doc,c[w])&&n.join(c[w]);t(n)}}function L(t,e){if(Array.isArray(e)){var n=e;e=function(t){return n.indexOf(t.type.name)>-1}}return function(n,r){return t(n,r&&F(r,e))}}function J(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}t.export({autoJoin:()=>L,baseKeymap:()=>X,chainCommands:()=>J,createParagraphNear:()=>D,deleteSelection:()=>m,exitCode:()=>N,joinBackward:()=>v,joinDown:()=>O,joinForward:()=>b,joinUp:()=>S,lift:()=>C,liftEmptyBlock:()=>E,macBaseKeymap:()=>H,newlineInCode:()=>M,pcBaseKeymap:()=>K,selectAll:()=>I,selectNodeBackward:()=>y,selectNodeForward:()=>x,selectParentNode:()=>R,setBlockType:()=>_,splitBlock:()=>A,splitBlockKeepMarks:()=>j,toggleMark:()=>$,wrapIn:()=>B}),t.link("prosemirror-transform",{liftTarget(t){r=t},canJoin(t){o=t},joinPoint(t){i=t},canSplit(t){s=t},ReplaceAroundStep(t){a=t},findWrapping(t){c=t}},0),t.link("prosemirror-model",{Fragment(t){p=t},Slice(t){l=t}},1),t.link("prosemirror-state",{NodeSelection(t){f=t},Selection(t){u=t},TextSelection(t){h=t},AllSelection(t){d=t}},2);var q=J(m,v,y),W=J(m,b,x),K={Enter:J(M,D,E,A),"Mod-Enter":N,Backspace:q,"Mod-Backspace":q,Delete:W,"Mod-Delete":W,"Mod-a":I},H={"Ctrl-h":K.Backspace,"Alt-Backspace":K["Mod-Backspace"],"Ctrl-d":K.Delete,"Ctrl-Alt-Backspace":K["Mod-Delete"],"Alt-Delete":K["Mod-Delete"],"Alt-d":K["Mod-Delete"]};for(var U in K)H[U]=K[U];var G,X=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?H:K}}},"meteor-node-stubs":{"package.json":function t(e,n,t){t.exports={name:"meteor-node-stubs",version:"1.0.0",main:"index.js"}},"index.js":function t(n,o,t){var i=n("./map.json"),s={};if(Object.keys(i).forEach((function(e){if("string"==typeof i[e]){var n=t.id.split("/");n.pop(),n.push("node_modules",i[e]),o[e]=s[e+".js"]=n.join("/")}else o[e]=i[e],s[e+".js"]=function(){}})),"function"==typeof r&&r({"..":{node_modules:s}}),"function"!=typeof e.Buffer)try{e.Buffer=n("buffer").Buffer}catch(a){}},"map.json":function t(e,n,t){t.exports={assert:"assert/",buffer:"buffer/",child_process:null,cluster:null,console:"console-browserify",constants:"constants-browserify",crypto:"../wrappers/crypto.js",dgram:null,dns:null,domain:"domain-browser",events:"events/",fs:null,http:"stream-http",https:"https-browserify",module:"../wrappers/module.js",net:null,os:"os-browserify/browser.js",path:"path-browserify",process:"process/browser.js",punycode:"punycode/",querystring:"querystring-es3/",readline:null,repl:null,stream:"stream-browserify",_stream_duplex:"readable-stream/lib/_stream_duplex.js",_stream_passthrough:"readable-stream/lib/_stream_passthrough.js",_stream_readable:"readable-stream/lib/_stream_readable.js",_stream_transform:"readable-stream/lib/_stream_transform.js",_stream_writable:"readable-stream/lib/_stream_writable.js",string_decoder:"string_decoder/",sys:"util/util.js",timers:"timers-browserify",tls:null,tty:"tty-browserify",url:"url/",util:"util/util.js",vm:"vm-browserify",zlib:"browserify-zlib"}},deps:{"process.js":function t(e){e("process/browser.js")}},node_modules:{process:{"browser.js":function t(e,n,t){var r=t.exports={},o,i;function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(o===setTimeout)return setTimeout(t,0);if((o===s||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}function p(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:s}catch(t){o=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l=[],f=!1,u,h=-1;function d(){f&&u&&(f=!1,u.length?l=u.concat(l):h=-1,l.length&&m())}function m(){if(!f){var t=c(d);f=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,f=!1,p(t)}}function v(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new v(t,e)),1!==l.length||f||c(m)},v.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}}}}}},{extensions:[".js",".json",".html",".css",".mjs",".ts"]});var i=o("/node_modules/meteor/modules/client.js");Package._define("modules",i,{meteorInstall:r})}();

Package._define("es5-shim");

Package._define("modern-browsers");

Package._define("babel-compiler");

Package._define("ecmascript");

Package._define("typescript");

Package._define("shell-server");

Package._define("ecmascript-runtime");

!function(){var e=Package.meteor.Meteor,n=Package.meteor.global,o=Package.meteor.meteorEnv,t,a,r=(0,Package.modules.meteorInstall)({node_modules:{meteor:{"babel-runtime":{"babel-runtime.js":function e(n){try{var o=n("@babel/runtime/package.json").version}catch(t){throw new Error(["","The @babel/runtime npm package could not be found in your node_modules ","directory. Please run the following command to install it:","","  meteor npm install --save @babel/runtime",""].join("\n"))}(parseInt(o,10)<7||0===o.indexOf("7.0.0-beta.")&&parseInt(o.split(".").pop(),10)<56)&&console.error(["The version of @babel/runtime installed in your node_modules directory ","("+o+") is out of date. Please upgrade it by running ","","  meteor npm install --save @babel/runtime@latest","","in your application directory.",""].join("\n"))}}}}},{extensions:[".js",".json"]})("/node_modules/meteor/babel-runtime/babel-runtime.js");Package._define("babel-runtime",r)}();

!function(){var e=Package.meteor.Meteor,n=Package.meteor.global,o=Package.meteor.meteorEnv,t,r,i=(0,Package.modules.meteorInstall)({node_modules:{meteor:{promise:{"modern.js":function e(){r=n.Promise},"client.js":function e(n){n("./extensions.js"),n("meteor-promise").makeCompatible(r)},"extensions.js":function n(){var o=r.prototype,t=Object.prototype.hasOwnProperty;o.done=function(n,o){var t=this;arguments.length>0&&(t=this.then.apply(this,arguments)),t.then(null,(function(n){e._setImmediate((function(){throw n}))}))},t.call(o,"finally")||(o.finally=function(e){var n=!1,o;return this.then((function(n){return o=n,e()}),(function(t){return n=!0,o=t,e()})).then((function(){if(n)throw o;return o}))})},node_modules:{"meteor-promise":{"package.json":function e(n,o,e){e.exports={name:"meteor-promise",version:"0.8.7",browser:"promise_client.js",main:"promise_server.js"}},"promise_client.js":function n(o,t){function r(e){throw e}t.makeCompatible=function(n){var o=n.prototype.then;n.prototype.then=function(n,t){return"object"==typeof e&&"function"==typeof e.bindEnvironment?o.call(this,n&&e.bindEnvironment(n,r),t&&e.bindEnvironment(t,r)):o.call(this,n,t)}}}}}}}}},{extensions:[".js",".json"]});i("/node_modules/meteor/promise/modern.js");var s=i("/node_modules/meteor/promise/client.js");Package._define("promise",s,{Promise:r})}();

!function(){var e=Package.meteor.Meteor,o=Package.meteor.global,s=Package.meteor.meteorEnv,t=Package.modules.meteorInstall,a=Package.promise.Promise,n,r,c=t({node_modules:{meteor:{fetch:{"modern.js":function e(s,t){t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response}}}}},{extensions:[".js",".json"]})("/node_modules/meteor/fetch/modern.js");Package._define("fetch",c,{fetch:n})}();

!function(){var e=Package.meteor.Meteor,n=Package.meteor.global,t=Package.meteor.meteorEnv,r=Package.modules.meteorInstall,o=Package.promise.Promise,c=Package.fetch.fetch,i,u=r({node_modules:{meteor:{"dynamic-import":{"client.js":function n(t,r,n){var o=n.constructor,i=t("./cache.js"),u=t("meteor/modules").meteorInstall;function a(e){var n=[""],t=Object.create(null);function r(e){e&&"object"==typeof e?Object.keys(e).forEach((function(t){n.push(t),r(e[t]),n.pop()})):"string"==typeof e&&(t[n.join("/")]=e)}return r(e),t}function s(e,n,t){return function(){return(t&&t.eval||eval)("("+n+")\n//# sourceURL="+e).apply(this,arguments)}}o.prototype.dynamicImport=function(e){var n=this;return n.prefetch(e).then((function(){return v(n,e)}))},u.fetch=function(e){var n=Object.create(null),r=Object.create(null),o=t("./dynamic-versions.js"),c;function u(t,r){m(n,t,s(t,r,e[t].options))}function f(e){m(c=c||Object.create(null),e,1)}return Object.keys(e).forEach((function(e){var n=o.get(e);n?r[e]=n:f(e)})),i.checkMany(r).then((function(e){return Object.keys(e).forEach((function(n){var t=e[n];t?u(n,t):f(n)})),c&&d(c).then((function(e){var n=Object.create(null),t=a(e);Object.keys(t).forEach((function(e){var r=t[e];u(e,r);var c=o.get(e);c&&(n[e]={version:c,source:r})})),i.setMany(n)}))})).then((function(){return n}))};var f=null;r.setSecretKey=function(e){f=e};var l=t("./common.js").fetchURL;function d(n){var t=e.absoluteUrl(l);return f&&(t+="key="+f),c(t,{method:"POST",body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw e;return e.json()}))}function m(e,n,t){var r=n.split("/"),o=r.length-1;r.forEach((function(n,r){n&&(e=e[n]=e[n]||(r<o?Object.create(null):t))}))}function v(e,n){var t;return e.link(n,{"*":function(e){t=e}}),Object.defineProperty(t,"__esModule",{value:!0,enumerable:!1}),t}},"cache.js":function n(t,r,n){var c,i=e.isClient&&!e.isCordova&&e.isProduction;function u(){return"undefined"!=typeof indexedDB?indexedDB:"undefined"!=typeof webkitIndexedDB?webkitIndexedDB:"undefined"!=typeof mozIndexedDB?mozIndexedDB:"undefined"!=typeof OIndexedDB?OIndexedDB:"undefined"!=typeof msIndexedDB?msIndexedDB:void 0}function a(e){return(c=c||new o((function(e,n){var t=u();if(!t)throw new Error("IndexedDB not available");var r=t.open("MeteorDynamicImportCache",2);r.onupgradeneeded=function(e){var n=e.target.result;Array.from(n.objectStoreNames).forEach(n.deleteObjectStore,n),Object.keys(s).forEach((function(e){n.createObjectStore(e,s[e])}))},r.onerror=f(n,"indexedDB.open"),r.onsuccess=function(n){e(n.target.result)}}))).then(e,(function(n){return e(null)}))}var s={sourcesByVersion:{keyPath:"version"}};function f(e,n){return function(t){return e(new Error("IndexedDB failure in "+n+" "+JSON.stringify(t.target))),!0}}var l=0;r.checkMany=function(e){var n=Object.keys(e),t=Object.create(null);return n.forEach((function(e){t[e]=null})),i?a((function(r){if(!r)return t;var c,i=r.transaction(["sourcesByVersion"],"readonly").objectStore("sourcesByVersion");function u(){return--l,t}return++l,o.all(n.map((function(n){return new o((function(r,o){var c=e[n];if(c){var u=i.get(c);u.onerror=f(o,"sourcesByVersion.get"),u.onsuccess=function(e){var o=e.target.result;o&&(t[n]=o.source),r()}}else r()}))}))).then(u,u)})):o.resolve(t)};var d=Object.create(null);function m(){if(l>0)return m.timer=setTimeout(m,100);m.timer=null;var e=d;return d=Object.create(null),a((function(n){if(n){var t,r=n.transaction(["sourcesByVersion"],"readwrite").objectStore("sourcesByVersion");return o.all(Object.keys(e).map((function(n){var t=e[n];return new o((function(e,n){var o=r.put({version:t.version,source:t.source});o.onerror=f(n,"sourcesByVersion.put"),o.onsuccess=e}))})))}}))}r.setMany=function(e){i&&(Object.assign(d,e),m.timer||(m.timer=setTimeout(m,100)))}},"common.js":function e(n,t){t.fetchURL="/__meteor__/dynamic-import/fetch"},"dynamic-versions.js":function e(t,r,e){var c={};function i(e){var n=[""],t=[];function r(e){e&&"object"==typeof e?Object.keys(e).forEach((function(t){n.push(t),r(e[t]),n.pop()})):"string"==typeof e&&t.push(n.join("/"))}return r(e),t}function u(n){function t(n,r){o.all(n.splice(0,r).map((function(n){return e.prefetch(n)}))).then((function(){n.length>0&&setTimeout((function(){t(n,r)}),0)}))}Package.appcache&&t(i(c),50)}r.get=function(e){var n=c,t=null;return e.split("/").some((function(e){return e&&(n=n[e]||n[e.replace(":","_")]),!n||("string"==typeof n?(t=n,!0):void 0)})),t},n.addEventListener?n.addEventListener("load",u,!1):n.attachEvent&&n.attachEvent("onload",u)}}}}},{extensions:[".js",".json"]})("/node_modules/meteor/dynamic-import/client.js");Package._define("dynamic-import",u)}();

!function(){var t=Package.meteor.Meteor,n=Package.meteor.global,e=Package.meteor.meteorEnv,r=Package.modules.meteorInstall,i=Package.promise.Promise,o,s=r({node_modules:{meteor:{"ecmascript-runtime-client":{"modern.js":function t(n){try{n("core-js/modules/es.object.get-own-property-descriptors")}catch(e){throw new Error(["The core-js npm package could not be found in your node_modules ","directory. Please run the following command to install it:","","  meteor npm install --save core-js",""].join("\n"))}n("core-js/modules/es.object.is"),n("core-js/modules/es.function.name"),n("core-js/modules/es.number.is-finite"),n("core-js/modules/es.number.is-nan"),n("core-js/modules/es.array.flat"),n("core-js/modules/es.array.flat-map"),n("core-js/modules/es.object.from-entries"),n("core-js/modules/es.string.pad-start"),n("core-js/modules/es.string.pad-end"),n("core-js/modules/es.string.trim-start"),n("core-js/modules/es.string.trim-end"),n("core-js/modules/es.symbol.async-iterator")},node_modules:{"core-js":{modules:{"es.object.get-own-property-descriptors.js":function t(n){var e=n("../internals/export"),r=n("../internals/descriptors"),i=n("../internals/own-keys"),o=n("../internals/to-indexed-object"),s=n("../internals/object-get-own-property-descriptor"),a=n("../internals/create-property");e({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function t(n){for(var e=o(n),r=s.f,c=i(e),l={},u=0,f,p;c.length>u;)void 0!==(p=r(e,f=c[u++]))&&a(l,f,p);return l}})},"es.object.is.js":function t(n){var e,r;n("../internals/export")({target:"Object",stat:!0},{is:n("../internals/same-value")})},"es.function.name.js":function t(n){var e=n("../internals/descriptors"),r=n("../internals/object-define-property").f,i=Function.prototype,o=i.toString,s=/^\s*function ([^ (]*)/,a="name";!e||a in i||r(i,a,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(t){return""}}})},"es.number.is-finite.js":function t(n){var e,r;n("../internals/export")({target:"Number",stat:!0},{isFinite:n("../internals/number-is-finite")})},"es.number.is-nan.js":function t(n){var e;n("../internals/export")({target:"Number",stat:!0},{isNaN:function t(n){return n!=n}})},"es.array.flat.js":function t(n){"use strict";var e=n("../internals/export"),r=n("../internals/flatten-into-array"),i=n("../internals/to-object"),o=n("../internals/to-length"),s=n("../internals/to-integer"),a=n("../internals/array-species-create");e({target:"Array",proto:!0},{flat:function t(){var n=arguments.length?arguments[0]:void 0,e=i(this),c=o(e.length),l=a(e,0);return l.length=r(l,e,e,c,0,void 0===n?1:s(n)),l}})},"es.array.flat-map.js":function t(n){"use strict";var e=n("../internals/export"),r=n("../internals/flatten-into-array"),i=n("../internals/to-object"),o=n("../internals/to-length"),s=n("../internals/a-function"),a=n("../internals/array-species-create");e({target:"Array",proto:!0},{flatMap:function t(n){var e=i(this),c=o(e.length),l;return s(n),(l=a(e,0)).length=r(l,e,e,c,0,1,n,arguments.length>1?arguments[1]:void 0),l}})},"es.object.from-entries.js":function t(n){var e=n("../internals/export"),r=n("../internals/iterate"),i=n("../internals/create-property");e({target:"Object",stat:!0},{fromEntries:function t(n){var e={};return r(n,(function(t,n){i(e,t,n)}),void 0,!0),e}})},"es.string.pad-start.js":function t(n){"use strict";var e=n("../internals/export"),r=n("../internals/string-pad").start,i;e({target:"String",proto:!0,forced:n("../internals/webkit-string-pad-bug")},{padStart:function t(n){return r(this,n,arguments.length>1?arguments[1]:void 0)}})},"es.string.pad-end.js":function t(n){"use strict";var e=n("../internals/export"),r=n("../internals/string-pad").end,i;e({target:"String",proto:!0,forced:n("../internals/webkit-string-pad-bug")},{padEnd:function t(n){return r(this,n,arguments.length>1?arguments[1]:void 0)}})},"es.string.trim-start.js":function t(n){"use strict";var e=n("../internals/export"),r=n("../internals/string-trim").start,i,o=n("../internals/forced-string-trim-method")("trimStart"),s=o?function t(){return r(this)}:"".trimStart;e({target:"String",proto:!0,forced:o},{trimStart:s,trimLeft:s})},"es.string.trim-end.js":function t(n){"use strict";var e=n("../internals/export"),r=n("../internals/string-trim").end,i,o=n("../internals/forced-string-trim-method")("trimEnd"),s=o?function t(){return r(this)}:"".trimEnd;e({target:"String",proto:!0,forced:o},{trimEnd:s,trimRight:s})},"es.symbol.async-iterator.js":function t(n){var e;n("../internals/define-well-known-symbol")("asyncIterator")}},internals:{"export.js":function t(n,e,t){var r=n("../internals/global"),i=n("../internals/object-get-own-property-descriptor").f,o=n("../internals/hide"),s=n("../internals/redefine"),a=n("../internals/set-global"),c=n("../internals/copy-constructor-properties"),l=n("../internals/is-forced");t.exports=function(t,n){var e=t.target,u=t.global,f=t.stat,p,d,g,j,b,y;if(d=u?r:f?r[e]||a(e,{}):(r[e]||{}).prototype)for(g in n){if(b=n[g],j=t.noTargetGet?(y=i(d,g))&&y.value:d[g],!(p=l(u?g:e+(f?".":"#")+g,t.forced))&&void 0!==j){if(typeof b==typeof j)continue;c(b,j)}(t.sham||j&&j.sham)&&o(b,"sham",!0),s(d,g,b,t)}}},"global.js":function t(e,r,t){var i="object",o=function(t){return t&&t.Math==Math&&t};t.exports=o(typeof globalThis==i&&globalThis)||o(typeof window==i&&window)||o(typeof self==i&&self)||o(typeof n==i&&n)||Function("return this")()},"object-get-own-property-descriptor.js":function t(n,e){var r=n("../internals/descriptors"),i=n("../internals/object-property-is-enumerable"),o=n("../internals/create-property-descriptor"),s=n("../internals/to-indexed-object"),a=n("../internals/to-primitive"),c=n("../internals/has"),l=n("../internals/ie8-dom-define"),u=Object.getOwnPropertyDescriptor;e.f=r?u:function t(n,e){if(n=s(n),e=a(e,!0),l)try{return u(n,e)}catch(r){}if(c(n,e))return o(!i.f.call(n,e),n[e])}},"descriptors.js":function t(n,e,t){var r=n("../internals/fails");t.exports=!r((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"fails.js":function t(n,e,t){t.exports=function(t){try{return!!t()}catch(n){return!0}}},"object-property-is-enumerable.js":function t(n,e){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function t(n){var e=i(this,n);return!!e&&e.enumerable}:r},"create-property-descriptor.js":function t(n,e,t){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},"to-indexed-object.js":function t(n,e,t){var r=n("../internals/indexed-object"),i=n("../internals/require-object-coercible");t.exports=function(t){return r(i(t))}},"indexed-object.js":function t(n,e,t){var r=n("../internals/fails"),i=n("../internals/classof-raw"),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},"classof-raw.js":function t(n,e,t){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},"require-object-coercible.js":function t(n,e,t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},"to-primitive.js":function t(n,e,t){var r=n("../internals/is-object");t.exports=function(t,n){if(!r(t))return t;var e,i;if(n&&"function"==typeof(e=t.toString)&&!r(i=e.call(t)))return i;if("function"==typeof(e=t.valueOf)&&!r(i=e.call(t)))return i;if(!n&&"function"==typeof(e=t.toString)&&!r(i=e.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"is-object.js":function t(n,e,t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},"has.js":function t(n,e,t){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},"ie8-dom-define.js":function t(n,e,t){var r=n("../internals/descriptors"),i=n("../internals/fails"),o=n("../internals/document-create-element");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"document-create-element.js":function t(n,e,t){var r=n("../internals/global"),i=n("../internals/is-object"),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},"hide.js":function t(n,e,t){var r=n("../internals/descriptors"),i=n("../internals/object-define-property"),o=n("../internals/create-property-descriptor");t.exports=r?function(t,n,e){return i.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},"object-define-property.js":function t(n,e){var r=n("../internals/descriptors"),i=n("../internals/ie8-dom-define"),o=n("../internals/an-object"),s=n("../internals/to-primitive"),a=Object.defineProperty;e.f=r?a:function t(n,e,r){if(o(n),e=s(e,!0),o(r),i)try{return a(n,e,r)}catch(c){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(n[e]=r.value),n}},"an-object.js":function t(n,e,t){var r=n("../internals/is-object");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},"redefine.js":function t(n,e,t){var r=n("../internals/global"),i=n("../internals/shared"),o=n("../internals/hide"),s=n("../internals/has"),a=n("../internals/set-global"),c=n("../internals/function-to-string"),l=n("../internals/internal-state"),u=l.get,f=l.enforce,p=String(c).split("toString");i("inspectSource",(function(t){return c.call(t)})),(t.exports=function(t,n,e,i){var c=!!i&&!!i.unsafe,l=!!i&&!!i.enumerable,u=!!i&&!!i.noTargetGet;"function"==typeof e&&("string"!=typeof n||s(e,"name")||o(e,"name",n),f(e).source=p.join("string"==typeof n?n:"")),t!==r?(c?!u&&t[n]&&(l=!0):delete t[n],l?t[n]=e:o(t,n,e)):l?t[n]=e:a(n,e)})(Function.prototype,"toString",(function t(){return"function"==typeof this&&u(this).source||c.call(this)}))},"shared.js":function t(n,e,t){var r=n("../internals/global"),i=n("../internals/set-global"),o=n("../internals/is-pure"),s="__core-js_shared__",a=r[s]||i(s,{});(t.exports=function(t,n){return a[t]||(a[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.2.1",mode:o?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"set-global.js":function t(n,e,t){var r=n("../internals/global"),i=n("../internals/hide");t.exports=function(t,n){try{i(r,t,n)}catch(e){r[t]=n}return n}},"is-pure.js":function t(n,e,t){t.exports=!1},"function-to-string.js":function t(n,e,t){var r=n("../internals/shared");t.exports=r("native-function-to-string",Function.toString)},"internal-state.js":function t(n,e,t){var r=n("../internals/native-weak-map"),i=n("../internals/global"),o=n("../internals/is-object"),s=n("../internals/hide"),a=n("../internals/has"),c=n("../internals/shared-key"),l=n("../internals/hidden-keys"),u=i.WeakMap,f,p,d,g=function(t){return d(t)?p(t):f(t,{})},j=function(t){return function(n){var e;if(!o(n)||(e=p(n)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return e}};if(r){var b=new u,y=b.get,m=b.has,v=b.set;f=function(t,n){return v.call(b,t,n),n},p=function(t){return y.call(b,t)||{}},d=function(t){return m.call(b,t)}}else{var h=c("state");l[h]=!0,f=function(t,n){return s(t,h,n),n},p=function(t){return a(t,h)?t[h]:{}},d=function(t){return a(t,h)}}t.exports={set:f,get:p,has:d,enforce:g,getterFor:j}},"native-weak-map.js":function t(n,e,t){var r=n("../internals/global"),i=n("../internals/function-to-string"),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i.call(o))},"shared-key.js":function t(n,e,t){var r=n("../internals/shared"),i=n("../internals/uid"),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},"uid.js":function t(n,e,t){var r=0,i=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+i).toString(36)}},"hidden-keys.js":function t(n,e,t){t.exports={}},"copy-constructor-properties.js":function t(n,e,t){var r=n("../internals/has"),i=n("../internals/own-keys"),o=n("../internals/object-get-own-property-descriptor"),s=n("../internals/object-define-property");t.exports=function(t,n){for(var e=i(n),a=s.f,c=o.f,l=0;l<e.length;l++){var u=e[l];r(t,u)||a(t,u,c(n,u))}}},"own-keys.js":function t(n,e,t){var r=n("../internals/get-built-in"),i=n("../internals/object-get-own-property-names"),o=n("../internals/object-get-own-property-symbols"),s=n("../internals/an-object");t.exports=r("Reflect","ownKeys")||function t(n){var e=i.f(s(n)),r=o.f;return r?e.concat(r(n)):e}},"get-built-in.js":function t(n,e,t){var r=n("../internals/path"),i=n("../internals/global"),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,n){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][n]||i[t]&&i[t][n]}},"path.js":function t(n,e,t){t.exports=n("../internals/global")},"object-get-own-property-names.js":function t(n,e){var r=n("../internals/object-keys-internal"),i,o=n("../internals/enum-bug-keys").concat("length","prototype");e.f=Object.getOwnPropertyNames||function t(n){return r(n,o)}},"object-keys-internal.js":function t(n,e,t){var r=n("../internals/has"),i=n("../internals/to-indexed-object"),o=n("../internals/array-includes").indexOf,s=n("../internals/hidden-keys");t.exports=function(t,n){var e=i(t),a=0,c=[],l;for(l in e)!r(s,l)&&r(e,l)&&c.push(l);for(;n.length>a;)r(e,l=n[a++])&&(~o(c,l)||c.push(l));return c}},"array-includes.js":function t(n,e,t){var r=n("../internals/to-indexed-object"),i=n("../internals/to-length"),o=n("../internals/to-absolute-index"),s=function(t){return function(n,e,s){var a=r(n),c=i(a.length),l=o(s,c),u;if(t&&e!=e){for(;c>l;)if((u=a[l++])!=u)return!0}else for(;c>l;l++)if((t||l in a)&&a[l]===e)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},"to-length.js":function t(n,e,t){var r=n("../internals/to-integer"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},"to-integer.js":function t(n,e,t){var r=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:r)(t)}},"to-absolute-index.js":function t(n,e,t){var r=n("../internals/to-integer"),i=Math.max,o=Math.min;t.exports=function(t,n){var e=r(t);return e<0?i(e+n,0):o(e,n)}},"enum-bug-keys.js":function t(n,e,t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"object-get-own-property-symbols.js":function t(n,e){e.f=Object.getOwnPropertySymbols},"is-forced.js":function t(n,e,t){var r=n("../internals/fails"),i=/#|\.prototype\./,o=function(t,n){var e=a[s(t)];return e==l||e!=c&&("function"==typeof n?r(n):!!n)},s=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=o.data={},c=o.NATIVE="N",l=o.POLYFILL="P";t.exports=o},"create-property.js":function t(n,e,t){"use strict";var r=n("../internals/to-primitive"),i=n("../internals/object-define-property"),o=n("../internals/create-property-descriptor");t.exports=function(t,n,e){var s=r(n);s in t?i.f(t,s,o(0,e)):t[s]=e}},"same-value.js":function t(n,e,t){t.exports=Object.is||function t(n,e){return n===e?0!==n||1/n==1/e:n!=n&&e!=e}},"number-is-finite.js":function t(n,e,t){var r,i=n("../internals/global").isFinite;t.exports=Number.isFinite||function t(n){return"number"==typeof n&&i(n)}},"flatten-into-array.js":function t(n,e,t){"use strict";var r=n("../internals/is-array"),i=n("../internals/to-length"),o=n("../internals/bind-context"),s=function(t,n,e,a,c,l,u,f){for(var p=c,d=0,g=!!u&&o(u,f,3),j;d<a;){if(d in e){if(j=g?g(e[d],d,n):e[d],l>0&&r(j))p=s(t,n,j,i(j.length),p,l-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[p]=j}p++}d++}return p};t.exports=s},"is-array.js":function t(n,e,t){var r=n("../internals/classof-raw");t.exports=Array.isArray||function t(n){return"Array"==r(n)}},"bind-context.js":function t(n,e,t){var r=n("../internals/a-function");t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 0:return function(){return t.call(n)};case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,i){return t.call(n,e,r,i)}}return function(){return t.apply(n,arguments)}}},"a-function.js":function t(n,e,t){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"to-object.js":function t(n,e,t){var r=n("../internals/require-object-coercible");t.exports=function(t){return Object(r(t))}},"array-species-create.js":function t(n,e,t){var r=n("../internals/is-object"),i=n("../internals/is-array"),o,s=n("../internals/well-known-symbol")("species");t.exports=function(t,n){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)?r(e)&&null===(e=e[s])&&(e=void 0):e=void 0),new(void 0===e?Array:e)(0===n?0:n)}},"well-known-symbol.js":function t(n,e,t){var r=n("../internals/global"),i=n("../internals/shared"),o=n("../internals/uid"),s=n("../internals/native-symbol"),a=r.Symbol,c=i("wks");t.exports=function(t){return c[t]||(c[t]=s&&a[t]||(s?a:o)("Symbol."+t))}},"native-symbol.js":function t(n,e,t){var r=n("../internals/fails");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},"iterate.js":function t(n,e,t){var r=n("../internals/an-object"),i=n("../internals/is-array-iterator-method"),o=n("../internals/to-length"),s=n("../internals/bind-context"),a=n("../internals/get-iterator-method"),c=n("../internals/call-with-safe-iteration-closing"),l=function(t,n){this.stopped=t,this.result=n},u;(t.exports=function(t,n,e,u,f){var p=s(n,e,u?2:1),d,g,j,b,y,m;if(f)d=t;else{if("function"!=typeof(g=a(t)))throw TypeError("Target is not iterable");if(i(g)){for(j=0,b=o(t.length);b>j;j++)if((y=u?p(r(m=t[j])[0],m[1]):p(t[j]))&&y instanceof l)return y;return new l(!1)}d=g.call(t)}for(;!(m=d.next()).done;)if((y=c(d,p,m.value,u))&&y instanceof l)return y;return new l(!1)}).stop=function(t){return new l(!0,t)}},"is-array-iterator-method.js":function t(n,e,t){var r=n("../internals/well-known-symbol"),i=n("../internals/iterators"),o=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},"iterators.js":function t(n,e,t){t.exports={}},"get-iterator-method.js":function t(n,e,t){var r=n("../internals/classof"),i=n("../internals/iterators"),o,s=n("../internals/well-known-symbol")("iterator");t.exports=function(t){if(null!=t)return t[s]||t["@@iterator"]||i[r(t)]}},"classof.js":function t(n,e,t){var r=n("../internals/classof-raw"),i,o=n("../internals/well-known-symbol")("toStringTag"),s="Arguments"==r(function(){return arguments}()),a=function(t,n){try{return t[n]}catch(e){}};t.exports=function(t){var n,e,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=a(n=Object(t),o))?e:s?r(n):"Object"==(i=r(n))&&"function"==typeof n.callee?"Arguments":i}},"call-with-safe-iteration-closing.js":function t(n,e,t){var r=n("../internals/an-object");t.exports=function(t,n,e,i){try{return i?n(r(e)[0],e[1]):n(e)}catch(s){var o=t.return;throw void 0!==o&&r(o.call(t)),s}}},"string-pad.js":function t(n,e,t){var r=n("../internals/to-length"),i=n("../internals/string-repeat"),o=n("../internals/require-object-coercible"),s=Math.ceil,a=function(t){return function(n,e,a){var c=String(o(n)),l=c.length,u=void 0===a?" ":String(a),f=r(e),p,d;return f<=l||""==u?c:(p=f-l,(d=i.call(u,s(p/u.length))).length>p&&(d=d.slice(0,p)),t?c+d:d+c)}};t.exports={start:a(!1),end:a(!0)}},"string-repeat.js":function t(n,e,t){"use strict";var r=n("../internals/to-integer"),i=n("../internals/require-object-coercible");t.exports="".repeat||function t(n){var e=String(i(this)),o="",s=r(n);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(o+=e);return o}},"webkit-string-pad-bug.js":function t(n,e,t){var r=n("../internals/user-agent");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},"user-agent.js":function t(n,e,t){var r=n("../internals/get-built-in");t.exports=r("navigator","userAgent")||""},"string-trim.js":function t(n,e,t){var r=n("../internals/require-object-coercible"),i,o="["+n("../internals/whitespaces")+"]",s=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),c=function(t){return function(n){var e=String(r(n));return 1&t&&(e=e.replace(s,"")),2&t&&(e=e.replace(a,"")),e}};t.exports={start:c(1),end:c(2),trim:c(3)}},"whitespaces.js":function t(n,e,t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"forced-string-trim-method.js":function t(n,e,t){var r=n("../internals/fails"),i=n("../internals/whitespaces"),o="​᠎";t.exports=function(t){return r((function(){return!!i[t]()||o[t]()!=o||i[t].name!==t}))}},"define-well-known-symbol.js":function t(n,e,t){var r=n("../internals/path"),i=n("../internals/has"),o=n("../internals/wrapped-well-known-symbol"),s=n("../internals/object-define-property").f;t.exports=function(t){var n=r.Symbol||(r.Symbol={});i(n,t)||s(n,t,{value:o.f(t)})}},"wrapped-well-known-symbol.js":function t(n,e){e.f=n("../internals/well-known-symbol")}}}}}}}},{extensions:[".js",".json"]})("/node_modules/meteor/ecmascript-runtime-client/modern.js");Package._define("ecmascript-runtime-client",s)}();

!function(){var e=Package.meteor.Meteor,o=Package.meteor.global,t=Package.meteor.meteorEnv,s=Package.modules.meteorInstall,r=Package.promise.Promise,a,n,c=s({node_modules:{meteor:{webapp:{"webapp_client.js":function e(o,t,e){e.export({WebApp:()=>s});const s={_isCssLoaded:()=>0===document.styleSheets.length||Array.prototype.find.call(document.styleSheets,e=>e.cssText&&!e.cssRules?!e.cssText.match(/meteor-css-not-found-error/):!Array.prototype.find.call(e.cssRules,e=>".meteor-css-not-found-error"===e.selectorText))}}}}}},{extensions:[".js",".json"]})("/node_modules/meteor/webapp/webapp_client.js");Package._define("webapp",c,{WebApp:void 0})}();

Package._define("server-render");

Meteor=Package.meteor.Meteor,global=Package.meteor.global,meteorEnv=Package.meteor.meteorEnv,WebApp=Package.webapp.WebApp,meteorInstall=Package.modules.meteorInstall,Promise=Package.promise.Promise;

var require=meteorInstall({client:{"prosemirror-view":{"browser.js":function e(t,o,e){const n={};if(e.exportDefault(n),"undefined"!=typeof navigator&&"undefined"!=typeof document){const e=/Edge\/(\d+)/.exec(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);n.mac=/Mac/.test(navigator.platform);let r=n.ie=!!(t||o||e);n.ie_version=t?document.documentMode||6:o?+o[1]:e?+e[1]:null,n.gecko=!r&&/gecko\/(\d+)/i.test(navigator.userAgent),n.gecko_version=n.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];let i=!r&&/Chrome\/(\d+)/.exec(navigator.userAgent);n.chrome=!!i,n.chrome_version=i&&+i[1],n.ios=!r&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),n.android=/Android \d/.test(navigator.userAgent),n.webkit=!r&&"WebkitAppearance"in document.documentElement.style,n.safari=/Apple Computer/.test(navigator.vendor),n.webkit_version=n.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}},"capturekeys.js":function e(t,o,e){let n,r,i,s,l,a;function d(e,t){let{$anchor:o,$head:r}=e.selection,i=t>0?o.max(r):o.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&n.findFrom(s,t)}function c(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function h(e,t,o){let n=e.state.selection;if(n instanceof i){if(!n.empty||o.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){let o=d(e.state,t);return!!(o&&o instanceof r)&&c(e,o)}{let o=n.$head,l=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter,a;if(!l||l.isText)return!1;let d=t<0?o.pos-l.nodeSize:o.pos;return!!(l.isAtom||(a=e.docView.descAt(d))&&!a.contentDOM)&&(r.isSelectable(l)?c(e,new r(t<0?e.state.doc.resolve(o.pos-l.nodeSize):o)):!!s.webkit&&c(e,new i(e.state.doc.resolve(t<0?d:d+l.nodeSize))))}}if(n instanceof r&&n.node.isInline)return c(e,new i(t>0?n.$to:n.$from));{let o=d(e.state,t);return!!o&&c(e,o)}}function p(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function f(e){let t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function u(e){let t=e.root.getSelection(),o=t.focusNode,n=t.focusOffset;if(!o)return;let r,i,a=!1;for(s.gecko&&1==o.nodeType&&n<p(o)&&f(o.childNodes[n])&&(a=!0);;)if(n>0){if(1!=o.nodeType)break;{let e=o.childNodes[n-1];if(f(e))r=o,i=--n;else{if(3!=e.nodeType)break;n=(o=e).nodeValue.length}}}else{if(g(o))break;{let t=o.previousSibling;for(;t&&f(t);)r=o.parentNode,i=l(t),t=t.previousSibling;if(t)n=p(o=t);else{if((o=o.parentNode)==e.dom)break;n=0}}}a?y(e,t,o,n):r&&y(e,t,r,i)}function m(e){let t=e.root.getSelection(),o=t.focusNode,n=t.focusOffset;if(!o)return;let r=p(o),i,s;for(;;)if(n<r){if(1!=o.nodeType)break;let e;if(!f(o.childNodes[n]))break;i=o,s=++n}else{if(g(o))break;{let t=o.nextSibling;for(;t&&f(t);)i=t.parentNode,s=l(t)+1,t=t.nextSibling;if(t)n=0,r=p(o=t);else{if((o=o.parentNode)==e.dom)break;n=r=0}}}i&&y(e,t,i,s)}function g(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function y(e,t,o,n){if(a(t)){let e=document.createRange();e.setEnd(o,n),e.setStart(o,n),t.removeAllRanges(),t.addRange(e)}else t.extend&&t.extend(o,n);e.domObserver.setCurSelection()}function b(e,t,o){let s=e.state.selection;if(s instanceof i&&!s.empty||o.indexOf("s")>-1)return!1;let{$from:l,$to:a}=s;if(!l.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=d(e.state,t);if(o&&o instanceof r)return c(e,o)}if(!l.parent.inlineContent){let o=n.findFrom(t<0?l:a,t);return!o||c(e,o)}return!1}function v(e,t){if(!(e.state.selection instanceof i))return!0;let{$head:o,$anchor:n,empty:r}=e.state.selection;if(!o.sameParent(n))return!0;if(!r)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!o.textOffset&&(t<0?o.nodeBefore:o.nodeAfter);if(s&&!s.isText){let n=e.state.tr;return t<0?n.delete(o.pos-s.nodeSize,o.pos):n.delete(o.pos,o.pos+s.nodeSize),e.dispatch(n),!0}return!1}function k(e,t,o){e.domObserver.stop(),t.contentEditable=o,e.domObserver.start()}function w(e){if(!s.chrome||e.state.selection.$head.parentOffset>0)return;let{focusNode:t,focusOffset:o}=e.root.getSelection();if(t&&1==t.nodeType&&0==o&&t.firstChild&&"false"==t.firstChild.contentEditable){let o=t.firstChild;k(e,o,!0),setTimeout(()=>k(e,o,!1),20)}}function S(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function D(e,t){let o=t.keyCode,n=S(t);return 8==o||s.mac&&72==o&&"c"==n?v(e,-1)||u(e):46==o||s.mac&&68==o&&"c"==n?v(e,1)||m(e):13==o&&!s.ios||27==o||(37==o?h(e,-1,n)||u(e):39==o?h(e,1,n)||m(e):38==o?b(e,-1,n)||u(e):40==o?w(e)||b(e,1,n)||m(e):n==(s.mac?"m":"c")&&(66==o||73==o||89==o||90==o))}e.export({captureKeyDown:()=>D}),e.link("prosemirror-state",{Selection(e){n=e},NodeSelection(e){r=e},TextSelection(e){i=e}},0),e.link("./browser",{default(e){s=e}},1),e.link("./dom",{domIndex(e){l=e},selectionCollapsed(e){a=e}},2)},"clipboard.js":function e(t,o,e){let n,r,i,s;function l(e,t){let o=[],{content:n,openStart:r,openEnd:i}=t;for(;r>1&&i>1&&1==n.childCount&&1==n.firstChild.childCount;){r--,i--;let e=n.firstChild;o.push(e.type.name,e.type.hasRequiredAttrs()?e.attrs:null),n=e.content}let l=e.someProp("clipboardSerializer")||s.fromSchema(e.state.schema),a=y(),d=a.createElement("div");d.appendChild(l.serializeFragment(n,{document:a}));let c=d.firstChild,h,p;for(;c&&1==c.nodeType&&(h=m[c.nodeName.toLowerCase()]);){for(let e=h.length-1;e>=0;e--){let t=a.createElement(h[e]);for(;d.firstChild;)t.appendChild(d.firstChild);d.appendChild(t)}c=d.firstChild}return c&&1==c.nodeType&&c.setAttribute("data-pm-slice","".concat(r," ").concat(i," ").concat(JSON.stringify(o))),{dom:d,text:e.someProp("clipboardTextSerializer",e=>e(t))||t.content.textBetween(0,t.content.size,"\n\n")}}function a(e,t,o,s,l){let a,c=l.parent.type.spec.code,h;if(!o&&!t)return null;let p=t&&(s||c||!o);if(p){if(e.someProp("transformPastedText",e=>{t=e(t)}),c)return new n(r.from(e.state.schema.text(t)),0,0);let o=e.someProp("clipboardTextParser",e=>e(t,l));o?h=o:(a=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach(e=>{a.appendChild(document.createElement("p")).textContent=e}))}else e.someProp("transformPastedHTML",e=>{o=e(o)}),a=b(o);let f=a&&a.querySelector("[data-pm-slice]"),m=f&&/^(\d+) (\d+) (.*)/.exec(f.getAttribute("data-pm-slice"));if(!h){let t=e.someProp("clipboardParser")||e.someProp("domParser")||i.fromSchema(e.state.schema);h=t.parseSlice(a,{preserveWhitespace:!(!p&&!m),context:l})}return h=m?v(u(h,+m[1],+m[2]),m[3]):n.maxOpen(d(h.content,l),!1),e.someProp("transformPasted",e=>{h=e(h)}),h}function d(e,t){if(e.childCount<2)return e;for(let o=t.depth;o>=0;o--){let n,i=t.node(o).contentMatchAt(t.index(o)),s,l=[];if(e.forEach(e=>{if(!l)return;let t=i.findWrapping(e.type),o;if(!t)return l=null;if(o=l.length&&s.length&&h(t,s,e,l[l.length-1],0))l[l.length-1]=o;else{l.length&&(l[l.length-1]=p(l[l.length-1],s.length));let o=c(e,t);l.push(o),i=i.matchType(o.type,o.attrs),s=t}}),l)return r.from(l)}return e}function c(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(let n=t.length-1;n>=o;n--)e=t[n].create(null,r.from(e));return e}function h(e,t,o,n,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=h(e,t,o,n.lastChild,i+1),l;if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(i==e.length-1?o.type:e[i+1]))return n.copy(n.content.append(r.from(c(o,e,i+1))))}}function p(e,t){if(0==t)return e;let o=e.content.replaceChild(e.childCount-1,p(e.lastChild,t-1)),n=e.contentMatchAt(e.childCount).fillBefore(r.empty,!0);return e.copy(o.append(n))}function f(e,t,o,n,i,s){let l=t<0?e.firstChild:e.lastChild,a=l.content;return i<n-1&&(a=f(a,t,o,n,i+1,s)),i>=o&&(a=t<0?l.contentMatchAt(0).fillBefore(a,e.childCount>1||s<=i).append(a):a.append(l.contentMatchAt(l.childCount).fillBefore(r.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,l.copy(a))}function u(e,t,o){return t<e.openStart&&(e=new n(f(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),o<e.openEnd&&(e=new n(f(e.content,1,o,e.openEnd,0,0),e.openStart,o)),e}e.export({serializeForClipboard:()=>l,parseFromClipboard:()=>a}),e.link("prosemirror-model",{Slice(e){n=e},Fragment(e){r=e},DOMParser(e){i=e},DOMSerializer(e){s=e}},0);const m={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let g=null;function y(){return g||(g=document.implementation.createHTMLDocument("title"))}function b(e){let t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let o=y().createElement("div"),n=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),r,i=0;(r=n&&m[n[1].toLowerCase()])&&(e=r.map(e=>"<"+e+">").join("")+e+r.map(e=>"</"+e+">").reverse().join(""),i=r.length),o.innerHTML=e;for(let s=0;s<i;s++)o=o.firstChild;return o}function v(e,t){if(!e.size)return e;let o=e.content.firstChild.type.schema,i;try{i=JSON.parse(t)}catch(d){return e}let{content:s,openStart:l,openEnd:a}=e;for(let n=i.length-2;n>=0;n-=2){let e=o.nodes[i[n]];if(!e||e.hasRequiredAttrs())break;s=r.from(e.create(i[n+1],s)),l++,a++}return new n(s,l,a)}},"decoration.js":function e(t,o,e){function n(e,t){if(e==t)return!0;for(let o in e)if(e[o]!==t[o])return!1;for(let o in t)if(!(o in e))return!1;return!0}e.export({Decoration:()=>l,DecorationSet:()=>c,viewDecorations:()=>S});class r{constructor(e,t){this.spec=t||d,this.side=this.spec.side||0,this.toDOM=e}map(e,t,o,n){let{pos:r,deleted:i}=e.mapResult(t.from+n,this.side<0?-1:1);return i?null:new l(r-o,r-o,this)}valid(){return!0}eq(e){return this==e||e instanceof r&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&n(this.spec,e.spec))}}class i{constructor(e,t){this.spec=t||d,this.attrs=e}map(e,t,o,n){let r=e.map(t.from+n,this.spec.inclusiveStart?-1:1)-o,i=e.map(t.to+n,this.spec.inclusiveEnd?1:-1)-o;return r>=i?null:new l(r,i,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof i&&n(this.attrs,e.attrs)&&n(this.spec,e.spec)}static is(e){return e.type instanceof i}}class s{constructor(e,t){this.spec=t||d,this.attrs=e}map(e,t,o,n){let r=e.mapResult(t.from+n,1);if(r.deleted)return null;let i=e.mapResult(t.to+n,-1);return i.deleted||i.pos<=r.pos?null:new l(r.pos-o,i.pos-o,this)}valid(e,t){let{index:o,offset:n}=e.content.findIndex(t.from);return n==t.from&&n+e.child(o).nodeSize==t.to}eq(e){return this==e||e instanceof s&&n(this.attrs,e.attrs)&&n(this.spec,e.spec)}}class l{constructor(e,t,o){this.from=e,this.to=t,this.type=o}copy(e,t){return new l(e,t,this.type)}eq(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to}map(e,t,o){return this.type.map(e,this,t,o)}static widget(e,t,o){return new l(e,e,new r(t,o))}static inline(e,t,o,n){return new l(e,t,new i(o,n))}static node(e,t,o,n){return new l(e,t,new s(o,n))}get spec(){return this.type.spec}}const a=[],d={};class c{constructor(e,t){this.local=e&&e.length?e:a,this.children=t&&t.length?t:a}static create(e,t){return t.length?b(t,e,0,d):h}find(e,t,o){let n=[];return this.findInner(null==e?0:e,null==t?1e9:t,n,0,o),n}findInner(e,t,o,n,r){for(let i=0;i<this.local.length;i++){let s=this.local[i];s.from<=t&&s.to>=e&&(!r||r(s.spec))&&o.push(s.copy(s.from+n,s.to+n))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<t&&this.children[i+1]>e){let s=this.children[i]+1;this.children[i+2].findInner(e-s,t-s,o,n+s,r)}}map(e,t,o){return this==h||0==e.maps.length?this:this.mapInner(e,t,0,0,o||d)}mapInner(e,t,o,n,r){let i;for(let s=0;s<this.local.length;s++){let l=this.local[s].map(e,o,n);l&&l.type.valid(t,l)?(i||(i=[])).push(l):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?f(this.children,i,e,t,o,n,r):i?new c(i.sort(v)):h}add(e,t){return t.length?this==h?c.create(e,t):this.addInner(e,t,0):this}addInner(e,t,o){let n,r=0;e.forEach((e,i)=>{let s=i+o,l;if(l=g(t,e,s)){for(n||(n=this.children.slice());r<n.length&&n[r]<i;)r+=3;n[r]==i?n[r+2]=n[r+2].addInner(e,l,s+1):n.splice(r,0,i,i+e.nodeSize,b(l,e,s+1,d)),r+=3}});let i=u(r?y(t):t,-o);return new c(i.length?this.local.concat(i).sort(v):this.local,n||this.children)}remove(e){return 0==e.length||this==h?this:this.removeInner(e,0)}removeInner(e,t){let o=this.children,n=this.local;for(let r=0;r<o.length;r+=3){let n,i=o[r]+t,s=o[r+1]+t;for(let t=0,o;t<e.length;t++)(o=e[t])&&o.from>i&&o.to<s&&(e[t]=null,(n||(n=[])).push(o));if(!n)continue;o==this.children&&(o=this.children.slice());let l=o[r+2].removeInner(n,i+1);l!=h?o[r+2]=l:(o.splice(r,3),r-=3)}if(n.length)for(let r=0,i;r<e.length;r++)if(i=e[r])for(let e=0;e<n.length;e++)n[e].type.eq(i.type)&&(n==this.local&&(n=this.local.slice()),n.splice(e--,1));return o==this.children&&n==this.local?this:n.length||o.length?new c(n,o):h}forChild(e,t){if(this==h)return this;if(t.isLeaf)return c.empty;let o,n;for(let i=0;i<this.children.length;i+=3)if(this.children[i]>=e){this.children[i]==e&&(o=this.children[i+2]);break}let r=e+1,s=r+t.content.size;for(let l=0;l<this.local.length;l++){let e=this.local[l];if(e.from<s&&e.to>r&&e.type instanceof i){let t=Math.max(r,e.from)-r,o=Math.min(s,e.to)-r;t<o&&(n||(n=[])).push(e.copy(t,o))}}if(n){let e=new c(n.sort(v));return o?new p([e,o]):e}return o||h}eq(e){if(this==e)return!0;if(!(e instanceof c)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return k(this.localsInner(e))}localsInner(e){if(this==h)return a;if(e.inlineContent||!this.local.some(i.is))return this.local;let t=[];for(let o=0;o<this.local.length;o++)this.local[o].type instanceof i||t.push(this.local[o]);return t}}const h=new c;c.empty=h,c.removeOverlap=k;class p{constructor(e){this.members=e}forChild(e,t){if(t.isLeaf)return c.empty;let o=[];for(let n=0;n<this.members.length;n++){let r=this.members[n].forChild(e,t);r!=h&&(r instanceof p?o=o.concat(r.members):o.push(r))}return p.from(o)}eq(e){if(!(e instanceof p)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,o=!0;for(let n=0;n<this.members.length;n++){let r=this.members[n].localsInner(e);if(r.length)if(t){o&&(t=t.slice(),o=!1);for(let e=0;e<r.length;e++)t.push(r[e])}else t=r}return t?k(o?t:t.sort(v)):a}static from(e){switch(e.length){case 0:return h;case 1:return e[0];default:return new p(e)}}}function f(e,t,o,n,r,i,s){let l=e.slice(),a=(e,t,o,n)=>{for(let s=0;s<l.length;s+=3){let a=l[s+1],d;-1==a||e>a+i||(t>=l[s]+i?l[s+1]=-1:(d=n-o-(t-e)+(i-r))&&(l[s]+=d,l[s+1]+=d))}};for(let c=0;c<o.maps.length;c++)o.maps[c].forEach(a);let d=!1;for(let c=0;c<l.length;c+=3)if(-1==l[c+1]){let t=o.map(l[c]+i),a=t-r;if(a<0||a>=n.content.size){d=!0;continue}let p,f=o.map(e[c+1]+i,-1)-r,{index:u,offset:m}=n.content.findIndex(a),g=n.maybeChild(u);if(g&&m==a&&m+g.nodeSize==f){let e=l[c+2].mapInner(o,g,t+1,l[c]+i+1,s);e!=h?(l[c]=a,l[c+1]=f,l[c+2]=e):(l[c+1]=-2,d=!0)}else d=!0}if(d){let a,d=b(m(l,e,t||[],o,r,i,s),n,0,s);t=d.local;for(let e=0;e<l.length;e+=3)l[e+1]<0&&(l.splice(e,3),e-=3);for(let e=0,t=0;e<d.children.length;e+=3){let o=d.children[e];for(;t<l.length&&l[t]<o;)t+=3;l.splice(t,0,d.children[e],d.children[e+1],d.children[e+2])}}return new c(t&&t.sort(v),l)}function u(e,t){if(!t||!e.length)return e;let o=[];for(let n=0;n<e.length;n++){let r=e[n];o.push(new l(r.from+t,r.to+t,r.type))}return o}function m(e,t,o,n,r,i,s){function l(e,t){for(let i=0;i<e.local.length;i++){let l=e.local[i].map(n,r,t);l?o.push(l):s.onRemove&&s.onRemove(e.local[i].spec)}for(let o=0;o<e.children.length;o+=3)l(e.children[o+2],e.children[o]+t+1)}for(let a=0;a<e.length;a+=3)-1==e[a+1]&&l(e[a+2],t[a]+i+1);return o}function g(e,t,o){if(t.isLeaf)return null;let n=o+t.nodeSize,r=null;for(let i=0,s;i<e.length;i++)(s=e[i])&&s.from>o&&s.to<n&&((r||(r=[])).push(s),e[i]=null);return r}function y(e){let t=[];for(let o=0;o<e.length;o++)null!=e[o]&&t.push(e[o]);return t}function b(e,t,o,n){let r=[],i=!1;t.forEach((t,s)=>{let l=g(e,t,s+o);if(l){i=!0;let e=b(l,t,o+s+1,n);e!=h&&r.push(s,s+t.nodeSize,e)}});let s=u(i?y(e):e,-o).sort(v);for(let l=0;l<s.length;l++)s[l].type.valid(t,s[l])||(n.onRemove&&n.onRemove(s[l].spec),s.splice(l--,1));return s.length||r.length?new c(s,r):h}function v(e,t){return e.from-t.from||e.to-t.to}function k(e){let t=e;for(let o=0;o<t.length-1;o++){let n=t[o];if(n.from!=n.to)for(let r=o+1;r<t.length;r++){let i=t[r];if(i.from!=n.from){i.from<n.to&&(t==e&&(t=e.slice()),t[o]=n.copy(n.from,i.from),w(t,r,n.copy(i.from,n.to)));break}i.to!=n.to&&(t==e&&(t=e.slice()),t[r]=i.copy(i.from,n.to),w(t,r+1,i.copy(n.to,i.to)))}}return t}function w(e,t,o){for(;t<e.length&&v(o,e[t])>0;)t++;e.splice(t,0,o)}function S(e){let t=[];return e.someProp("decorations",o=>{let n=o(e.state);n&&n!=h&&t.push(n)}),e.cursorWrapper&&t.push(c.create(e.state.doc,[e.cursorWrapper.deco])),p.from(t)}},"dom.js":function e(t,o,e){let n;e.export({domIndex:()=>r,parentNode:()=>i,textRange:()=>s,isEquivalentPosition:()=>l,nodeSize:()=>c,selectionCollapsed:()=>p,keyEvent:()=>f}),e.link("./browser",{default(e){n=e}},0);const r=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},i=function(e){let t=e.parentNode;return t&&11==t.nodeType?t.host:t},s=function(e,t,o){let n=document.createRange();return n.setEnd(e,null==o?e.nodeValue.length:o),n.setStart(e,t||0),n},l=function(e,t,o,n){return o&&(d(e,t,o,n,-1)||d(e,t,o,n,1))},a=/^(img|br|input|textarea|hr)$/i;function d(e,t,o,n,i){for(;;){if(e==o&&t==n)return!0;if(t==(i<0?0:c(e))){let o=e.parentNode;if(1!=o.nodeType||h(e)||a.test(e.nodeName)||"false"==e.contentEditable)return!1;t=r(e)+(i<0?0:1),e=o}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?c(e):0}}}function c(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function h(e){let t;for(let o=e;o&&!(t=o.pmViewDesc);o=o.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const p=function(e){let t=e.isCollapsed;return t&&n.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function f(e,t){let o=document.createEvent("Event");return o.initEvent("keydown",!0,!0),o.keyCode=e,o.key=o.code=t,o}},"domchange.js":function e(t,o,e){let n,r,i,s,l,a,d,c,h,p;function f(e,t,o){let{node:n,fromOffset:i,toOffset:s,from:l,to:a}=e.docView.parseRange(t,o),d=e.root.getSelection(),h=null,f=d.anchorNode;if(f&&e.dom.contains(1==f.nodeType?f:f.parentNode)&&(h=[{node:f,offset:d.anchorOffset}],c(d)||h.push({node:d.focusNode,offset:d.focusOffset})),p.chrome&&8===e.lastKeyCode)for(let r=s;r>i;r--){let e=n.childNodes[r-1],t=e.pmViewDesc;if("BR"==e.nodeType&&!t){s=r;break}if(!t||t.size)break}let m=e.state.doc,g=e.someProp("domParser")||r.fromSchema(e.state.schema),y=m.resolve(l),b=null,v=g.parse(n,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:s,preserveWhitespace:!y.parent.type.spec.code||"full",editableContent:!0,findPositions:h,ruleFromNode:u,context:y});if(h&&null!=h[0].pos){let e=h[0].pos,t=h[1]&&h[1].pos;null==t&&(t=e),b={anchor:e+l,head:t+l}}return{doc:v,sel:b,from:l,to:a}}function u(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(p.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||p.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function m(e,t,o,n,r){if(t<0){let t=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,o=a(e,t);if(!e.state.selection.eq(o)){let n=e.state.tr.setSelection(o);"pointer"==t?n.setMeta("pointer",!0):"key"==t&&n.scrollIntoView(),e.dispatch(n)}return}let l=e.state.doc.resolve(t),c=l.sharedDepth(o);t=l.before(c+1),o=e.state.doc.resolve(o).after(c+1);let u=e.state.selection,m=f(e,t,o),v=e.state.doc,w=v.slice(m.from,m.to),S,D;8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(S=e.state.selection.to,D="end"):(S=e.state.selection.from,D="start"),e.lastKeyCode=null;let C=k(w.content,m.doc.content,m.from,S,D);if(!C){if(!(n&&u instanceof s&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||m.sel&&m.sel.anchor!=m.sel.head){if(m.sel&&-1==r.findIndex(e=>e.classList&&e.classList.contains("inserted-by-pagebreaker"))){let t=g(e,e.state.doc,m.sel);t&&!t.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(t))}return}C={start:u.from,endA:u.to,endB:u.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&C.start==C.endB&&e.state.selection instanceof s&&(C.start>e.state.selection.from&&C.start<=e.state.selection.from+2?C.start=e.state.selection.from:C.endA<e.state.selection.to&&C.endA>=e.state.selection.to-2&&(C.endB+=e.state.selection.to-C.endA,C.endA=e.state.selection.to)),p.ie&&p.ie_version<=11&&C.endB==C.start+1&&C.endA==C.start&&C.start>m.from&&"  "==m.doc.textBetween(C.start-m.from-1,C.start-m.from+1)&&(C.start--,C.endA--,C.endB--);let O=m.doc.resolveNoCache(C.start-m.from),x=m.doc.resolveNoCache(C.endB-m.from),M;if((p.ios&&e.lastIOSEnter>Date.now()-100&&(!O.sameParent(x)||r.some(e=>"DIV"==e.nodeName))||!O.sameParent(x)&&O.pos<m.doc.content.size&&(M=i.findFrom(m.doc.resolve(O.pos+1),1,!0))&&M.head==x.pos)&&e.someProp("handleKeyDown",t=>t(e,h(13,"Enter"))))return void(e.lastIOSEnter=0);if(e.state.selection.anchor>C.start&&b(v,C.start,C.endA,O,x)&&e.someProp("handleKeyDown",t=>t(e,h(8,"Backspace"))))return void(p.android&&p.chrome&&e.domObserver.suppressSelectionUpdates());let N=C.start,T=C.endA,E,P,A,V;if(O.sameParent(x)&&O.parent.inlineContent)if(O.pos==x.pos)p.ie&&p.ie_version<=11&&0==O.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>d(e),20)),E=e.state.tr.delete(N,T),P=v.resolve(C.start).marksAcross(v.resolve(C.endA));else if(C.endA==C.endB&&(V=v.resolve(C.start))&&(A=y(O.parent.content.cut(O.parentOffset,x.parentOffset),V.parent.content.cut(V.parentOffset,C.endA-V.start()))))E=e.state.tr,"add"==A.type?E.addMark(N,T,A.mark):E.removeMark(N,T,A.mark);else if(O.parent.child(O.index()).isText&&O.index()==x.index()-(x.textOffset?0:1)){let t=O.parent.textBetween(O.parentOffset,x.parentOffset);if(e.someProp("handleTextInput",o=>o(e,N,T,t)))return;E=e.state.tr.insertText(t,N,T)}if(E||(E=e.state.tr.replace(N,T,m.doc.slice(C.start-m.from,C.endB-m.from))),m.sel){let t=g(e,E.doc,m.sel);t&&!(p.chrome&&p.android&&e.composing&&t.empty&&t.head==N||p.ie&&t.empty&&t.head==N)&&E.setSelection(t)}P&&E.ensureMarks(P),e.dispatch(E.scrollIntoView())}function g(e,t,o){return Math.max(o.anchor,o.head)>t.content.size?null:l(e,t.resolve(o.anchor),t.resolve(o.head))}function y(e,t){let o=e.firstChild.marks,r=t.firstChild.marks,i=o,s=r,l,a,d;for(let n=0;n<r.length;n++)i=r[n].removeFromSet(i);for(let n=0;n<o.length;n++)s=o[n].removeFromSet(s);if(1==i.length&&0==s.length)a=i[0],l="add",d=e=>e.mark(a.addToSet(e.marks));else{if(0!=i.length||1!=s.length)return null;a=s[0],l="remove",d=e=>e.mark(a.removeFromSet(e.marks))}let c=[];for(let n=0;n<t.childCount;n++)c.push(d(t.child(n)));if(n.from(c).eq(e))return{mark:a,type:l}}function b(e,t,o,n,r){if(!n.parent.isTextblock||o-t<=r.pos-n.pos||v(n,!0,!1)<r.pos)return!1;let i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=e.resolve(v(i,!0,!0));return!(!s.parent.isTextblock||s.pos>o||v(s,!0,!1)<o)&&n.parent.content.cut(n.parentOffset).eq(s.parent.content)}function v(e,t,o){let n=e.depth,r=t?e.end():e.pos;for(;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,r++,t=!1;if(o){let t=e.node(n).maybeChild(e.indexAfter(n));for(;t&&!t.isLeaf;)t=t.firstChild,r++}return r}function k(e,t,o,n,r){let i=e.findDiffStart(t,o);if(null==i)return null;let{a:s,b:l}=e.findDiffEnd(t,o+e.size,o+t.size);if("end"==r){let e;n-=s+Math.max(0,i-Math.min(s,l))-i}if(s<i&&e.size<t.size){let e;l=(i-=n<=i&&n>=s?i-n:0)+(l-s),s=i}else if(l<i){let e;s=(i-=n<=i&&n>=l?i-n:0)+(s-l),l=i}return{start:i,endA:s,endB:l}}e.export({readDOMChange:()=>m}),e.link("prosemirror-model",{Fragment(e){n=e},DOMParser(e){r=e}},0),e.link("prosemirror-state",{Selection(e){i=e},TextSelection(e){s=e}},1),e.link("./selection",{selectionBetween(e){l=e},selectionFromDOM(e){a=e},selectionToDOM(e){d=e}},2),e.link("./dom",{selectionCollapsed(e){c=e},keyEvent(e){h=e}},3),e.link("./browser",{default(e){p=e}},4)},"domcoords.js":function e(t,o,e){let n,r,i,s;function l(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function a(e,t){return"number"==typeof e?e:e[t]}function d(e,t,o){let n=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument,d=s.defaultView;for(let c=o||e.dom;c;c=i(c)){if(1!=c.nodeType)continue;let e=c==s.body||1!=c.nodeType,o=e?l(d):c.getBoundingClientRect(),i=0,h=0;if(t.top<o.top+a(n,"top")?h=-(o.top-t.top+a(r,"top")):t.bottom>o.bottom-a(n,"bottom")&&(h=t.bottom-o.bottom+a(r,"bottom")),t.left<o.left+a(n,"left")?i=-(o.left-t.left+a(r,"left")):t.right>o.right-a(n,"right")&&(i=t.right-o.right+a(r,"right")),(i||h)&&(e?d.scrollBy(i,h):(h&&(c.scrollTop+=h),i&&(c.scrollLeft+=i))),e)break}}function c(e){let t=e.dom.getBoundingClientRect(),o=Math.max(0,t.top),n,r;for(let i=(t.left+t.right)/2,s=o+1;s<Math.min(innerHeight,t.bottom);s+=5){let t=e.root.elementFromPoint(i,s);if(t==e.dom||!e.dom.contains(t))continue;let l=t.getBoundingClientRect();if(l.top>=o-20){n=t,r=l.top;break}}return{refDOM:n,refTop:r,stack:h(e.dom)}}function h(e){let t=[],o=e.ownerDocument;for(;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=o);e=i(e));return t}function p(e){let{refDOM:t,refTop:o,stack:n}=e,r=t?t.getBoundingClientRect().top:0;f(n,0==r?0:r-o)}function f(e,t){for(let o=0;o<e.length;o++){let{dom:n,top:r,left:i}=e[o];n.scrollTop!=r+t&&(n.scrollTop=r+t),n.scrollLeft!=i&&(n.scrollLeft=i)}}e.export({scrollRectIntoView:()=>d,storeScrollPos:()=>c,resetScrollPos:()=>p,focusPreventScroll:()=>m,posAtCoords:()=>D,coordsAtPos:()=>O,endOfTextblock:()=>B}),e.link("./dom",{nodeSize(e){n=e},textRange(e){r=e},parentNode(e){i=e}},0),e.link("./browser",{default(e){s=e}},1);let u=null;function m(e){if(e.setActive)return e.setActive();if(u)return e.focus(u);let t=h(e);e.focus(null==u?{get preventScroll(){return u={preventScroll:!0},!0}}:void 0),u||(u=!1,f(t,0))}function g(e,t){let o,n=2e8,i,s=0,l=t.top,a=t.top;for(let d=e.firstChild,c=0;d;d=d.nextSibling,c++){let e;if(1==d.nodeType)e=d.getClientRects();else{if(3!=d.nodeType)continue;e=r(d).getClientRects()}for(let r=0;r<e.length;r++){let h=e[r];if(h.top<=l&&h.bottom>=a){l=Math.max(h.bottom,l),a=Math.min(h.top,a);let e=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(e<n){o=d,n=e,i=e&&3==o.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==d.nodeType&&e&&(s=c+(t.left>=(h.left+h.right)/2?1:0));continue}}!o&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(s=c+1)}}return o&&3==o.nodeType?y(o,i):!o||n&&1==o.nodeType?{node:e,offset:s}:g(o,i)}function y(e,t){let o=e.nodeValue.length,n=document.createRange();for(let r=0;r<o;r++){n.setEnd(e,r+1),n.setStart(e,r);let o=C(n,1);if(o.top!=o.bottom&&b(t,o))return{node:e,offset:r+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}function b(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function v(e,t){let o=e.parentNode;return o&&/^li$/i.test(o.nodeName)&&t.left<e.getBoundingClientRect().left?o:e}function k(e,t,o){let{node:n,offset:r}=g(t,o),i=-1;if(1==n.nodeType&&!n.firstChild){let e=n.getBoundingClientRect();i=e.left!=e.right&&o.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(n,r,i)}function w(e,t,o,n){let r=-1;for(let i=t;i!=e.dom;){let t=e.docView.nearestDesc(i,!0);if(!t)return null;if(t.node.isBlock&&t.parent){let e=t.dom.getBoundingClientRect();if(e.left>n.left||e.top>n.top)r=t.posBefore;else{if(!(e.right<n.left||e.bottom<n.top))break;r=t.posAfter}}i=t.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,o)}function S(e,t,o){let n=e.childNodes.length;if(n&&o.top<o.bottom)for(let r=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-o.top)/(o.bottom-o.top))-2)),i=r;;){let o=e.childNodes[i];if(1==o.nodeType){let e=o.getClientRects();for(let n=0;n<e.length;n++){let r=e[n];if(b(t,r))return S(o,t,r)}}if((i=(i+1)%n)==r)break}return e}function D(e,t){let o=e.root,n,r;if(o.caretPositionFromPoint)try{let e=o.caretPositionFromPoint(t.left,t.top);e&&({offsetNode:n,offset:r}=e)}catch(d){}if(!n&&o.caretRangeFromPoint){let e=o.caretRangeFromPoint(t.left,t.top);e&&({startContainer:n,startOffset:r}=e)}let i=o.elementFromPoint(t.left,t.top+1),l;if(!i||!e.dom.contains(1!=i.nodeType?i.parentNode:i)){let o=e.dom.getBoundingClientRect();if(!b(t,o))return null;if(!(i=S(e.dom,t,o)))return null}if(i=v(i,t),n){if(s.gecko&&1==n.nodeType&&(r=Math.min(r,n.childNodes.length))<n.childNodes.length){let e=n.childNodes[r],o;"IMG"==e.nodeName&&(o=e.getBoundingClientRect()).right<=t.left&&o.bottom>t.top&&r++}n==e.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(l=w(e,n,r,t))}null==l&&(l=k(e,i,t));let a=e.docView.nearestDesc(i,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function C(e,t){let o=e.getClientRects();return o.length?o[t<0?0:o.length-1]:e.getBoundingClientRect()}function O(e,t){let{node:o,offset:i}=e.docView.domFromPos(t);if(3==o.nodeType&&(s.chrome||s.gecko)){let e=C(r(o,i,i),0);if(s.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){let t=C(r(o,i-1,i-1),-1);if(Math.abs(t.left-e.left)<1&&t.top==e.top){let e=C(r(o,i,i+1),-1);return x(e,e.left<t.left)}}return e}if(1==o.nodeType&&!e.state.doc.resolve(t).parent.inlineContent){let e=!0,t;if(i<o.childNodes.length){let e=o.childNodes[i];1==e.nodeType&&(t=e.getBoundingClientRect())}if(!t&&i){let n=o.childNodes[i-1];1==n.nodeType&&(t=n.getBoundingClientRect(),e=!1)}return M(t||o.getBoundingClientRect(),e)}for(let s=-1;s<2;s+=2)if(s<0&&i){let e,t=3==o.nodeType?r(o,i-1,i):3==(e=o.childNodes[i-1]).nodeType?r(e):1==e.nodeType&&"BR"!=e.nodeName?e:null;if(t){let e=C(t,1);if(e.top<e.bottom)return x(e,!1)}}else if(s>0&&i<n(o)){let e,t=3==o.nodeType?r(o,i,i+1):3==(e=o.childNodes[i]).nodeType?r(e):1==e.nodeType?e:null;if(t){let e=C(t,-1);if(e.top<e.bottom)return x(e,!0)}}return x(C(3==o.nodeType?r(o):o,0),!1)}function x(e,t){if(0==e.width)return e;let o=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:o,right:o}}function M(e,t){if(0==e.height)return e;let o=t?e.top:e.bottom;return{top:o,bottom:o,left:e.left,right:e.right}}function N(e,t,o){let n=e.state,r=e.root.activeElement;n!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return o()}finally{n!=t&&e.updateState(n),r!=e.dom&&r.focus()}}function T(e,t,o){let n=t.selection,i="up"==o?n.$anchor.min(n.$head):n.$anchor.max(n.$head);return N(e,t,()=>{let{node:t}=e.docView.domFromPos(i.pos);for(;;){let o=e.docView.nearestDesc(t,!0);if(!o)break;if(o.node.isBlock){t=o.dom;break}t=o.dom.parentNode}let n=O(e,i.pos);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=r(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let r=t[e];if(r.bottom>r.top&&("up"==o?r.bottom<n.top+1:r.top>n.bottom-1))return!1}}return!0})}const E=/[\u0590-\u08ac]/;function P(e,t,o){let{$head:n}=t.selection;if(!n.parent.isTextblock)return!1;let r=n.parentOffset,i=!r,s=r==n.parent.content.size,l=getSelection();return E.test(n.parent.textContent)&&l.modify?N(e,t,()=>{let t=l.getRangeAt(0),r=l.focusNode,i=l.focusOffset,s=l.caretBidiLevel;l.modify("move",o,"character");let a,d=!(n.depth?e.docView.domAfterPos(n.before()):e.dom).contains(1==l.focusNode.nodeType?l.focusNode:l.focusNode.parentNode)||r==l.focusNode&&i==l.focusOffset;return l.removeAllRanges(),l.addRange(t),null!=s&&(l.caretBidiLevel=s),d}):"left"==o||"backward"==o?i:s}let A=null,V=null,R=!1;function B(e,t,o){return A==t&&V==o?R:(A=t,V=o,R="up"==o||"down"==o?T(e,t,o):P(e,t,o))}},"domobserver.js":function e(t,o,e){let n,r,i,s,l,a;e.export({DOMObserver:()=>p}),e.link("./browser",{default(e){n=e}},0),e.link("./dom",{domIndex(e){r=e},isEquivalentPosition(e){i=e}},1),e.link("./selection",{hasFocusAndSelection(e){s=e},hasSelection(e){l=e},selectionToDOM(e){a=e}},2);const d={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},c=n.ie&&n.ie_version<=11;class h{constructor(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class p{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=!1,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);n.ie&&n.ie_version<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),this.currentSelection=new h,c&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1}flushSoon(){this.flushingSoon||(this.flushingSoon=!0,window.setTimeout(()=>{this.flushingSoon=!1,this.flush()},20))}start(){this.observer&&this.observer.observe(this.view.dom,d),c&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}c&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(s(this.view)){if(this.suppressingSelectionUpdates)return a(this.view);if(n.ie&&n.ie_version<=11&&!this.view.state.selection.empty){let e=this.view.root.getSelection();if(e.focusNode&&i(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.root.getSelection())}ignoreSelectionChange(e){if(0==e.rangeCount)return!0;let t=e.getRangeAt(0).commonAncestorContainer,o=this.view.docView.nearestDesc(t);return o&&o.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})}flush(){if(!this.view.docView||this.flushingSoon)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let t=this.view.root.getSelection(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&l(this.view)&&!this.ignoreSelectionChange(t),r=-1,i=-1,s=!1,d=[];if(this.view.editable)for(let n=0;n<e.length;n++){let t=this.registerMutation(e[n],d);t&&(r=r<0?t.from:Math.min(t.from,r),i=i<0?t.to:Math.max(t.to,i),t.typeOver&&!this.view.composing&&(s=!0))}if(n.gecko&&d.length>1){let e=d.filter(e=>"BR"==e.nodeName);if(2==e.length){let[t,o]=e;t.parentNode&&t.parentNode.parentNode==o.parentNode?o.remove():t.remove()}}(r>-1||o)&&(r>-1&&(this.view.docView.markDirty(r,i),u(this.view)),this.handleDOMChange(r,i,s,d),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||a(this.view))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let o=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(o==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!o||o.ignoreMutation(e))return null;if("childList"==e.type){let i=e.previousSibling,s=e.nextSibling;if(n.ie&&n.ie_version<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:o,nextSibling:n}=e.addedNodes[t];(!o||Array.prototype.indexOf.call(e.addedNodes,o)<0)&&(i=o),(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(s=n)}let l=i&&i.parentNode==e.target?r(i)+1:0,a=o.localPosFromDOM(e.target,l,-1),d=s&&s.parentNode==e.target?r(s):e.target.childNodes.length,c;for(let o=0;o<e.addedNodes.length;o++)t.push(e.addedNodes[o]);return{from:a,to:o.localPosFromDOM(e.target,d,1)}}return"attributes"==e.type?{from:o.posAtStart-o.border,to:o.posAtEnd+o.border}:{from:o.posAtStart,to:o.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let f=!1;function u(e){f||(f=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}},"index.js":function e(t,o,e){let n,r,i,s,l,a,d,c,h,p,f,u,m,g,y,b,v,k,w;e.export({EditorView:()=>S}),e.link("prosemirror-state",{NodeSelection(e){n=e}},0),e.link("./domcoords",{scrollRectIntoView(e){r=e},posAtCoords(e){i=e},coordsAtPos(e){s=e},endOfTextblock(e){l=e},storeScrollPos(e){a=e},resetScrollPos(e){d=e},focusPreventScroll(e){c=e}},1),e.link("./viewdesc",{docViewDesc(e){h=e}},2),e.link("./input",{initInput(e){p=e},destroyInput(e){f=e},dispatchEvent(e){u=e},ensureListeners(e){m=e}},3),e.link("./selection",{selectionToDOM(e){g=e},anchorInRightPlace(e){y=e},syncNodeSelection(e){b=e}},4),e.link("./decoration",{Decoration(e){v=e},viewDecorations(e){k=e}},5),e.link("./browser",{default(e){w=e}},6),e.link("./decoration",{Decoration:"Decoration",DecorationSet:"DecorationSet"},7),e.link("./clipboard",{serializeForClipboard:"__serializeForClipboard",parseFromClipboard:"__parseFromClipboard"},8),e.link("./input",{endComposition:"__endComposition"},9);class S{constructor(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=O(this),this.markCursor=null,this.cursorWrapper=null,C(this),this.nodeViews=M(this),this.docView=h(this.state.doc,D(this),k(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,p(this),this.pluginViews=[],this.updatePluginViews()}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&m(this),this._props=e,this.updateStateInner(e.state,!0)}setProps(e){let t={};for(let o in this._props)t[o]=this._props[o];t.state=this.state;for(let o in e)t[o]=e[o];this.update(t)}updateState(e){this.updateStateInner(e,this.state.plugins!=e.plugins)}updateStateInner(e,t){let o=this.state,i=!1;if(this.state=e,t){let e=M(this);N(e,this.nodeViews)&&(this.nodeViews=e,i=!0),m(this)}this.editable=O(this),C(this);let s=k(this),l=D(this),c=t?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",p=i||!this.docView.matchesNode(e.doc,l,s),f=p||!e.selection.eq(o.selection),u="preserve"==c&&f&&null==this.dom.style.overflowAnchor&&a(this);if(f){this.domObserver.stop();let t=p&&(w.ie||w.chrome)&&!o.selection.empty&&!e.selection.empty&&x(o.selection,e.selection);p&&(!i&&this.docView.update(e.doc,l,s,this)||(this.docView.destroy(),this.docView=h(e.doc,l,s,this.dom,this))),t||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&y(this))?g(this,t):(b(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==c)this.dom.scrollTop=0;else if("to selection"==c){let t=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",e=>e(this))||(e.selection instanceof n?r(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),t):r(this,this.coordsAtPos(e.selection.head),t))}else u&&d(u)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins)for(let t=0;t<this.pluginViews.length;t++){let o=this.pluginViews[t];o.update&&o.update(this,e)}else{this.destroyPluginViews();for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}someProp(e,t){let o=this._props&&this._props[e],n;if(null!=o&&(n=t?t(o):o))return n;let r=this.state.plugins;if(r)for(let i=0;i<r.length;i++){let o=r[i].props[e];if(null!=o&&(n=t?t(o):o))return n}}hasFocus(){return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&c(this.dom),g(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>document.getSelection()),this._root=t;return e||document}posAtCoords(e){return i(this,e)}coordsAtPos(e){return s(this,e)}domAtPos(e){return this.docView.domFromPos(e)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=this.docView.posFromDOM(e,t,o);if(null==n)throw new RangeError("DOM position not inside the editor");return n}endOfTextblock(e,t){return l(this,t||this.state,e)}destroy(){this.docView&&(f(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],k(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}dispatchEvent(e){return u(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}}function D(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",o=>{if("function"==typeof o&&(o=o(e.state)),o)for(let e in o)"class"==e?t.class+=" "+o[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(o[e]))}),[v.node(0,e.state.doc.content.size,t)]}function C(e){let{$head:t,$anchor:o,visible:n}=e.state.selection;if(e.markCursor){let o=document.createElement("img");o.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:o,deco:v.widget(t.pos,o,{raw:!0,marks:e.markCursor})}}else if(n||t.pos!=o.pos)e.cursorWrapper=null;else{let o;!e.cursorWrapper||e.cursorWrapper.dom.childNodes.length?((o=document.createElement("div")).style.position="absolute",o.style.left="-100000px"):e.cursorWrapper.deco.pos!=t.pos&&(o=e.cursorWrapper.dom),o&&(e.cursorWrapper={dom:o,deco:v.widget(t.pos,o,{raw:!0})})}}function O(e){return!e.someProp("editable",t=>!1===t(e.state))}function x(e,t){let o=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.node(o)!=t.$anchor.node(o)}function M(e){let t={};return e.someProp("nodeViews",e=>{for(let o in e)Object.prototype.hasOwnProperty.call(t,o)||(t[o]=e[o])}),t}function N(e,t){let o=0,n=0;for(let r in e){if(e[r]!=t[r])return!0;o++}for(let r in t)n++;return o!=n}},"input.js":function e(t,o,e){let n,r,i,s,l,a,d,c,h,p,f,u,m;e.export({initInput:()=>b,destroyInput:()=>k,ensureListeners:()=>w,dispatchEvent:()=>C,endComposition:()=>_}),e.link("prosemirror-state",{Selection(e){n=e},NodeSelection(e){r=e},TextSelection(e){i=e}},0),e.link("prosemirror-transform",{dropPoint(e){s=e}},1),e.link("prosemirror-model",{Slice(e){l=e}},2),e.link("./browser",{default(e){a=e}},3),e.link("./capturekeys",{captureKeyDown(e){d=e}},4),e.link("./domchange",{readDOMChange(e){c=e}},5),e.link("./clipboard",{parseFromClipboard(e){h=e},serializeForClipboard(e){p=e}},6),e.link("./domobserver",{DOMObserver(e){f=e}},7),e.link("./selection",{selectionBetween(e){u=e}},8),e.link("./dom",{keyEvent(e){m=e}},9);const g={},y={};function b(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new f(e,(t,o,n,r)=>c(e,t,o,n,r)),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);for(let t in g){let o=g[t];e.dom.addEventListener(t,e.eventHandlers[t]=t=>{!D(e,t)||S(e,t)||!e.editable&&t.type in y||o(e,t)})}a.safari&&e.dom.addEventListener("input",()=>null),w(e)}function v(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function k(e){e.domObserver.stop();for(let t in e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout)}function w(e){e.someProp("handleDOMEvents",t=>{for(let o in t)e.eventHandlers[o]||e.dom.addEventListener(o,e.eventHandlers[o]=t=>S(e,t))})}function S(e,t){return e.someProp("handleDOMEvents",o=>{let n=o[t.type];return!!n&&(n(e,t)||t.defaultPrevented)})}function D(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let o=t.target;o!=e.dom;o=o.parentNode)if(!o||11==o.nodeType||o.pmViewDesc&&o.pmViewDesc.stopEvent(t))return!1;return!0}function C(e,t){S(e,t)||!g[t.type]||!e.editable&&t.type in y||g[t.type](e,t)}function O(e){return{left:e.clientX,top:e.clientY}}function x(e,t){let o=t.x-e.clientX,n=t.y-e.clientY;return o*o+n*n<100}function M(e,t,o,n,r){if(-1==n)return!1;let i=e.state.doc.resolve(n);for(let s=i.depth+1;s>0;s--)if(e.someProp(t,t=>s>i.depth?t(e,o,i.nodeAfter,i.before(s),r,!0):t(e,o,i.node(s),i.before(s),r,!1)))return!0;return!1}function N(e,t,o){e.focused||e.focus();let n=e.state.tr.setSelection(t);"pointer"==o&&n.setMeta("pointer",!0),e.dispatch(n)}function T(e,t){if(-1==t)return!1;let o=e.state.doc.resolve(t),n=o.nodeAfter;return!!(n&&n.isAtom&&r.isSelectable(n))&&(N(e,new r(o),"pointer"),!0)}function E(e,t){if(-1==t)return!1;let o=e.state.selection,n,i;o instanceof r&&(n=o.node);let s=e.state.doc.resolve(t);for(let l=s.depth+1;l>0;l--){let e=l>s.depth?s.nodeAfter:s.node(l);if(r.isSelectable(e)){i=n&&o.$from.depth>0&&l>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(l);break}}return null!=i&&(N(e,r.create(e.state.doc,i),"pointer"),!0)}function P(e,t,o,n,r){return M(e,"handleClickOn",t,o,n)||e.someProp("handleClick",o=>o(e,t,n))||(r?E(e,o):T(e,o))}function A(e,t,o,n){return M(e,"handleDoubleClickOn",t,o,n)||e.someProp("handleDoubleClick",o=>o(e,t,n))}function V(e,t,o,n){return M(e,"handleTripleClickOn",t,o,n)||e.someProp("handleTripleClick",o=>o(e,t,n))||R(e,o)}function R(e,t){let o=e.state.doc;if(-1==t)return!!o.inlineContent&&(N(e,i.create(o,0,o.content.size),"pointer"),!0);let n=o.resolve(t);for(let s=n.depth+1;s>0;s--){let t=s>n.depth?n.nodeAfter:n.node(s),l=n.before(s);if(t.inlineContent)N(e,i.create(o,l+1,l+1+t.content.size),"pointer");else{if(!r.isSelectable(t))continue;N(e,r.create(o,l),"pointer")}return!0}}function B(e){return _(e)}y.keydown=(e,t)=>{e.shiftKey=16==t.keyCode||t.shiftKey,I(e,t)||(e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!a.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey?e.someProp("handleKeyDown",o=>o(e,t))||d(e,t)?t.preventDefault():v(e,"key"):e.lastIOSEnter=Date.now())},y.keyup=(e,t)=>{16==t.keyCode&&(e.shiftKey=!1)},y.keypress=(e,t)=>{if(I(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||a.mac&&t.metaKey)return;if(e.someProp("handleKeyPress",o=>o(e,t)))return void t.preventDefault();let o=e.state.selection;if(!(o instanceof i&&o.$from.sameParent(o.$to))){let n=String.fromCharCode(t.charCode);e.someProp("handleTextInput",t=>t(e,o.$from.pos,o.$to.pos,n))||e.dispatch(e.state.tr.insertText(n).scrollIntoView()),t.preventDefault()}};const L=a.mac?"metaKey":"ctrlKey";g.mousedown=(e,t)=>{e.shiftKey=t.shiftKey;let o=B(e),n=Date.now(),r="singleClick";n-e.lastClick.time<500&&x(t,e.lastClick)&&!t[L]&&("singleClick"==e.lastClick.type?r="doubleClick":"doubleClick"==e.lastClick.type&&(r="tripleClick")),e.lastClick={time:n,x:t.clientX,y:t.clientY,type:r};let i=e.posAtCoords(O(t));i&&("singleClick"==r?e.mouseDown=new z(e,i,t,o):("doubleClick"==r?A:V)(e,i.pos,i.inside,t)?t.preventDefault():v(e,"pointer"))};class z{constructor(e,t,o,n){let i,s;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=o,this.flushed=n,this.selectNode=o[L],this.allowDefault=o.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),s=t.inside;else{let o=e.state.doc.resolve(t.pos);i=o.parent,s=o.depth?o.before():0}this.mightDrag=null;const l=n?null:o.target,d=l?e.docView.nearestDesc(l,!0):null;this.target=d?d.dom:null,(i.type.spec.draggable&&!1!==i.type.spec.selectable||e.state.selection instanceof r&&s==e.state.selection.from)&&(this.mightDrag={node:i,pos:s,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&a.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>this.target.setAttribute("contentEditable","false"),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),v(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(O(e))),this.allowDefault||!t?v(this.view,"pointer"):P(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():!this.flushed&&(!a.chrome||this.view.state.selection instanceof i||t.pos!=this.view.state.selection.from&&t.pos!=this.view.state.selection.to)?v(this.view,"pointer"):(N(this.view,n.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault())}move(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),v(this.view,"pointer")}}function I(e,t){return!!e.composing||!!(a.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}g.touchdown=e=>{B(e),v(e,"pointer")},g.contextmenu=e=>B(e);const F=a.android?5e3:-1;function q(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout(()=>_(e),t))}function _(e,t){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty();return!(!t&&!e.docView.dirty)&&(e.updateState(e.state),!0)}function $(e,t){let o=e.dom.ownerDocument,n=o.body.appendChild(o.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=o.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{o.body.removeChild(n),e.focus()},50)}y.compositionstart=y.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,o=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!o.textOffset&&o.parentOffset&&o.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||o.marks(),_(e,!0),e.markCursor=null;else if(_(e),a.gecko&&t.selection.empty&&o.parentOffset&&!o.textOffset&&o.nodeBefore.marks.length){let t=e.root.getSelection();for(let e=t.focusNode,o=t.focusOffset;e&&1==e.nodeType&&0!=o;){let n=o<0?e.lastChild:e.childNodes[o-1];if(!n)break;if(3==n.nodeType){t.collapse(n,n.nodeValue.length);break}e=n,o=-1}}e.composing=!0}q(e,F)},y.compositionend=(e,t)=>{e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,q(e,20))};const K=a.ie&&a.ie_version<15||a.ios&&a.webkit_version<604;function j(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function W(e,t){let o=e.dom.ownerDocument,n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=o.body.appendChild(o.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{e.focus(),o.body.removeChild(r),n?H(e,r.value,null,t):H(e,r.textContent,r.innerHTML,t)},50)}function H(e,t,o,n){let r=h(e,t,o,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,n,r||l.empty))||!r)return;let i=j(r),s=i?e.state.tr.replaceSelectionWith(i,e.shiftKey):e.state.tr.replaceSelection(r);e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}g.copy=y.cut=(e,t)=>{let o=e.state.selection,n="cut"==t.type;if(o.empty)return;let r=K?null:t.clipboardData,i=o.content(),{dom:s,text:l}=p(e,i);r?(t.preventDefault(),r.clearData(),r.setData("text/html",s.innerHTML),r.setData("text/plain",l)):$(e,s),n&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},y.paste=(e,t)=>{let o=K?null:t.clipboardData,n=o&&o.getData("text/html"),r=o&&o.getData("text/plain");o&&(n||r||o.files.length)?(H(e,r,n,t),t.preventDefault()):W(e,t)};class U{constructor(e,t){this.slice=e,this.move=t}}const G=a.mac?"altKey":"ctrlKey";g.dragstart=(e,t)=>{let o=e.mouseDown;if(o&&o.done(),!t.dataTransfer)return;let n=e.state.selection,i=n.empty?null:e.posAtCoords(O(t));if(i&&i.pos>=n.from&&i.pos<=(n instanceof r?n.to-1:n.to));else if(o&&o.mightDrag)e.dispatch(e.state.tr.setSelection(r.create(e.state.doc,o.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){let o=e.docView.nearestDesc(t.target,!0);if(!o||!o.node.type.spec.draggable||o==e.docView)return;e.dispatch(e.state.tr.setSelection(r.create(e.state.doc,o.posBefore)))}let s=e.state.selection.content(),{dom:l,text:a}=p(e,s);t.dataTransfer.clearData(),t.dataTransfer.setData(K?"Text":"text/html",l.innerHTML),K||t.dataTransfer.setData("text/plain",a),e.dragging=new U(s,!t[G])},g.dragend=e=>{window.setTimeout(()=>e.dragging=null,50)},y.dragover=y.dragenter=(e,t)=>t.preventDefault(),y.drop=(e,t)=>{let o=e.dragging;if(e.dragging=null,!t.dataTransfer)return;let n=e.posAtCoords(O(t));if(!n)return;let i=e.state.doc.resolve(n.pos);if(!i)return;let l=o&&o.slice||h(e,t.dataTransfer.getData(K?"Text":"text/plain"),K?null:t.dataTransfer.getData("text/html"),!1,i);if(!l)return;if(t.preventDefault(),e.someProp("handleDrop",n=>n(e,t,l,o&&o.move)))return;let a=l?s(e.state.doc,i.pos,l):i.pos;null==a&&(a=i.pos);let d=e.state.tr;o&&o.move&&d.deleteSelection();let c=d.mapping.map(a),p=0==l.openStart&&0==l.openEnd&&1==l.content.childCount,f=d.doc;if(p?d.replaceRangeWith(c,c,l.content.firstChild):d.replaceRange(c,c,l),d.doc.eq(f))return;let m=d.doc.resolve(c);p&&r.isSelectable(l.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(l.content.firstChild)?d.setSelection(new r(m)):d.setSelection(u(e,m,d.doc.resolve(d.mapping.map(a)))),e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))},g.focus=e=>{e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0)},g.blur=e=>{e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},g.beforeinput=(e,t)=>{if(a.chrome&&a.android&&"deleteContentBackward"==t.inputType){let{domChangeCount:t}=e;setTimeout(()=>{if(e.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,m(8,"Backspace"))))return;let{$cursor:o}=e.state.selection;o&&o.pos>0&&e.dispatch(e.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let X in y)g[X]=y[X]},"selection.js":function e(t,o,e){let n,r,i,s,l,a,d;function c(e,t){let o=e.root.getSelection(),n=e.state.doc,i=e.docView.nearestDesc(o.focusNode),l=i&&0==i.size,a=e.docView.posFromDOM(o.focusNode,o.focusOffset),d=n.resolve(a),c,p;if(s(o)){for(c=d;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&r.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!h(o,i.dom))){let e=i.posBefore;p=new r(a==e?d:n.resolve(e))}}else c=n.resolve(e.docView.posFromDOM(o.anchorNode,o.anchorOffset));if(!p){let o;p=w(e,c,d,"pointer"==t||e.state.selection.head<d.pos&&!l?1:-1)}return p}function h(e,t){for(let o=e.focusNode,n=e.focusOffset,r=n;o;){if(o==t)return 0==n||r==d(t);r=(n=a(o))+1,o=o.parentNode}}function p(e,t){let o=e.state.selection;if(v(e,o),e.editable?e.hasFocus():D(e)&&document.activeElement.contains(e.dom)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)b(e);else{let{anchor:r,head:i}=o,s,l;!f||o instanceof n||(o.$from.parent.inlineContent||(s=u(e,o.from)),o.empty||o.$from.parent.inlineContent||(l=u(e,o.to))),e.docView.setSelection(r,i,e.root,t),f&&(s&&g(s),l&&g(l)),o.visible?e.dom.classList.remove("ProseMirror-hideselection"):r!=i&&(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&y(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}e.export({selectionFromDOM:()=>c,selectionToDOM:()=>p,syncNodeSelection:()=>v,selectionBetween:()=>w,hasFocusAndSelection:()=>S,hasSelection:()=>D,anchorInRightPlace:()=>C}),e.link("prosemirror-state",{TextSelection(e){n=e},NodeSelection(e){r=e}},0),e.link("./browser",{default(e){i=e}},1),e.link("./dom",{selectionCollapsed(e){s=e},isEquivalentPosition(e){l=e},domIndex(e){a=e},nodeSize(e){d=e}},2);const f=i.safari||i.chrome&&i.chrome_version<63;function u(e,t){let{node:o,offset:n}=e.docView.domFromPos(t),r=n<o.childNodes.length?o.childNodes[n]:null,s=n?o.childNodes[n-1]:null;if(i.safari&&r&&"false"==r.contentEditable)return m(r);if(!(r&&"false"!=r.contentEditable||s&&"false"!=s.contentEditable)){if(r)return m(r);if(s)return m(s)}}function m(e){return e.contentEditable="true",i.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function g(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function y(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);let o=e.root.getSelection(),n=o.anchorNode,r=o.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=()=>{o.anchorNode==n&&o.anchorOffset==r||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}function b(e){let t=e.root.getSelection(),o=document.createRange(),n=e.cursorWrapper.dom,r="IMG"==n.nodeName;r?o.setEnd(n.parentNode,a(n)+1):o.setEnd(n,0),o.collapse(!1),t.removeAllRanges(),t.addRange(o),!r&&!e.state.selection.visible&&i.ie&&i.ie_version<=11&&(n.disabled=!0,n.disabled=!1)}function v(e,t){if(t instanceof r){let o=e.docView.descAt(t.from);o!=e.lastSelectedViewDesc&&(k(e),o&&o.selectNode(),e.lastSelectedViewDesc=o)}else k(e)}function k(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function w(e,t,o,r){return e.someProp("createSelectionBetween",n=>n(e,t,o))||n.between(t,o,r)}function S(e){return(!e.editable||e.root.activeElement==e.dom)&&D(e)}function D(e){let t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(o){return!1}}function C(e){let t=e.docView.domFromPos(e.state.selection.anchor),o=e.root.getSelection();return l(t.node,t.offset,o.anchorNode,o.anchorOffset)}},"viewdesc.js":function e(t,o,e){let n,r,i,s,l,a,d,c;e.export({docViewDesc:()=>w}),e.link("prosemirror-model",{DOMSerializer(e){n=e},Fragment(e){r=e},Mark(e){i=e}},0),e.link("prosemirror-state",{TextSelection(e){s=e}},1),e.link("./dom",{domIndex(e){l=e},isEquivalentPosition(e){a=e},nodeSize(e){d=e}},2),e.link("./browser",{default(e){c=e}},3);const h=0,p=1,f=2,u=3;class m{constructor(e,t,o,n){this.parent=e,this.children=t,this.dom=o,o.pmViewDesc=this,this.contentDOM=n,this.dirty=h}matchesWidget(){return!1}matchesMark(){return!1}matchesNode(){return!1}matchesHack(){return!1}get beforePosition(){return!1}parseRule(){return null}stopEvent(){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,o=this.posAtStart;t<this.children.length;t++){let n=this.children[t];if(n==e)return o;o+=n.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,o){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(o<0){let o,n;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&(!(n=o.pmViewDesc)||n.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(n)+n.size:this.posAtStart}{let o,n;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&(!(n=o.pmViewDesc)||n.parent!=this);)o=o.nextSibling;return o?this.posBeforeChild(n):this.posAtEnd}}let n;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))n=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){n=!1;break}if(t.parentNode.firstChild!=t)break}if(null==n&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){n=!0;break}if(t.parentNode.lastChild!=t)break}}return(null==n?o>0:n)?this.posAtEnd:this.posAtStart}nearestDesc(e,t){for(let o=!0,n=e;n;n=n.parentNode){let r=this.getDesc(n);if(r&&(!t||r.node)){if(!o||!r.nodeDOM||(1==r.nodeDOM.nodeType?r.nodeDOM.contains(e):r.nodeDOM==e))return r;o=!1}}}getDesc(e){let t=e.pmViewDesc;for(let o=t;o;o=o.parent)if(o==this)return t}posFromDOM(e,t,o){for(let n=e;;n=n.parentNode){let r=this.getDesc(n);if(r)return r.localPosFromDOM(e,t,o)}}descAt(e){for(let t=0,o=0;t<this.children.length;t++){let n=this.children[t],r=o+n.size;if(o==e&&r!=o){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(e<r)return n.descAt(e-o-n.border);o=r}}domFromPos(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(let t=0,o=0;;o++){if(t==e){for(;o<this.children.length&&(this.children[o].beforePosition||this.children[o].dom.parentNode!=this.contentDOM);)o++;return{node:this.contentDOM,offset:o==this.children.length?this.contentDOM.childNodes.length:l(this.children[o].dom)}}if(o==this.children.length)throw new Error("Invalid position "+e);let n=this.children[o],r=t+n.size;if(e<r)return n.domFromPos(e-t-n.border);t=r}}parseRange(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let n=-1,r=-1;for(let i=o,s=0;;s++){let o=this.children[s],a=i+o.size;if(-1==n&&e<=a){let r=i+o.border;if(e>=r&&t<=a-o.border&&o.node&&o.contentDOM&&this.contentDOM.contains(o.contentDOM))return o.parseRange(e,t,r);e=i;for(let t=s;t>0;t--){let o=this.children[t-1];if(o.size&&o.dom.parentNode==this.contentDOM&&!o.emptyChildAt(1)){n=l(o.dom)+1;break}e-=o.size}-1==n&&(n=0)}if(n>-1&&t<=a){t=a;for(let e=s+1;e<this.children.length;e++){let o=this.children[e];if(o.size&&o.dom.parentNode==this.contentDOM&&!o.emptyChildAt(-1)){r=l(o.dom);break}t+=o.size}-1==r&&(r=this.contentDOM.childNodes.length);break}i=a}return{node:this.contentDOM,from:e,to:t,fromOffset:n,toOffset:r}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:o}=this.domFromPos(e);if(1!=t.nodeType||o==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[o]}setSelection(e,t,o,n){let r=Math.min(e,t),i=Math.max(e,t);for(let a=0,h=0;a<this.children.length;a++){let s=this.children[a],l=h+s.size;if(r>h&&i<l)return s.setSelection(e-h-s.border,t-h-s.border,o,n);h=l}let s=this.domFromPos(e),l=this.domFromPos(t),d=o.getSelection(),c=document.createRange();if(n||!a(s.node,s.offset,d.anchorNode,d.anchorOffset)||!a(l.node,l.offset,d.focusNode,d.focusOffset)){if(d.extend)c.setEnd(s.node,s.offset),c.collapse(!1);else{if(e>t){let e=s;s=l,l=e}c.setEnd(l.node,l.offset),c.setStart(s.node,s.offset)}d.removeAllRanges(),d.addRange(c),d.extend&&d.extend(l.node,l.offset)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let o=0,n=0;n<this.children.length;n++){let r=this.children[n],i=o+r.size;if(o==i?e<=i&&t>=o:e<i&&t>o){let n=o+r.border,s=i-r.border;if(e>=n&&t<=s)return this.dirty=e==o||t==i?f:p,void(e!=n||t!=s||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(e-n,t-n):r.dirty=u);r.dirty=u}o=i}this.dirty=f}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent){let e=f;t.dirty<e&&(t.dirty=e)}}}const g=[];class y extends m{constructor(e,t,o,n){let r,i=t.type.toDOM;if("function"==typeof i&&(i=i(o,()=>r?r.parent?r.parent.posBeforeChild(r):void 0:n)),!t.type.spec.raw){if(1!=i.nodeType){let e=document.createElement("span");e.appendChild(i),i=e}i.contentEditable=!1,i.classList.add("ProseMirror-widget")}super(e,g,i,null),this.widget=t,r=this}get beforePosition(){return this.widget.type.side<0}matchesWidget(e){return this.dirty==h&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}}class b extends m{constructor(e,t,o,n){super(e,g,t,null),this.textDOM=o,this.text=n}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class v extends m{constructor(e,t,o,n){super(e,[],o,n),this.mark=t}static create(e,t,o,r){let i=r.nodeViews[t.type.name],s=i&&i(t,r,o);return s&&s.dom||(s=n.renderSpec(document,t.type.spec.toDOM(t,o))),new v(e,t,s.dom,s.contentDOM||s.dom)}parseRule(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=u&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=h){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=h}}slice(e,t,o){let n=v.create(this.parent,this.mark,!0,o),r=this.children,i=this.size;t<i&&(r=_(r,t,i,o)),e>0&&(r=_(r,0,e,o));for(let s=0;s<r.length;s++)r[s].parent=n;return n.children=r,n}}class k extends m{constructor(e,t,o,n,r,i,s,l,a){super(e,t.isLeaf?g:[],r,i),this.nodeDOM=s,this.node=t,this.outerDeco=o,this.innerDeco=n,i&&this.updateChildren(l,a)}static create(e,t,o,r,i,s){let l=i.nodeViews[t.type.name],a,d=l&&l(t,i,()=>a?a.parent?a.parent.posBeforeChild(a):void 0:s,o),c=d&&d.dom,h=d&&d.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else c||({dom:c,contentDOM:h}=n.renderSpec(document,t.type.spec.toDOM(t)));h||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable=!1),t.type.spec.draggable&&(c.draggable=!0));let p=c;return c=P(c,o,t),d?a=new C(e,t,o,r,c,h,p,d,i,s+1):t.isText?new S(e,t,o,r,c,p,i):new k(e,t,o,r,c,h,p,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=()=>this.contentDOM?r.empty:this.node.content,e}matchesNode(e,t,o){return this.dirty==h&&e.eq(this.node)&&A(t,this.outerDeco)&&o.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let o=this.node.inlineContent,n=t,r=o&&e.composing&&this.localCompositionNode(e,t),s=new R(this,r&&r.node);z(this.node,this.innerDeco,(t,r,l)=>{t.spec.marks?s.syncToMarks(t.spec.marks,o,e):t.type.side>=0&&!l&&s.syncToMarks(r==this.node.childCount?i.none:this.node.child(r).marks,o,e),s.placeWidget(t,e,n)},(t,r,i,l)=>{s.syncToMarks(t.marks,o,e),s.findNodeMatch(t,r,i,l)||s.updateNextNode(t,r,i,e,l)||s.addNode(t,r,i,e,n),n+=t.nodeSize}),s.syncToMarks(g,o,e),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||this.dirty==f)&&(r&&this.protectLocalComposition(e,r),this.renderChildren())}renderChildren(){O(this.contentDOM,this.children,k.is),c.ios&&I(this.dom)}localCompositionNode(e,t){let{from:o,to:n}=e.state.selection;if(!(e.state.selection instanceof s)||o<t||n>t+this.node.content.size)return;let r=e.root.getSelection(),i=F(r.focusNode,r.focusOffset);if(!i||!this.dom.contains(i.parentNode))return;let l=i.nodeValue,a=q(this.node.content,l,o-t,n-t);return a<0?null:{node:i,pos:a,text:l}}protectLocalComposition(e,t){let{node:o,pos:n,text:r}=t;if(this.getDesc(o))return;let i=o;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}let s=new b(this,i,o,r);e.compositionNodes.push(s),this.children=_(this.children,n,n+r.length,e,s)}update(e,t,o,n){return!(this.dirty==u||!e.sameMarkup(this.node))&&(this.updateInner(e,t,o,n),!0)}updateInner(e,t,o,n){this.updateOuterDeco(t),this.node=e,this.innerDeco=o,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=h}updateOuterDeco(e){if(A(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,o=this.dom;this.dom=T(this.dom,this.nodeDOM,N(this.outerDeco,this.node,t),N(e,this.node,t)),this.dom!=o&&(o.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!1)}}function w(e,t,o,n,r){return P(n,t,e),new k(null,e,t,o,n,n,n,r,0)}class S extends k{constructor(e,t,o,n,r,i,s){super(e,t,o,n,r,null,i,s)}parseRule(){return{skip:this.nodeDOM.parentNode||!0}}update(e,t){return!(this.dirty==u||this.dirty!=h&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),this.dirty==h&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,this.dirty=h,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,o){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,o)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,o){let n=this.node.cut(e,t),r=document.createTextNode(n.text);return new S(this.parent,n,this.outerDeco,this.innerDeco,r,r,o)}}class D extends m{parseRule(){return{ignore:!0}}matchesHack(){return this.dirty==h}}class C extends k{constructor(e,t,o,n,r,i,s,l,a,d){super(e,t,o,n,r,i,s,a,d),this.spec=l}update(e,t,o,n){if(this.dirty==u)return!1;if(this.spec.update){let r=this.spec.update(e,t);return r&&this.updateInner(e,t,o,n),r}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,o,n)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,o,n){this.spec.setSelection?this.spec.setSelection(e,t,o):super.setSelection(e,t,o,n)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function O(e,t){let o=e.firstChild;for(let n=0;n<t.length;n++){let r=t[n],i=r.dom;if(i.parentNode==e){for(;i!=o;)o=V(o);o=o.nextSibling}else e.insertBefore(i,o);if(r instanceof v){let t=o?o.previousSibling:e.lastChild;O(r.contentDOM,r.children),o=t?t.nextSibling:e.firstChild}}for(;o;)o=V(o)}function x(e){e&&(this.nodeName=e)}x.prototype=Object.create(null);const M=[new x];function N(e,t,o){if(0==e.length)return M;let n=o?M[0]:new x,r=[n];for(let i=0;i<e.length;i++){let s=e[i].type.attrs,l=n;if(s){s.nodeName&&r.push(l=new x(s.nodeName));for(let e in s){let i=s[e];null!=i&&(o&&1==r.length&&r.push(l=n=new x(t.isInline?"span":"div")),"class"==e?l.class=(l.class?l.class+" ":"")+i:"style"==e?l.style=(l.style?l.style+";":"")+i:"nodeName"!=e&&(l[e]=i))}}}return r}function T(e,t,o,n){if(o==M&&n==M)return t;let r=t;for(let i=0;i<n.length;i++){let t=n[i],s=o[i];if(i){let o;s&&s.nodeName==t.nodeName&&r!=e&&(o=r.parentNode)&&o.tagName.toLowerCase()==t.nodeName?r=o:((o=document.createElement(t.nodeName)).appendChild(r),s=M[0],r=o)}E(r,s||M[0],t)}return r}function E(e,t,o){for(let n in t)"class"==n||"style"==n||"nodeName"==n||n in o||e.removeAttribute(n);for(let n in o)"class"!=n&&"style"!=n&&"nodeName"!=n&&o[n]!=t[n]&&e.setAttribute(n,o[n]);if(t.class!=o.class){let n=t.class?t.class.split(" "):g,r=o.class?o.class.split(" "):g;for(let t=0;t<n.length;t++)-1==r.indexOf(n[t])&&e.classList.remove(n[t]);for(let t=0;t<r.length;t++)-1==n.indexOf(r[t])&&e.classList.add(r[t])}if(t.style!=o.style){if(t.style){let o=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,n;for(;n=o.exec(t.style);)e.style.removeProperty(n[1])}o.style&&(e.style.cssText+=o.style)}}function P(e,t,o){return T(e,e,M,N(t,o,1!=e.nodeType))}function A(e,t){if(e.length!=t.length)return!1;for(let o=0;o<e.length;o++)if(!e[o].type.eq(t[o].type))return!1;return!0}function V(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class R{constructor(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;let o=B(e.node.content,e.children);this.preMatched=o.nodes,this.preMatchOffset=o.offset}getPreMatch(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null}destroyBetween(e,t){if(e!=t){for(let o=e;o<t;o++)this.top.children[o].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,o){let n=0,r=this.stack.length>>1,i=Math.min(r,e.length);for(;n<i&&(n==r-1?this.top:this.stack[n+1<<1]).matchesMark(e[n])&&!1!==e[n].type.spec.spanning;)n++;for(;n<r;)this.destroyRest(),this.top.dirty=h,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);let n=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++)if(this.top.children[t].matchesMark(e[r])){n=t;break}if(n>-1)n>this.index&&(this.changed=!0,this.destroyBetween(this.index,n)),this.top=this.top.children[this.index];else{let n=v.create(this.top,e[r],t,o);this.top.children.splice(this.index,0,n),this.top=n,this.changed=!0}this.index=0,r++}}findNodeMatch(e,t,o,n){let r=-1,i=n<0?void 0:this.getPreMatch(n),s=this.top.children;if(i&&i.matchesNode(e,t,o))r=s.indexOf(i);else for(let l=this.index,a=Math.min(s.length,l+5);l<a;l++){let n=s[l];if(n.matchesNode(e,t,o)&&this.preMatched.indexOf(n)<0){r=l;break}}return!(r<0)&&(this.destroyBetween(this.index,r),this.index++,!0)}updateNextNode(e,t,o,n,r){if(this.index==this.top.children.length)return!1;let i=this.top.children[this.index];if(i instanceof k){let s=this.preMatched.indexOf(i);if(s>-1&&s+this.preMatchOffset!=r)return!1;let l=i.dom,a;if(!(this.lock&&(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))&&!(e.isText&&i.node&&i.node.isText&&i.nodeDOM.nodeValue==e.text&&i.dirty!=u&&A(t,i.outerDeco)))&&i.update(e,t,o,n))return i.dom!=l&&(this.changed=!0),this.index++,!0}return!1}addNode(e,t,o,n,r){this.top.children.splice(this.index++,0,k.create(this.top,e,t,o,n,r)),this.changed=!0}placeWidget(e,t,o){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{let n=new y(this.top,e,t,o);this.top.children.splice(this.index++,0,n),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1];for(;e instanceof v;)e=e.children[e.children.length-1];if(!e||!(e instanceof S)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{let e=document.createElement("br");this.top.children.splice(this.index++,0,new D(this.top,g,e,null)),this.changed=!0}}}function B(e,t){let o=[],n=e.childCount;for(let r=t.length-1;n>0&&r>=0;r--){let i=t[r],s=i.node;if(s){if(s!=e.child(n-1))break;o.push(i),--n}}return{nodes:o.reverse(),offset:n}}function L(e,t){return e.type.side-t.type.side}function z(e,t,o,n){let r=t.locals(e),i=0;if(0==r.length){for(let o=0;o<e.childCount;o++){let s=e.child(o);n(s,r,t.forChild(i,s),o),i+=s.nodeSize}return}let s=0,l=[],a=null;for(let d=0;;){if(s<r.length&&r[s].to==i){let e=r[s++],t;for(;s<r.length&&r[s].to==i;)(t||(t=[e])).push(r[s++]);if(t){t.sort(L);for(let e=0;e<t.length;e++)o(t[e],d,!!a)}else o(e,d,!!a)}let c,h;if(a)h=-1,c=a,a=null;else{if(!(d<e.childCount))break;h=d,c=e.child(d++)}for(let e=0;e<l.length;e++)l[e].to<=i&&l.splice(e--,1);for(;s<r.length&&r[s].from==i;)l.push(r[s++]);let p=i+c.nodeSize;if(c.isText){let e=p;s<r.length&&r[s].from<e&&(e=r[s].from);for(let t=0;t<l.length;t++)l[t].to<e&&(e=l[t].to);e<p&&(a=c.cut(e-i),c=c.cut(0,e-i),p=e,h=-1)}n(c,l.length?l.slice():g,t.forChild(i,c),h),i=p}}function I(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function F(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=d(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}function q(e,t,o,n){for(let r="",i=0,s=0;i<e.childCount;i++){let l=e.child(i),a=s+l.nodeSize;if(l.isText){if(r+=l.text,a>=n){let e=a-r.length,i=r.lastIndexOf(t);for(;i>-1&&e+i>o;)i=r.lastIndexOf(t,i-1);if(i>-1&&e+i+t.length>=n)return e+i;if(a>n)break}}else r="";s=a}return-1}function _(e,t,o,n,r){let i=[];for(let s=0,l=0;s<e.length;s++){let a=e[s],d=l,c=l+=a.size;d>=o||c<=t?i.push(a):(d<t&&i.push(a.slice(0,t-d,n)),r&&(i.push(r),r=null),c>o&&i.push(a.slice(o-d,a.size,n)))}return i}}},"PlainTextEditor.js":function e(t,o,e){let n,r,i,s,l,a,d,c,h,p,f,u,m;e.export({PlainTextEditor:()=>v}),e.link("prosemirror-model",{Schema(e){n=e}},0),e.link("prosemirror-state",{Plugin(e){r=e}},1),e.link("prosemirror-keymap",{keymap(e){i=e}},2),e.link("prosemirror-history",{history(e){s=e},redo(e){l=e},undo(e){a=e}},3),e.link("prosemirror-inputrules",{undoInputRule(e){d=e}},4),e.link("prosemirror-commands",{baseKeymap(e){c=e}},5),e.link("prosemirror-gapcursor",{gapCursor(e){h=e}},6),e.link("prosemirror-dropcursor",{dropCursor(e){p=e}},7),e.link("./prosemirror-view",{DecorationSet(e){f=e},Decoration(e){u=e}},8),e.link("./SegmentEditor",{SegmentEditor(e){m=e}},9);const g=new n({nodes:{doc:{content:"text*"},text:{}},marks:{}}),y=new r({props:{decorations(e){if(0===e.doc.childCount)return f.create(e.doc,[u.widget(0,document.createTextNode("Reference here"))])}}}),b={schema:g,plugins:[i({"Mod-z":a,"Shift-Mod-z":l,Backspace:d}),i(c),p(),h(),s(),y]};class v extends m{constructor(e){super(e,b)}}},"ReadingEditor.js":function e(t,o,e){let n,r,i,s,l,a,d,c,h,p,f,u,m,g,y,b,v,k,w,S,D,C,O,x,M,N,T,E,P,A;e.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),e.export({ReadingEditor:()=>I}),e.link("./SegmentEditor",{SegmentEditor(e){r=e}},0),e.link("prosemirror-inputrules",{inputRules(e){i=e},smartQuotes(e){s=e},undoInputRule(e){l=e}},1),e.link("prosemirror-keymap",{keymap(e){a=e}},2),e.link("prosemirror-history",{history(e){d=e},redo(e){c=e},undo(e){h=e}},3),e.link("prosemirror-commands",{baseKeymap(e){p=e},chainCommands(e){f=e},joinDown(e){u=e},joinUp(e){m=e},liftEmptyBlock(e){g=e},splitBlock(e){y=e},toggleMark(e){b=e}},4),e.link("prosemirror-dropcursor",{dropCursor(e){v=e}},5),e.link("prosemirror-gapcursor",{gapCursor(e){k=e}},6),e.link("prosemirror-model",{DOMSerializer(e){w=e},Schema(e){S=e}},7),e.link("prosemirror-state",{Plugin(e){D=e},TextSelection(e){C=e}},8),e.link("./prosemirror-view",{Decoration(e){O=e},DecorationSet(e){x=e}},9),e.link("./editorUtils",{boldAndItalic(e){M=e},hard_break(e){N=e},mac(e){T=e},pageBreakPadding(e){E=e},splittedText(e){P=e}},10),e.link("./placeholders",{placeReadings(e){A=e}},11);const V=new S({nodes:{doc:{content:"paragraph+"},paragraph:{content:"(text|hard_break|pageBreakPadding)*",parseDOM:[{tag:"p"}],toDOM:()=>["p",0]},text:{},hard_break:N,pageBreakPadding:n({},E,{inline:!0})},marks:n({},M,{splittedText:P})});function R(e,t){t&&t(e.tr.removeMark(e.selection.$from.parentOffset,e.selection.$from.pos,V.marks.splittedText).replaceSelectionWith(V.nodes.hard_break.create()))}const B=new D({props:{decorations(e){const t=e.doc.content,o=t.content[0];if(1==t.childCount&&0==o.content.size){const t=document.createElement("span");return t.appendChild(new Text("Paste reading here...")),t.className="placeholder",x.create(e.doc,[O.widget(1,t)])}}}}),L=new D({props:{handleDrop(e,t,o,n){const r=t.dataTransfer.getData("text/plain");let i;try{i=JSON.parse(r)}catch(s){return!1}return!(!i||"com.devian.nightfever-booklet-generation.readings"!==i.type)&&(A(i),!0)}}}),z=[L,i({rules:s}),a({"Mod-z":h,"Shift-Mod-z":c,Backspace:l,"Alt-ArrowUp":m,"Alt-ArrowDown":u,"Mod-b":b(V.marks.strong),"Mod-B":b(V.marks.strong),"Mod-i":b(V.marks.em),"Mod-I":b(V.marks.em),"Mod-Enter":R,"Shift-Enter":R,"Ctrl-Alt-n":R,[T?"Ctrl-Enter":null]:R}),a(p),v(),k(),d(),B];class I extends r{constructor(e){super(e,{schema:V,plugins:z})}}},"SegmentEditor.js":function e(t,o,e){let n,r,i,s,l;e.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),e.export({SegmentEditor:()=>a}),e.link("prosemirror-state",{EditorState(e){r=e}},0),e.link("./prosemirror-view",{EditorView(e){i=e}},1),e.link("prosemirror-model",{DOMParser(e){s=e}},2),e.link("./insertPageBreaks",{insertAutoPageBreaks(e){l=e}},3);class a extends i{constructor(e,t){let o;const i=s.fromSchema(t.schema),a={state:r.create(n({},t,{doc:i.parse(e)})),dispatchTransaction(e){const t=e.docChanged&&null!==o.dom.querySelector(".inserted-by-pagebreaker");if(t&&null!==this.savedSelection){const t=this.savedSelection.resolve(e.doc);e=e.setSelection(t),this.savedSelection=null}const n=o.state.apply(e);o.updateState(n),e.docChanged&&!t&&(this.savedSelection=e.selection.getBookmark(),l())},handleScrollToSelection:e=>!0};super({mount:e},a),o=this,this.savedSelection=null,this.parser=i,this.editorStateConfig=t,e.pmEditor=this}setInnerHTML(e){const t=document.createElement("div");t.innerHTML=e,this.updateState(r.create(n({},this.editorStateConfig,{doc:this.parser.parse(t)})))}}},"SongEditor.js":function e(t,o,e){let n,r,i,s,l,a,d,c,h,p,f,u,m,g,y,b,v,k,w,S,D,C,O,x,M;e.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),e.export({songSchema:()=>N,songPlugins:()=>E,SongEditor:()=>A}),e.link("prosemirror-schema-list",{orderedList(e){r=e},splitListItem(e){i=e}},0),e.link("prosemirror-model",{Schema(e){s=e}},1),e.link("prosemirror-inputrules",{inputRules(e){l=e},smartQuotes(e){a=e},undoInputRule(e){d=e}},2),e.link("prosemirror-keymap",{keymap(e){c=e},base(e){h=e}},3),e.link("prosemirror-dropcursor",{dropCursor(e){p=e}},4),e.link("prosemirror-gapcursor",{gapCursor(e){f=e}},5),e.link("prosemirror-history",{history(e){u=e},undo(e){m=e},redo(e){g=e}},6),e.link("prosemirror-commands",{joinUp(e){y=e},joinDown(e){b=e},baseKeymap(e){v=e},toggleMark(e){k=e}},7),e.link("./commands",{replaceSelectionWith(e){w=e},toggleNodeAttribute(e){S=e}},8),e.link("./SegmentEditor",{SegmentEditor(e){D=e}},9),e.link("./editorUtils",{boldAndItalic(e){C=e},hard_break(e){O=e},mac(e){x=e},pageBreakPadding(e){M=e}},10);const N=new s({nodes:{doc:{content:"song"},song:n({},r,{content:"verse (verse|pageBreakPadding)*",attrs:{hasTwoColumns:{default:!1}},toDOM:e=>["ol",{class:e.attrs.hasTwoColumns?"two-columns":""},0],parseDOM:[{tag:"ol",getAttrs(e){if(e.classList.contains("two-columns"))return{hasTwoColumns:!0}}}]}),verse:{defining:!0,content:"(text|hard_break)*",attrs:{isRefrain:{default:!1}},toDOM:e=>["li",{class:e.attrs.isRefrain?"refrain avoid-pagebreak":"avoid-pagebreak"},0],parseDOM:[{tag:"li",getAttrs(e){if(e.classList.contains("refrain"))return{isRefrain:!0}}}]},text:{},hard_break:O,pageBreakPadding:M},marks:C}),T=w(N.nodes.hard_break),E=[l({rules:a}),c({"Mod-z":m,"Shift-Mod-z":g,Backspace:d,"Alt-ArrowUp":y,"Alt-ArrowDown":b,"Mod-b":k(N.marks.strong),"Mod-B":k(N.marks.strong),"Mod-i":k(N.marks.em),"Mod-I":k(N.marks.em),"Mod-Enter":T,"Shift-Enter":T,[x?"Ctrl-Enter":null]:T,Enter:i(N.nodes.list_item)}),c(v),c({"Ctrl-r":S(N.nodes.verse,"isRefrain")}),c({"Ctrl-t":S(N.nodes.song,"hasTwoColumns")}),p(),f(),u()],P={schema:N,plugins:E};class A extends D{constructor(e){super(e,P)}}},"commands.js":function e(t,o,e){let n,r;function i(e){return n(r,(t,o)=>(o(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0))}function s(e,t){const o=t=>t.type===e;return function(e,n){const{pos:r,node:i}=l(o)(e.selection);return!(!i||!n)&&(n(e.tr.setNodeMarkup(r,null,{[t]:!i.attrs[t]})),!0)}}function l(e){return function(t){var o;return a(t.$from,e)}}function a(e,t){for(var o=e.depth;o>0;o--){var n=e.node(o);if(t(n))return{pos:o>0?e.before(o):0,start:e.start(o),depth:o,node:n}}}e.export({replaceSelectionWith:()=>i,toggleNodeAttribute:()=>s}),e.link("prosemirror-commands",{chainCommands(e){n=e},exitCode(e){r=e}},0)},"editorUtils.js":function e(t,o,e){let n;e.export({mac:()=>r,boldAndItalic:()=>i,splittedText:()=>s,pageBreakPadding:()=>l,hard_break:()=>a}),e.link("./insertPageBreaks",{createPageBreakPadding(e){n=e}},0);const r="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),i={em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!=e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:()=>["strong",0]}},s={parseDOM:[{tag:"span.splitted"}],toDOM:()=>["span",{class:"splitted"},0]},l={attrs:{height:{default:"20mm"},manual:{default:!1}},atom:!0,selectable:!1,parseDOM:[{tag:"div.pagebreak-padding",getAttrs:e=>({height:e.style.height,manual:e.classList.contains("prefer-pagebreak")})}],toDOM(e){const t=n(e.attrs.height);return e.attrs.manual&&t.classList.add("prefer-pagebreak","unused"),t}},a={inline:!0,selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}},"insertPageBreaks.js":function e(t,o,e){let n;function r(){document.querySelectorAll(".prefer-pagebreak").forEach(e=>{e.classList.remove("pagebreak-padding"),e.classList.add("unused")}),document.querySelectorAll("span.splitted").forEach(e=>e.parentNode.replaceChild(e.childNodes[0],e)),document.querySelectorAll(".pagebreak-padding").forEach(e=>{const t=e.parentNode;t.removeChild(e),t.normalize()})}function i(){r();const e=Array.from(document.querySelectorAll(".prefer-pagebreak.unused")).map(e=>({node:e,offset:g(e)}));e.sort((e,t)=>e.offset-t.offset);for(let t=0;t<3;t++)s(t,e)}function s(e,t){const o=u(),n=(210*(e+1)-10)*o,r=n+20*o;for(;t.length>0&&t[0].offset<n;){const e=t.shift().node,n=c(e,r,o);n.classList.add("prefer-pagebreak"),e.parentNode.removeChild(e)}for(const i of h(n,r))if(i.nodeType===Node.TEXT_NODE){const e=l(i,n);c(e,r,o)}else c(i,r,o)}function l(e,t){const o=document.createRange(),n=a(e.nodeValue.length,s);let r;if(0!==n)r=e.splitText(n);else{if(null===e.previousSibling)return e.parentNode;r=e,e=e.previousSibling}const i=document.createElement("span");return e.parentNode.replaceChild(i,e),i.appendChild(e),i.className="splitted",r;function s(n){return o.setStart(e,n),o.setEnd(e,n+1),g(o,!0)>t}}function a(e,t){let o=-1,n=e;for(;1+o<n;){const e=o+(n-o>>1);t(e)?n=e:o=e}return n}function d(e){const t=document.createElement("div");return t.className="pagebreak-padding",e&&(t.style.height=e),t}function c(e,t,o){const n=d();n.classList.add("inserted-by-pagebreaker"),e.parentNode.insertBefore(n,e);const r=g(n,!1),i=(t-r)/o;return n.style.height=i+"mm",n}function h(e,t){return o(document.querySelectorAll("section > *:not(.page-indicators)").values());function o(r){for(const i of r){const r=y(i);if((!i.className||!i.classList.contains("pagebreak-padding"))&&(r.bottom>e&&r.top<t))return f(i)?Array.from(i.children).filter(t=>g(t,!0)>e).flatMap(e=>o([e])):n(i)?o(i.childNodes):[i]}return r.length>0?[r[r.length-1]]:[]}function n(e){return p(e)&&e.hasChildNodes()}}function p(e){return!e.classList||!(e.classList.contains("avoid-pagebreak")||e.classList.contains("two-columns")||e.classList.contains("plaintext-editor"))}function f(e){return e.classList&&e.classList.contains("flex")}function u(){return n.clientWidth/148}function m(){n=document.querySelector("section")}function g(e,t){if(e.nodeType===Node.TEXT_NODE){const t=document.createRange();t.selectNode(e),e=t}const o=n.getBoundingClientRect().y,r=e.getBoundingClientRect();return(!0===t?r.bottom:r.y)-o}function y(e){if(e.nodeType===Node.TEXT_NODE){const t=document.createRange();t.selectNode(e),e=t}const t=n.getBoundingClientRect().y,o=e.getBoundingClientRect();return{top:o.top-t,bottom:o.bottom-t}}e.export({insertAutoPageBreaks:()=>i,createPageBreakPadding:()=>d,setSection:()=>m}),window.addEventListener("load",m),window.iAPB=i},"placeholders.js":function e(t,o,e){let n,r;e.export({placeReadings:()=>s,findPlaceHolders:()=>l}),e.link("./insertPageBreaks",{insertAutoPageBreaks(e){n=e}},0),e.link("./SegmentEditor",{SegmentEditor(e){r=e}},1);const i=[];function s(e){const t=new Date(e.date);e.dateString=t.toLocaleDateString("nl-BE",{year:"numeric",month:"long",day:"numeric"}),console.log(e);for(const{keyPath:o,editor:n}of i){const t=c(e,o);t&&n.setInnerHTML(t)}n(),n()}function l(){const e=e=>document.querySelector(e);for(const t of["english","dutch"])d({readings:[{text:e(".first-reading .reading-editor.".concat(t)).pmEditor,reference:e(".first-reading.reference").pmEditor}],psalm:{text:e(".psalm .reading-editor.".concat(t)).pmEditor,reference:e(".psalm .reference").pmEditor},psalmResponse:e(".psalm .response.".concat(t)).pmEditor,verseBeforeGospel:e(".verse-before-gospel .".concat(t)).pmEditor,verseBeforeGospelReference:e(".verse-before-gospel .reference").pmEditor,gospel:{text:e(".gospel .reading-editor.".concat(t)).pmEditor,reference:e(".gospel .reference").pmEditor}},[t]);a(e(".gospel-intro").pmEditor,"dutch","gospel","book"),a(e(".date").pmEditor,"dateString"),console.log(i)}function a(e){if(e instanceof r){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];i.push({keyPath:o,editor:e})}else console.error("Editor must be a SegmentEditor")}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const[o,n]of Object.entries(e))n instanceof r?a(n,...t.concat(o)):d(n,t.concat(o))}function c(e,t){return t.reduce((e,t)=>e[t],e)}},"main.js":function e(t,o,e){let n,r,i,s,l,a;e.link("./insertPageBreaks"),e.link("./SongEditor",{SongEditor(e){n=e}},0),e.link("./PlainTextEditor",{PlainTextEditor(e){r=e}},1),e.link("./ReadingEditor",{ReadingEditor(e){i=e}},2),e.link("./insertPageBreaks",{insertAutoPageBreaks(e){s=e},setSection(e){l=e}},3),e.link("./placeholders",{findPlaceHolders(e){a=e}},4),window.addEventListener("load",(function(){document.querySelectorAll(".song-editor").forEach(e=>new n(e)),document.querySelectorAll(".plaintext-editor").forEach(e=>new r(e)),document.querySelectorAll(".reading-editor").forEach(e=>new i(e)),a(),s()}))}}},{extensions:[".js",".json",".html",".css",".mjs",".ts"]}),exports=require("/client/main.js");

